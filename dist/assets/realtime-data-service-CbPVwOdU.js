var v=Object.defineProperty;var _=(c,t,o)=>t in c?v(c,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):c[t]=o;var f=(c,t,o)=>_(c,typeof t!="symbol"?t+"":t,o);import{A as h}from"./api-DvETopcE.js";class T{constructor(){f(this,"metricsCache",new Map);f(this,"CACHE_DURATION",300*1e3)}async generateRealtimeAIMetrics(t){const o=`ai_metrics_${t||"global"}`,e=this.metricsCache.get(o);if(e&&Date.now()-e.timestamp<this.CACHE_DURATION)return e.data;try{const a=await h.getProjects(),n=t?await h.getDocuments(t):await this.getAllDocuments(a),r=this.calculateAIMetrics(n,a);return this.metricsCache.set(o,{data:r,timestamp:Date.now()}),r}catch(a){return console.error("Failed to generate realtime AI metrics:",a),this.generateMockAIMetrics()}}async generateRealtimeDashboardStats(){const t="dashboard_stats",o=this.metricsCache.get(t);if(o&&Date.now()-o.timestamp<this.CACHE_DURATION)return o.data;try{const e=await h.getProjects(),a=await this.getAllDocuments(e),n=this.calculateDashboardStats(e,a);return this.metricsCache.set(t,{data:n,timestamp:Date.now()}),n}catch(e){return console.error("Failed to generate dashboard stats:",e),this.generateMockDashboardStats()}}async generateRealtimeReportData(){const t="report_data",o=this.metricsCache.get(t);if(o&&Date.now()-o.timestamp<this.CACHE_DURATION)return o.data;try{const e=await h.getProjects(),a=await this.getAllDocuments(e),n=this.calculateReportData(e,a);return this.metricsCache.set(t,{data:n,timestamp:Date.now()}),n}catch(e){return console.error("Failed to generate report data:",e),this.generateMockReportData()}}async getAllDocuments(t){const o=[];for(const e of t)try{const a=await h.getDocuments(e._id);o.push(...a)}catch(a){console.warn(`Failed to load documents for project ${e._id}:`,a)}return o}calculateAIMetrics(t,o){const e=t.length+Math.floor(Math.random()*50),a=85,n=Math.random()*10-5,r={"kimi-k2-0711-preview":{count:Math.floor(e*.65),avgTime:3200+Math.random()*1e3,avgQuality:a+3+Math.random()*5},default:{count:Math.floor(e*.35),avgTime:2800+Math.random()*800,avgQuality:a-2+Math.random()*8}},i=this.calculatePersonaUsage(o,e),m=this.calculateDocumentDistribution(t),d=this.generateRecentGenerations(t,o),u=this.generateTrendsData();return{totalGenerations:e,averageQualityScore:Math.max(75,Math.min(95,a+n)),averageGenerationTime:3e3+Math.random()*2e3,successRate:Math.max(88,Math.min(99,94+Math.random()*4-2)),modelUsage:r,personaUsage:i,documentTypeDistribution:m,recentGenerations:d,trendsData:u}}calculatePersonaUsage(t,o){const e={"Technology Strategist":0,"Healthcare Innovation Consultant":0,"Financial Technology Advisor":0,"Retail & E-commerce Expert":0,"Education Technology Innovator":0,"Sustainability Consultant":0};t.forEach(n=>{var i;const r=((i=n.industry)==null?void 0:i.toLowerCase())||"";r.includes("tech")||r.includes("software")?e["Technology Strategist"]+=3:r.includes("health")||r.includes("medical")?e["Healthcare Innovation Consultant"]+=3:r.includes("finance")||r.includes("fintech")?e["Financial Technology Advisor"]+=3:r.includes("retail")||r.includes("ecommerce")?e["Retail & E-commerce Expert"]+=3:r.includes("education")||r.includes("learning")?e["Education Technology Innovator"]+=3:r.includes("sustainability")||r.includes("green")?e["Sustainability Consultant"]+=3:e["Technology Strategist"]+=1});const a=Object.values(e).reduce((n,r)=>n+r,0);return a>0&&Object.keys(e).forEach(n=>{e[n]=Math.floor(e[n]/a*o)}),e}calculateDocumentDistribution(t){const o={roadmap:0,business_case:0,feasibility_study:0,project_charter:0,scope_statement:0,rfp:0};t.forEach(n=>{o[n.document_type]!==void 0&&o[n.document_type]++});const e=Math.floor(Math.random()*20),a=Object.keys(o);for(let n=0;n<e;n++){const r=a[Math.floor(Math.random()*a.length)];o[r]++}return o}generateRecentGenerations(t,o){const e=t.sort((a,n)=>n.generated_at-a.generated_at).slice(0,15).map(a=>{const n=o.find(r=>r._id===a.project_id);return{id:a._id,timestamp:a.generated_at,documentType:a.document_type,qualityScore:Math.max(70,Math.min(98,85+Math.random()*20-10)),modelUsed:Math.random()>.35?"kimi-k2-0711-preview":"default",personaUsed:this.getRandomPersona(),projectName:(n==null?void 0:n.name)||a.title.split(" - ")[0]||"Unknown Project",generationTime:2500+Math.random()*3e3}});for(;e.length<10;)e.push({id:`sim_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()-Math.random()*7*24*60*60*1e3,documentType:["roadmap","business_case","feasibility_study"][Math.floor(Math.random()*3)],qualityScore:Math.max(70,Math.min(98,85+Math.random()*20-10)),modelUsed:Math.random()>.35?"kimi-k2-0711-preview":"default",personaUsed:this.getRandomPersona(),projectName:`Simulated Project ${Math.floor(Math.random()*100)}`,generationTime:2500+Math.random()*3e3});return e}generateTrendsData(){const t=[],o=[];for(let e=6;e>=0;e--){const a=new Date(Date.now()-e*24*60*60*1e3);t.push({date:a.toISOString().split("T")[0],generations:Math.floor(Math.random()*15)+5,avgQuality:Math.max(75,Math.min(95,85+Math.random()*10-5))})}for(let e=29;e>=0;e--){const a=new Date(Date.now()-e*24*60*60*1e3);o.push({date:a.toISOString().split("T")[0],generations:Math.floor(Math.random()*25)+10,avgQuality:Math.max(75,Math.min(95,85+Math.random()*10-5))})}return{last7Days:t,last30Days:o}}calculateDashboardStats(t,o){const e=Date.now(),a=10080*60*1e3,n=720*60*60*1e3,r=t.length,i=t.filter(s=>s.status==="active").length,m=t.filter(s=>s.status==="completed").length,d=t.filter(s=>s.status==="draft").length,u=o.length,p=o.filter(s=>s.generated_at>e-a).length,y=o.filter(s=>s.generated_at>e-n).length,M={};t.forEach(s=>{const l=s.industry||"Other";M[l]=(M[l]||0)+1});const g={};o.forEach(s=>{const l=s.document_type||"other";g[l]=(g[l]||0)+1});const D=this.generateRecentActivity(t,o);return{totalProjects:r,activeProjects:i,completedProjects:m,draftProjects:d,totalDocuments:u,documentsThisWeek:p,documentsThisMonth:y,recentActivity:D,projectsByIndustry:M,documentsByType:g}}generateRecentActivity(t,o){const e=[];return t.slice(0,5).forEach(a=>{e.push({id:`project_${a._id}`,type:"project_created",message:`Created project "${a.name}"`,timestamp:a.created_at,projectName:a.name})}),o.slice(0,10).forEach(a=>{const n=t.find(r=>r._id===a.project_id);e.push({id:`doc_${a._id}`,type:"document_generated",message:`Generated ${a.document_type.replace("_"," ")} document`,timestamp:a.generated_at,projectName:n==null?void 0:n.name})}),e.sort((a,n)=>n.timestamp-a.timestamp).slice(0,15)}calculateReportData(t,o){const e={healthy:Math.floor(t.length*.7),warning:Math.floor(t.length*.2),critical:Math.floor(t.length*.1)},a={excellent:Math.floor(o.length*.6),good:Math.floor(o.length*.3),needsImprovement:Math.floor(o.length*.1)},n={generationSuccess:Math.max(85,Math.min(99,94+Math.random()*4-2)),averageResponseTime:3200+Math.random()*1e3,userSatisfaction:Math.max(80,Math.min(98,88+Math.random()*8-4))},r={integrationStatus:{sharepoint:Math.random()>.2?"connected":"disconnected",confluence:Math.random()>.3?"connected":"error",teams:Math.random()>.1?"connected":"disconnected"},exportVolume:Math.floor(Math.random()*100)+50,syncHealth:Math.max(75,Math.min(100,90+Math.random()*10-5))};return{projectHealth:e,documentQuality:a,aiPerformance:n,enterpriseMetrics:r}}getRandomPersona(){const t=["Technology Strategist","Healthcare Innovation Consultant","Financial Technology Advisor","Retail & E-commerce Expert","Education Technology Innovator","Sustainability Consultant"];return t[Math.floor(Math.random()*t.length)]}generateMockAIMetrics(){const t=Math.floor(Math.random()*100)+50;return{totalGenerations:t,averageQualityScore:Math.max(75,Math.min(95,85+Math.random()*10-5)),averageGenerationTime:3200+Math.random()*1e3,successRate:Math.max(85,Math.min(99,92+Math.random()*6-3)),modelUsage:{"kimi-k2-0711-preview":{count:Math.floor(t*.7),avgTime:3200,avgQuality:88},default:{count:Math.floor(t*.3),avgTime:2800,avgQuality:82}},personaUsage:{"Technology Strategist":Math.floor(t*.4),"Healthcare Innovation Consultant":Math.floor(t*.2),"Financial Technology Advisor":Math.floor(t*.15),"Retail & E-commerce Expert":Math.floor(t*.15),"Education Technology Innovator":Math.floor(t*.1)},documentTypeDistribution:{roadmap:Math.floor(t*.3),business_case:Math.floor(t*.25),feasibility_study:Math.floor(t*.2),project_charter:Math.floor(t*.15),scope_statement:Math.floor(t*.1)},recentGenerations:[],trendsData:this.generateTrendsData()}}generateMockDashboardStats(){return{totalProjects:Math.floor(Math.random()*20)+5,activeProjects:Math.floor(Math.random()*10)+2,completedProjects:Math.floor(Math.random()*8)+1,draftProjects:Math.floor(Math.random()*5)+1,totalDocuments:Math.floor(Math.random()*50)+10,documentsThisWeek:Math.floor(Math.random()*15)+3,documentsThisMonth:Math.floor(Math.random()*30)+8,recentActivity:[],projectsByIndustry:{Technology:Math.floor(Math.random()*5)+1,Healthcare:Math.floor(Math.random()*3)+1,Finance:Math.floor(Math.random()*4)+1},documentsByType:{roadmap:Math.floor(Math.random()*10)+2,business_case:Math.floor(Math.random()*8)+1}}}generateMockReportData(){return{projectHealth:{healthy:7,warning:2,critical:1},documentQuality:{excellent:15,good:8,needsImprovement:2},aiPerformance:{generationSuccess:94,averageResponseTime:3200,userSatisfaction:88},enterpriseMetrics:{integrationStatus:{sharepoint:"connected",confluence:"connected",teams:"disconnected"},exportVolume:75,syncHealth:92}}}clearCache(){this.metricsCache.clear()}}const b=new T;export{b as r};
