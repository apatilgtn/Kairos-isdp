const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/c4Diagram-15b5d702-DxNYvy79.js","assets/svgDrawCommon-3ba9043b-DV96sakd.js","assets/index--Ct_i1hN.js","assets/index-C_IiQZB2.css","assets/CreateProjectDialog-B50wA-BL.js","assets/ComprehensiveSidebar-Vlctflbj.js","assets/sparkles-BfGdNXHf.js","assets/input-C_7U790y.js","assets/label-rsT8mm_G.js","assets/textarea-DXjYrcOW.js","assets/dropdown-menu-M5hY8prX.js","assets/index-D1ykkcZR.js","assets/index-BdQq_4o_.js","assets/index-CAJCthQj.js","assets/check-n9Ozjfd-.js","assets/loader-circle-D7JJz-J1.js","assets/app-store-DSCC-9CO.js","assets/tabs-Ch4usXjd.js","assets/api-DvETopcE.js","assets/progress-DdGTx_g7.js","assets/circle-check-big-CiHdLTWt.js","assets/search-Y8kUxL9q.js","assets/shield-C64daEXr.js","assets/refresh-cw-DX8cYh6-.js","assets/clock-VI92Tq_x.js","assets/scroll-area-BHaRnu7L.js","assets/avatar-CiRKzmZr.js","assets/brain-C_B9-vVQ.js","assets/download-DNvapSz4.js","assets/circle-x-CvIp_DmC.js","assets/circle-alert-CZVp4ml2.js","assets/plus-YY2nQTOV.js","assets/eye--OXZG_jK.js","assets/palette-DgW1FoQ2.js","assets/jspdf.es.min-18wCuQnd.js","assets/switch-DycwdMRF.js","assets/play-DfuTSM5j.js","assets/star-JpMFUgxY.js","assets/alert-CgCTLOah.js","assets/enhanced-ai-C0lXWFs-.js","assets/flowDiagram-cbd28bf7-DMpnOKav.js","assets/flowDb-7c981674-ngFmDoHL.js","assets/graph-BUV1Tk6r.js","assets/layout-BOjOkPgj.js","assets/styles-2ab5d517-5DL0ux5U.js","assets/index-6079d271-DZXmdd36.js","assets/clone-D0j0xiug.js","assets/edges-332bd1c7-BSdU_o3U.js","assets/createText-d213de94-BzxPQFuV.js","assets/line-BHm2ud2P.js","assets/array-BKyUJesY.js","assets/path-CbwjOpE9.js","assets/channel-CSy6CetG.js","assets/flowDiagram-v2-ffc7f31a-CsOrzGPz.js","assets/erDiagram-880f2ed8-px2rag-q.js","assets/gitGraphDiagram-21fc4d3e-B47v6Y4S.js","assets/ganttDiagram-04f9e578-B7dOWn5x.js","assets/linear-29C9KUHv.js","assets/init-Gi6I4Gst.js","assets/infoDiagram-4a4f5b27-D37HcCPu.js","assets/pieDiagram-421022e6-BKkdzFU8.js","assets/arc-C8zu8Qsi.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-0957ecba-CMcYnMZ4.js","assets/xychartDiagram-b6496bcd-CgdNXWWt.js","assets/requirementDiagram-23d650b8-CGCqddCo.js","assets/sequenceDiagram-17ac3bff-CjnEiGwV.js","assets/classDiagram-d40c83e7-DtcCj8sr.js","assets/styles-5f03d8d2-DLeovAD_.js","assets/classDiagram-v2-d5a6b087-BEAhKaMu.js","assets/stateDiagram-9c5f0230-Cw82C698.js","assets/styles-edf9a4b0-D0jK4EmJ.js","assets/stateDiagram-v2-51a3dcff-C0aExKiA.js","assets/journeyDiagram-29694f62-ChFRiQBC.js","assets/flowchart-elk-definition-36e2d292-CzG-X7sk.js","assets/timeline-definition-7e6b55e7-CO_gbWCo.js","assets/mindmap-definition-ac74a2e8-DXLbrZcU.js","assets/sankeyDiagram-23345273-bhiCYELp.js","assets/Tableau10-B-NsZVaP.js","assets/blockDiagram-68f4deed-D5zt_28X.js"])))=>i.map(i=>d[i]);
var Sm=Object.defineProperty;var km=(t,s,i)=>s in t?Sm(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i;var Ct=(t,s,i)=>km(t,typeof s!="symbol"?s+"":s,i);import{e as ye,j as e,C as _,a as R,b as I,c as ae,d as N,B as $,f as pc,p as fc,g as Gt,r as y,T as Ot,h as hs,u as Ra,i as gc,P as Tm,k as As,l as yc,m as Es,n as ws,o as ca,q as Am,s as Em,_ as Ie,R as Fm,t as Sr}from"./index--Ct_i1hN.js";import{L as Gs,G as jc,C as Dm,A as Lm}from"./CreateProjectDialog-B50wA-BL.js";import{u as ht}from"./app-store-DSCC-9CO.js";import{B as X,S as Ye,F as ke,T as Et,A as At,U as $e,M as Vr,C as tt,Z as Ft,a as vc,P as da,D as Os,b as Mm}from"./ComprehensiveSidebar-Vlctflbj.js";import{T as qt,a as Qt,b as Ne,c as Ce}from"./tabs-Ch4usXjd.js";import{A as xe,O as ii}from"./api-DvETopcE.js";import{P as Ae,T as ct}from"./progress-DdGTx_g7.js";import{C as Fe}from"./circle-check-big-CiHdLTWt.js";import{S as Oi}from"./search-Y8kUxL9q.js";import{S as Is}from"./shield-C64daEXr.js";import{R as Dt}from"./refresh-cw-DX8cYh6-.js";import{C as Ge}from"./clock-VI92Tq_x.js";import{L as ve}from"./label-rsT8mm_G.js";import{T as Hi}from"./textarea-DXjYrcOW.js";import{S as Lt,A as Ro,C as bc,G as Pm}from"./scroll-area-BHaRnu7L.js";import{D as gt,a as Oo,b as yt,c as Xt,d as Zt,e as Ws,S as Re,f as Oe,g as ze,h as qe,i as se,C as wc,j as Bm,k as Im,l as $m,m as zo,n as qo}from"./dropdown-menu-M5hY8prX.js";import{A as Rm,a as Om,S as zm,C as qm,T as Oa,E as Yi}from"./avatar-CiRKzmZr.js";import{I as ut}from"./input-C_7U790y.js";import{S as at}from"./sparkles-BfGdNXHf.js";import{L as Be}from"./loader-circle-D7JJz-J1.js";import{B as wt}from"./brain-C_B9-vVQ.js";import{D as Me}from"./download-DNvapSz4.js";import{C as _c}from"./circle-x-CvIp_DmC.js";import{C as rr}from"./circle-alert-CZVp4ml2.js";import{P as ui,E as Um}from"./plus-YY2nQTOV.js";import{E as Tt}from"./eye--OXZG_jK.js";import{P as za}from"./palette-DgW1FoQ2.js";import{u as Nc,a as Cc}from"./index-CAJCthQj.js";import{C as Gm}from"./check-n9Ozjfd-.js";import{E as Wm}from"./jspdf.es.min-18wCuQnd.js";import{c as Sc}from"./index-BdQq_4o_.js";import{u as Vm}from"./index-D1ykkcZR.js";import{S as vt}from"./switch-DycwdMRF.js";import{P as qa}from"./play-DfuTSM5j.js";import{S as Ua}from"./star-JpMFUgxY.js";import{A as zi,a as qi}from"./alert-CgCTLOah.js";import{AI_PERSONAS as qn}from"./enhanced-ai-C0lXWFs-.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Ym=ye("arrow-down",Hm);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Km=ye("arrow-left",Jm);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ni=ye("arrow-right",Qm);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Zm=ye("arrow-up-right",Xm);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],tu=ye("book-open",eu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],iu=ye("bot",su);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],nu=ye("building",ru);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],ou=ye("chart-line",au);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ss=ye("circle-check",lu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],du=ye("code",cu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Hr=ye("copy",hu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],kc=ye("cpu",mu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ha=ye("dollar-sign",uu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xu=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],pu=ye("ellipsis-vertical",xu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fu=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Uo=ye("file-down",fu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],Tc=ye("file-image",gu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],ju=ye("gauge",yu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vu=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],ma=ye("git-branch",vu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bu=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],wu=ye("hand",bu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Nu=ye("history",_u);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ji=ye("image",Cu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ac=ye("info",Su);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ku=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ai=ye("layers",ku);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Au=ye("lock-open",Tu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Go=ye("lock",Eu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Ec=ye("map",Fu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Fc=ye("maximize-2",Du);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Yr=ye("message-circle",Lu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],Dc=ye("minimize-2",Mu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Lc=ye("monitor",Pu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Mc=ye("mouse-pointer",Bu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],Un=ye("network",Iu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ki=ye("package",$u);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Pc=ye("pause",Ru);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],Jr=ye("pen-line",Ou);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],ua=ye("pen-tool",zu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],Wo=ye("scale",qu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ga=ye("send",Uu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],zs=ye("share-2",Gu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],oi=ye("shopping-cart",Wu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vu=[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]],Bc=ye("skip-back",Vu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],Ic=ye("skip-forward",Hu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ju=ye("square-check-big",Yu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Qu=ye("square-pen",Ku);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Zu=ye("square-x",Xu);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],Vo=ye("thumbs-down",ex);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]],Ho=ye("thumbs-up",tx);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sx=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],jn=ye("timer",sx);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],rx=ye("trending-down",ix);/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Mr=ye("wand-sparkles",nx),Yo=[{name:"Justification Phase",description:"Establish business need and project viability",icon:e.jsx(ha,{className:"h-5 w-5"}),color:"green",documents:[{name:"Business Case",description:"ROI analysis and stakeholder benefits",icon:e.jsx(ha,{className:"h-4 w-4"})},{name:"Feasibility Study",description:"Technical, financial, and operational viability",icon:e.jsx(Oi,{className:"h-4 w-4"})}],outcomes:["Approved business case","Confirmed project viability","Stakeholder buy-in"]},{name:"Definition & Authority",description:"Define project scope and establish governance",icon:e.jsx(Is,{className:"h-5 w-5"}),color:"purple",documents:[{name:"Project Charter",description:"Formal authorization and governance framework",icon:e.jsx(Is,{className:"h-4 w-4"})},{name:"Scope Statement",description:"Clear project boundaries and deliverables",icon:e.jsx(ai,{className:"h-4 w-4"})}],outcomes:["Authorized project manager","Clear project boundaries","Governance framework"]},{name:"Procurement & Planning",description:"Acquire resources and plan execution approach",icon:e.jsx(oi,{className:"h-5 w-5"}),color:"orange",documents:[{name:"Request for Proposal (RFP)",description:"Vendor solicitation for solution development",icon:e.jsx(oi,{className:"h-4 w-4"})},{name:"AI Roadmap",description:"Detailed execution strategy and timeline",icon:e.jsx(Ec,{className:"h-4 w-4"})}],outcomes:["Selected vendors","Detailed project plan","Resource allocation"]}];function ax(){const t=s=>{const i={green:"bg-green-50 border-green-200 text-green-800",purple:"bg-purple-50 border-purple-200 text-purple-800",orange:"bg-orange-50 border-orange-200 text-orange-800"};return i[s]||i.green};return e.jsxs(_,{className:"mb-6",children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ec,{className:"h-5 w-5 text-blue-600"}),"Project Documentation Workflow"]}),e.jsx(ae,{children:"Follow this systematic approach to create comprehensive project documentation"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"space-y-6",children:Yo.map((s,i)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-2 rounded-lg ${t(s.color)}`,children:s.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs(X,{variant:"outline",className:t(s.color),children:["Phase ",i+1]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-3",children:s.documents.map(r=>e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-1 bg-white rounded",children:r.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:r.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]})]},r.name))}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-sm mb-2 flex items-center gap-1",children:[e.jsx(Fe,{className:"h-3 w-3"}),"Expected Outcomes:"]}),e.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:s.outcomes.map(r=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),r]},r))})]})]})]}),i<Yo.length-1&&e.jsx("div",{className:"flex justify-center my-4",children:e.jsx(Ym,{className:"h-5 w-5 text-gray-400"})})]},s.name))}),e.jsx(Ye,{className:"my-4"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium mb-2",children:"💡 Pro Tips:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Complete documents in sequence for best results"}),e.jsx("li",{children:"• Each phase builds upon previous documentation"}),e.jsx("li",{children:"• Use the comparison tools to choose the right procurement approach"}),e.jsx("li",{children:"• Export documents in professional formats for stakeholder review"})]})]})]})]})}const ox=({project:t,documents:s,diagrams:i,isLoading:r,onRefresh:n})=>{const o=c=>new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),a=c=>s.filter(u=>u.document_type===c),l=c=>i.filter(u=>u.diagram_type===c),d=()=>{const c=s.length+i.length,u=s.filter(h=>h.status==="generated").length+i.length;return c>0?u/c*100:0},m=()=>[...s.map(u=>({...u,type:"document",timestamp:u.generated_at})),...i.map(u=>({...u,type:"diagram",timestamp:u.created_at}))].sort((u,h)=>h.timestamp-u.timestamp).slice(0,5);return r?e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(c=>e.jsx(_,{className:"animate-pulse",children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-full"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})})},c))}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Project Overview"}),e.jsxs(ae,{children:["Current status and progress for ",t.name]})]}),e.jsxs($,{variant:"outline",size:"sm",onClick:n,children:[e.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Project Completion"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.round(d()),"%"]})]}),e.jsx(Ae,{value:d(),className:"h-2"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:s.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Documents"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-accent",children:i.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Diagrams"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-muted-foreground",children:Math.ceil((Date.now()-t.created_at)/(1e3*60*60*24))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Days Active"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-muted-foreground",children:s.filter(c=>c.status==="exported").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Exported"})]})]})]})})]}),e.jsx(ax,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"Generated Documents"})]}),e.jsx(ae,{children:"AI-generated content for your MVP"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:[{type:"roadmap",label:"MVP Roadmap",icon:Et},{type:"elevator_pitch",label:"Elevator Pitch",icon:At},{type:"model_advice",label:"AI Model Advice",icon:Ss}].map(({type:c,label:u,icon:h})=>{const p=a(c);return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(h,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:u})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(X,{variant:p.length>0?"default":"secondary",children:[p.length," generated"]}),p.length>0&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Latest: ",o(Math.max(...p.map(b=>b.generated_at)))]})]})]},c)})}),s.length===0&&e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(ke,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No documents generated yet"}),e.jsx("p",{className:"text-xs",children:"Use the AI Roadmap tab to get started"})]})]})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center space-x-2",children:[e.jsx(ma,{className:"w-5 h-5 text-accent"}),e.jsx("span",{children:"Visual Diagrams"})]}),e.jsx(ae,{children:"Flowcharts and architectural diagrams"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:[{type:"flowchart",label:"Flowcharts"},{type:"sequence",label:"Sequence Diagrams"},{type:"user_journey",label:"User Journeys"},{type:"gantt",label:"Gantt Charts"}].map(({type:c,label:u})=>{const h=l(c);return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",children:[e.jsx("span",{className:"font-medium",children:u}),e.jsx(X,{variant:h.length>0?"default":"secondary",children:h.length})]},c)})}),i.length===0&&e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(ma,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No diagrams created yet"}),e.jsx("p",{className:"text-xs",children:"Use the Diagrams tab to create visuals"})]})]})]})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"w-5 h-5 text-muted-foreground"}),e.jsx("span",{children:"Recent Activity"})]}),e.jsx(ae,{children:"Latest updates to your project"})]}),e.jsx(N,{children:m().length>0?e.jsx("div",{className:"space-y-3",children:m().map((c,u)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:[c.type==="document"?"Generated":"Created"," "," ",c.type==="document"?c.document_type.replace("_"," ").toLowerCase():c.diagram_type.replace("_"," ").toLowerCase()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.title||"Untitled"})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:o(c.timestamp)})]},`${c.type}-${c._id}`))}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(At,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No recent activity"}),e.jsx("p",{className:"text-xs",children:"Start generating content to see activity here"})]})})]})]})},Gn=pc()(fc((t,s)=>({activeSessions:new Map,documentVersions:new Map,documentLocks:new Map,userPresence:new Map,comments:new Map,pendingEdits:new Map,conflictResolution:"auto_merge",initializeSession:async i=>{try{const[r,n,o,a]=await Promise.all([s().loadVersionHistory(i),s().loadComments(i),s().checkLock(i),xe.getDocumentEdits(i)]),l={id:i,document_id:i,participants:[],active_edits:a,current_version:r.length>0?Math.max(...r.map(d=>d.version)):1,last_sync:Date.now(),conflict_resolution:s().conflictResolution};t(d=>({activeSessions:new Map(d.activeSessions.set(i,l)),documentVersions:new Map(d.documentVersions.set(i,r)),comments:new Map(d.comments.set(i,n)),documentLocks:o?new Map(d.documentLocks.set(i,o)):d.documentLocks}))}catch(r){console.error("Failed to initialize collaboration session:",r)}},joinSession:(i,r,n)=>{var a,l;const o={user_id:r,user_name:n,document_id:i,cursor_position:0,last_active:Date.now(),is_editing:!1};t(d=>{const m=d.activeSessions.get(i);if(m){const c=m.participants.filter(p=>p.user_id!==r);c.push(o);const u={...m,participants:c},h=new Map(d.activeSessions);return h.set(i,u),{activeSessions:h,userPresence:new Map(d.userPresence.set(`${i}-${r}`,o))}}return d}),(l=(a=s()).onUserJoined)==null||l.call(a,o)},leaveSession:(i,r)=>{var n,o;t(a=>{const l=a.activeSessions.get(i);if(l){const d=l.participants.filter(h=>h.user_id!==r),m={...l,participants:d},c=new Map(a.activeSessions);c.set(i,m);const u=new Map(a.userPresence);return u.delete(`${i}-${r}`),{activeSessions:c,userPresence:u}}return a}),(o=(n=s()).onUserLeft)==null||o.call(n,r)},applyEdit:async(i,r)=>{var n,o;try{const a=s().activeSessions.get(i),l=(a==null?void 0:a.current_version)||1,d={...r,id:`edit_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now(),version:l};await xe.createDocumentEdit(d),t(m=>{const c=m.activeSessions.get(i);if(c){const u={...c,active_edits:[...c.active_edits,d],last_sync:Date.now()};return{activeSessions:new Map(m.activeSessions.set(i,u))}}return m}),(o=(n=s()).onEditReceived)==null||o.call(n,d)}catch(a){console.error("Failed to apply edit:",a)}},undoEdit:async(i,r)=>{try{await xe.deleteDocumentEdit(r),t(n=>{const o=n.activeSessions.get(i);if(o){const a={...o,active_edits:o.active_edits.filter(l=>l.id!==r)};return{activeSessions:new Map(n.activeSessions.set(i,a))}}return n})}catch(n){console.error("Failed to undo edit:",n)}},createVersion:async(i,r,n,o=!1)=>{try{const a=s().activeSessions.get(i),l=((a==null?void 0:a.current_version)||0)+1,d=await xe.createDocumentVersion({document_id:i,version:l,content:r,changes_summary:n,is_major:o});return t(m=>{const u=[...m.documentVersions.get(i)||[],d],h=m.activeSessions.get(i);let p=m.activeSessions;return h&&(p=new Map(m.activeSessions.set(i,{...h,current_version:l}))),{documentVersions:new Map(m.documentVersions.set(i,u)),activeSessions:p}}),d}catch(a){throw console.error("Failed to create version:",a),a}},loadVersionHistory:async i=>{try{const r=await xe.getDocumentVersions(i);return t(n=>({documentVersions:new Map(n.documentVersions.set(i,r))})),r}catch(r){return console.error("Failed to load version history:",r),[]}},restoreVersion:async(i,r)=>{try{const o=(s().documentVersions.get(i)||[]).find(a=>a._id===r);o&&await s().createVersion(i,o.content,`Restored from version ${o.version}`,!0)}catch(n){console.error("Failed to restore version:",n)}},acquireLock:async(i,r)=>{var n,o;try{const a=await xe.acquireDocumentLock(i,r);return t(l=>({documentLocks:new Map(l.documentLocks.set(i,a))})),(o=(n=s()).onLockAcquired)==null||o.call(n,a),!0}catch(a){return console.error("Failed to acquire lock:",a),!1}},releaseLock:async i=>{var r,n;try{await xe.releaseDocumentLock(i),t(o=>{const a=new Map(o.documentLocks);return a.delete(i),{documentLocks:a}}),(n=(r=s()).onLockReleased)==null||n.call(r,i)}catch(o){console.error("Failed to release lock:",o)}},checkLock:async i=>{try{const r=await xe.getDocumentLock(i);return r&&t(n=>({documentLocks:new Map(n.documentLocks.set(i,r))})),r}catch(r){return console.error("Failed to check lock:",r),null}},addComment:async(i,r)=>{var n,o;try{const a=await xe.createDocumentComment({...r,document_id:i,created_at:Date.now()});return t(l=>{const m=[...l.comments.get(i)||[],a];return{comments:new Map(l.comments.set(i,m))}}),(o=(n=s()).onCommentAdded)==null||o.call(n,a),a}catch(a){throw console.error("Failed to add comment:",a),a}},replyToComment:async(i,r)=>{try{const n=await xe.getDocumentComment(i);if(n)return await s().addComment(n.document_id,{document_id:n.document_id,content:r,position:n.position,selection_text:n.selection_text,author_id:n.author_id,author_name:n.author_name,resolved:!1,parent_comment_id:i,thread_id:n.thread_id||i});throw new Error("Original comment not found")}catch(n){throw console.error("Failed to reply to comment:",n),n}},resolveComment:async i=>{try{await xe.resolveDocumentComment(i),t(r=>{const n=new Map(r.comments);for(const[o,a]of n.entries()){const l=a.map(d=>d._id===i?{...d,resolved:!0}:d);n.set(o,l)}return{comments:n}})}catch(r){console.error("Failed to resolve comment:",r)}},loadComments:async i=>{try{const r=await xe.getDocumentComments(i);return t(n=>({comments:new Map(n.comments.set(i,r))})),r}catch(r){return console.error("Failed to load comments:",r),[]}},updatePresence:(i,r,n)=>{t(o=>{const a=`${i}-${r}`,l=o.userPresence.get(a);if(l){const d={...l,...n,last_active:Date.now()};return{userPresence:new Map(o.userPresence.set(a,d))}}return o})},getActiveUsers:i=>{const r=s().userPresence,n=[];for(const[o,a]of r.entries())o.startsWith(`${i}-`)&&Date.now()-a.last_active<300*1e3&&n.push(a);return n},resolveConflict:(i,r)=>{t(n=>({conflictResolution:r}))},mergeEdits:(i,r)=>{const n=r.sort((a,l)=>a.timestamp-l.timestamp);let o="";for(const a of n)a.type==="insert"&&(o+=a.content);return o},clearSession:i=>{t(r=>{const n=new Map(r.activeSessions),o=new Map(r.userPresence),a=new Map(r.comments),l=new Map(r.documentLocks);n.delete(i),a.delete(i),l.delete(i);for(const d of o.keys())d.startsWith(`${i}-`)&&o.delete(d);return{activeSessions:n,userPresence:o,comments:a,documentLocks:l}})},syncDocument:async i=>{try{await s().initializeSession(i)}catch(r){console.error("Failed to sync document:",r)}}}),{name:"collaboration-storage",partialize:t=>({conflictResolution:t.conflictResolution})})),lx=({document:t,onContentChange:s,onSave:i})=>{const{toast:r}=Gt(),{auth:n}=ht(),o=y.useRef(null),{initializeSession:a,joinSession:l,leaveSession:d,applyEdit:m,acquireLock:c,releaseLock:u,checkLock:h,addComment:p,loadComments:b,createVersion:k,loadVersionHistory:F,updatePresence:L,getActiveUsers:A,activeSessions:U,documentLocks:B,comments:C,documentVersions:E,onEditReceived:j,onUserJoined:M,onUserLeft:q,onCommentAdded:H}=Gn(),[z,V]=y.useState(t.content),[te,Y]=y.useState(!1),[x,f]=y.useState([]),[g,D]=y.useState([]),[T,O]=y.useState([]),[w,Z]=y.useState(!1),[ie,le]=y.useState(!1),[pe,Ee]=y.useState(""),[G,oe]=y.useState(""),[de,P]=y.useState(0),[J,re]=y.useState(""),[Te,it]=y.useState(!1),[Bt,Ds]=y.useState(null);y.useEffect(()=>{if(n.user&&t._id)return a(t._id),l(t._id,n.user.uid,n.user.name),b(t._id).then(D),F(t._id).then(O),()=>{d(t._id,n.user.uid)}},[t._id,n.user]),y.useEffect(()=>{const ne=setInterval(()=>{const _e=A(t._id);f(_e)},5e3);return()=>clearInterval(ne)},[t._id]),y.useEffect(()=>{h(t._id).then(ne=>{var _e;Y(!!ne&&ne.locked_by!==((_e=n.user)==null?void 0:_e.uid))})},[t._id]),y.useEffect(()=>(Gn.setState({onEditReceived:ne=>{var _e;if(ne.document_id===t._id&&ne.user_id!==((_e=n.user)==null?void 0:_e.uid)){const Je=Vt(z,ne);V(Je),s(Je),r({title:"Document Updated",description:`${ne.user_name} made changes`,duration:2e3})}},onUserJoined:ne=>{ne.document_id===t._id&&r({title:"User Joined",description:`${ne.user_name} is now editing`,duration:2e3})},onUserLeft:ne=>{const _e=x.find(Je=>Je.user_id===ne);_e&&r({title:"User Left",description:`${_e.user_name} stopped editing`,duration:2e3})},onCommentAdded:ne=>{ne.document_id===t._id&&(D(_e=>[..._e,ne]),r({title:"New Comment",description:`${ne.author_name} added a comment`,duration:3e3}))}}),()=>{Gn.setState({onEditReceived:void 0,onUserJoined:void 0,onUserLeft:void 0,onCommentAdded:void 0})}),[t._id,z,x,n.user]);const Vt=(ne,_e)=>{switch(_e.type){case"insert":return ne.slice(0,_e.position)+_e.content+ne.slice(_e.position);case"delete":return ne.slice(0,_e.position)+ne.slice(_e.position+_e.length);case"replace":return ne.slice(0,_e.position)+_e.content+ne.slice(_e.position+_e.length);default:return ne}},ps=y.useCallback(async ne=>{var Je,It;if(!n.user||te)return;const _e=z;if(V(ne),s(ne),L(t._id,n.user.uid,{cursor_position:((Je=o.current)==null?void 0:Je.selectionStart)||0,is_editing:!0}),ne!==_e){const Zs={document_id:t._id,user_id:n.user.uid,user_name:n.user.name,type:"replace",position:0,length:_e.length,content:ne,version:((It=U.get(t._id))==null?void 0:It.current_version)||1};await m(t._id,Zs)}},[z,te,n.user,t._id]),fs=()=>{if(!o.current)return;const ne=o.current.selectionStart,_e=o.current.selectionEnd;if(ne!==_e){const Je=z.slice(ne,_e);oe(Je),P(ne)}},Xs=async()=>{try{te?(await u(t._id),Y(!1),r({title:"Document Unlocked",description:"You can now edit this document"})):await c(t._id)?(Y(!1),r({title:"Document Locked",description:"You have exclusive editing access"})):r({title:"Lock Failed",description:"Another user is currently editing",variant:"destructive"})}catch{r({title:"Lock Error",description:"Failed to change lock status",variant:"destructive"})}},Ls=async()=>{if(!(!n.user||!pe.trim()))try{await p(t._id,{document_id:t._id,author_id:n.user.uid,author_name:n.user.name,content:pe,position:de,selection_text:G,resolved:!1}),Ee(""),oe(""),r({title:"Comment Added",description:"Your comment has been added successfully"})}catch{r({title:"Comment Failed",description:"Failed to add comment",variant:"destructive"})}},Ti=async()=>{if(!(!n.user||!J.trim())){it(!0);try{await k(t._id,z,J,!0),await i(),re(""),Ds(new Date);const ne=await F(t._id);O(ne),r({title:"Version Saved",description:`Version "${J}" has been created`})}catch{r({title:"Save Failed",description:"Failed to save version",variant:"destructive"})}finally{it(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"h-4 w-4"}),e.jsxs("div",{className:"flex -space-x-2",children:[x.slice(0,5).map(ne=>e.jsx(Rm,{className:"h-8 w-8 border-2 border-background",children:e.jsx(Om,{className:"text-xs",children:ne.user_name.charAt(0).toUpperCase()})},ne.user_id)),x.length>5&&e.jsx("div",{className:"h-8 w-8 rounded-full bg-muted border-2 border-background flex items-center justify-center",children:e.jsxs("span",{className:"text-xs",children:["+",x.length-5]})})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[x.length," editing"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[te?e.jsxs(X,{variant:"destructive",className:"flex items-center space-x-1",children:[e.jsx(Go,{className:"h-3 w-3"}),e.jsx("span",{children:"Locked"})]}):e.jsxs(X,{variant:"secondary",className:"flex items-center space-x-1",children:[e.jsx(Jr,{className:"h-3 w-3"}),e.jsx("span",{children:"Editing"})]}),Bt&&e.jsxs(X,{variant:"outline",className:"flex items-center space-x-1",children:[e.jsx(Ge,{className:"h-3 w-3"}),e.jsxs("span",{children:["Saved ",Bt.toLocaleTimeString()]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(gt,{open:w,onOpenChange:Z,children:[e.jsx(Oo,{asChild:!0,children:e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx(Vr,{className:"h-4 w-4 mr-2"}),"Comments (",g.length,")"]})}),e.jsxs(yt,{className:"max-w-md",children:[e.jsx(Xt,{children:e.jsx(Zt,{children:"Comments"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ut,{placeholder:"Comment on selected text...",value:pe,onChange:ne=>Ee(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&Ls()}),G&&e.jsxs("div",{className:"text-xs text-muted-foreground bg-muted p-2 rounded",children:['Selected: "',G,'"']}),e.jsxs($,{onClick:Ls,size:"sm",className:"w-full",children:[e.jsx(Ga,{className:"h-3 w-3 mr-2"}),"Add Comment"]})]}),e.jsx(Ye,{}),e.jsx(Lt,{className:"h-[300px]",children:e.jsxs("div",{className:"space-y-3",children:[g.map(ne=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-sm",children:ne.author_name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(ne.created_at).toLocaleString()})]}),e.jsx("p",{className:"text-sm mb-2",children:ne.content}),ne.selection_text&&e.jsxs("div",{className:"text-xs bg-muted p-1 rounded",children:['"',ne.selection_text,'"']}),ne.resolved&&e.jsxs(X,{variant:"outline",className:"mt-2",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Resolved"]})]},ne._id)),g.length===0&&e.jsx("p",{className:"text-center text-muted-foreground text-sm",children:"No comments yet. Select text and add a comment."})]})})]})]})]}),e.jsxs(gt,{open:ie,onOpenChange:le,children:[e.jsx(Oo,{asChild:!0,children:e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx(Nu,{className:"h-4 w-4 mr-2"}),"Versions (",T.length,")"]})}),e.jsxs(yt,{className:"max-w-md",children:[e.jsx(Xt,{children:e.jsx(Zt,{children:"Version History"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ut,{placeholder:"Version name...",value:J,onChange:ne=>re(ne.target.value)}),e.jsxs($,{onClick:Ti,size:"sm",className:"w-full",disabled:Te||!J.trim(),children:[e.jsx(zm,{className:"h-3 w-3 mr-2"}),Te?"Saving...":"Create Version"]})]}),e.jsx(Ye,{}),e.jsx(Lt,{className:"h-[300px]",children:e.jsxs("div",{className:"space-y-3",children:[T.map(ne=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium text-sm",children:["Version ",ne.version]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(ne.created_at).toLocaleString()})]}),e.jsx("p",{className:"text-sm mb-2",children:ne.changes_summary}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["by ",ne.author_name]}),ne.is_major&&e.jsx(X,{variant:"outline",children:"Major"})]})]},ne._id)),T.length===0&&e.jsx("p",{className:"text-center text-muted-foreground text-sm",children:"No versions saved yet."})]})})]})]})]}),e.jsx($,{variant:te?"destructive":"outline",size:"sm",onClick:Xs,children:te?e.jsxs(e.Fragment,{children:[e.jsx(Go,{className:"h-4 w-4 mr-2"}),"Locked"]}):e.jsxs(e.Fragment,{children:[e.jsx(Au,{className:"h-4 w-4 mr-2"}),"Unlocked"]})})]})]})})}),e.jsx(_,{children:e.jsx(N,{className:"p-0",children:e.jsx(Hi,{ref:o,value:z,onChange:ne=>ps(ne.target.value),onSelect:fs,disabled:te,className:"min-h-[500px] border-0 resize-none focus:ring-0",placeholder:te?"This document is locked by another user...":"Start editing..."})})})]})},cx=({project:t,documents:s,onDocumentGenerated:i})=>{const{addNotification:r}=ht(),[n,o]=y.useState(null),[a,l]=y.useState(""),[d,m]=y.useState(null),[c,u]=y.useState(!1),[h,p]=y.useState(""),[b,k]=y.useState([]),[F,L]=y.useState(""),[A,U]=y.useState(!1),[B,C]=y.useState(0),E=y.useRef(null),j=async(T=0)=>{o("roadmap"),C(T);try{if(!await xe.checkAuthStatus())throw new Error("Authentication required. Please log in again.");r({type:"info",title:"Generating Roadmap...",message:"AI is analyzing your project and creating a comprehensive roadmap.",duration:3e3});const w=await xe.generateRoadmap(t);if(w.success&&w.content.trim())await xe.saveDocument({project_id:t._id,document_type:"roadmap",title:`MVP Roadmap - ${t.name}`,content:w.content}),i(),C(0),r({type:"success",title:"Roadmap Generated!",message:"Your comprehensive MVP roadmap has been created successfully.",duration:5e3});else throw new Error(w.error||"Empty response from AI")}catch(O){console.error(`Failed to generate roadmap (attempt ${T+1}):`,O),T<2?(setTimeout(()=>j(T+1),2e3),r({type:"warning",title:`Retrying... (${T+2}/3)`,message:"Generation failed, attempting retry.",duration:3e3})):r({type:"error",title:"Generation Failed",message:"Could not generate the roadmap after 3 attempts. Try refreshing the page or visit the Test page to diagnose the issue.",duration:8e3})}finally{T>=2&&(o(null),C(0))}},M=()=>{j(0)},q=async()=>{o("elevator_pitch");try{if(!await xe.checkAuthStatus())throw new Error("Authentication required. Please log in again.");const O=await xe.generateElevatorPitch(t);if(O.success)await xe.saveDocument({project_id:t._id,document_type:"elevator_pitch",title:`Elevator Pitch - ${t.name}`,content:O.content}),i(),r({type:"success",title:"Elevator Pitch Generated!",message:"Your compelling elevator pitch is ready.",duration:5e3});else throw new Error(O.error||"Generation failed")}catch(T){console.error("Failed to generate elevator pitch:",T),r({type:"error",title:"Generation Failed",message:"Could not generate the elevator pitch. Please try again.",duration:5e3})}finally{o(null)}},H=async()=>{if(!a.trim()){r({type:"warning",title:"Use Case Required",message:"Please describe your AI/ML use case first.",duration:3e3});return}o("model_advice");try{if(!await xe.checkAuthStatus())throw new Error("Authentication required. Please log in again.");const O=await xe.generateModelAdvice(a,t);if(O.success)await xe.saveDocument({project_id:t._id,document_type:"model_advice",title:`AI Model Advice - ${a}`,content:O.content}),i(),l(""),r({type:"success",title:"Model Advice Generated!",message:"Your AI/ML recommendations are ready.",duration:5e3});else throw new Error(O.error||"Generation failed")}catch(T){console.error("Failed to generate model advice:",T),r({type:"error",title:"Generation Failed",message:"Could not generate model advice. Please try again.",duration:5e3})}finally{o(null)}},z=async T=>{try{await navigator.clipboard.writeText(T),r({type:"success",title:"Copied!",message:"Content copied to clipboard.",duration:2e3})}catch(O){console.error("Failed to copy:",O),r({type:"error",title:"Copy Failed",message:"Could not copy content to clipboard.",duration:3e3})}},V=T=>new Date(T).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),te=T=>s.filter(O=>O.document_type===T).sort((O,w)=>w.generated_at-O.generated_at),Y=T=>{m(T),p(T.content),k([{id:Date.now().toString(),role:"assistant",content:`I'm here to help you enhance your ${T.document_type.replace("_"," ")}. What would you like to improve or add?`,timestamp:Date.now()}]),u(!0)},x=async()=>{if(!F.trim()||!d||A)return;const T={id:Date.now().toString(),role:"user",content:F,timestamp:Date.now()};k(O=>[...O,T]),L(""),U(!0);try{const O=await xe.enhanceDocument(d,F,h,t);if(O.success){const w={id:(Date.now()+1).toString(),role:"assistant",content:O.content,timestamp:Date.now()};k(Z=>[...Z,w]),O.enhancedContent&&p(O.enhancedContent)}}catch(O){console.error("Chat error:",O),k(w=>[...w,{id:(Date.now()+1).toString(),role:"assistant",content:"I apologize, but I encountered an error. Please try your request again.",timestamp:Date.now()}])}finally{U(!1)}},f=async()=>{if(!(!d||!h.trim()))try{await xe.saveDocument({project_id:t._id,document_type:d.document_type,title:`${d.title} (Enhanced)`,content:h}),i(),u(!1),r({type:"success",title:"Document Enhanced!",message:"Your enhanced document has been saved.",duration:3e3})}catch(T){console.error("Failed to save enhanced document:",T),r({type:"error",title:"Save Failed",message:"Could not save the enhanced document.",duration:3e3})}},g=async(T,O)=>{try{r({type:"info",title:`Exporting to ${O.toUpperCase()}...`,message:"Preparing your document for download.",duration:2e3});const w=await xe.exportDocument(T,O);if(w.success&&w.blob){const Z=window.URL.createObjectURL(w.blob),ie=window.document.createElement("a");ie.href=Z,ie.download=`${T.title}.${O}`,window.document.body.appendChild(ie),ie.click(),window.URL.revokeObjectURL(Z),window.document.body.removeChild(ie),r({type:"success",title:"Export Complete!",message:`Document exported as ${O.toUpperCase()}.`,duration:3e3})}}catch(w){console.error("Export failed:",w),r({type:"error",title:"Export Failed",message:`Could not export document as ${O.toUpperCase()}.`,duration:3e3})}},D=async T=>{try{o("diagram"),r({type:"info",title:"Generating Diagram...",message:"Creating visual representation of your roadmap.",duration:3e3});const O=await xe.generateDiagramFromContent(T,t);O.success&&(await xe.saveDiagram({project_id:t._id,title:`${T.title} - Visual Diagram`,diagram_type:"flowchart",mermaid_code:O.content}),r({type:"success",title:"Diagram Generated!",message:"Visual diagram created from your roadmap.",duration:3e3}))}catch(O){console.error("Diagram generation failed:",O),r({type:"error",title:"Diagram Generation Failed",message:"Could not generate diagram from content.",duration:3e3})}finally{o(null)}};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"AI Content Generation"})]}),e.jsx(ae,{children:"Generate comprehensive MVP documentation using AI"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"font-semibold",children:"MVP Roadmap"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Generate a comprehensive roadmap with features, risks, KPIs, and milestones."}),e.jsx($,{onClick:M,disabled:n==="roadmap",className:"w-full",children:n==="roadmap"?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating Roadmap..."]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Generate MVP Roadmap"]})}),te("roadmap").length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last generated: ",V(te("roadmap")[0].generated_at)]})]}),e.jsx(Ye,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Vr,{className:"w-4 h-4 text-accent"}),e.jsx("h4",{className:"font-semibold",children:"Elevator Pitch"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a compelling 60-90 second pitch for investors and stakeholders."}),e.jsx($,{onClick:q,disabled:n==="elevator_pitch",className:"w-full",variant:"outline",children:n==="elevator_pitch"?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4 mr-2 animate-spin"}),"Crafting Pitch..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vr,{className:"w-4 h-4 mr-2"}),"Generate Elevator Pitch"]})}),te("elevator_pitch").length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last generated: ",V(te("elevator_pitch")[0].generated_at)]})]}),e.jsx(Ye,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wt,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"font-semibold",children:"AI Model Advisor"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get recommendations for AI models, datasets, and implementation strategies."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(ve,{htmlFor:"use-case",children:"Describe your AI/ML use case"}),e.jsx(Hi,{id:"use-case",placeholder:"e.g., sentiment analysis for customer reviews, image classification for product categories, chatbot for customer support...",value:a,onChange:T=>l(T.target.value),className:"resize-none",rows:3})]}),e.jsx($,{onClick:H,disabled:n==="model_advice"||!a.trim(),className:"w-full",variant:"outline",children:n==="model_advice"?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyzing Use Case..."]}):e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"w-4 h-4 mr-2"}),"Get AI Model Advice"]})})]}),te("model_advice").length>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last generated: ",V(te("model_advice")[0].generated_at)]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-5 h-5 text-accent"}),e.jsx("span",{children:"Generated Documents"})]}),e.jsx(ae,{children:"View and manage your AI-generated content"})]}),e.jsx(N,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Gs,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No Documents Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Use the AI generators to create your first document."})]}):e.jsx("div",{className:"space-y-4",children:s.map(T=>e.jsx(_,{className:`cursor-pointer transition-all hover:shadow-sm ${(d==null?void 0:d._id)===T._id?"ring-2 ring-primary":""}`,onClick:()=>m(T),children:e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(I,{className:"text-base",children:T.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"secondary",className:"text-xs",children:T.document_type.replace("_"," ")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:V(T.generated_at)})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx($,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),Y(T)},children:e.jsx(Jr,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),D(T)},disabled:n==="diagram",children:e.jsx(tt,{className:"w-4 h-4"})}),e.jsx($,{variant:"ghost",size:"sm",onClick:O=>{O.stopPropagation(),z(T.content)},children:e.jsx(Hr,{className:"w-4 h-4"})})]})]})})},T._id))})})]}),d&&e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-lg",children:d.title}),e.jsxs(ae,{children:["Generated on ",V(d.generated_at)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>Y(d),children:[e.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Edit with AI"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>g(d,"docx"),children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Word"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>g(d,"pdf"),children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"PDF"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>z(d.content),children:[e.jsx(Hr,{className:"w-4 h-4 mr-2"}),"Copy"]})]})]})}),e.jsx(N,{children:e.jsx(lx,{document:d,onContentChange:T=>{m({...d,content:T})},onSave:async()=>{try{await xe.updateRoadmapDocument(d._id,{content:d.content}),r({type:"success",title:"Document Saved",message:"Your changes have been saved successfully"}),i()}catch(T){r({type:"error",title:"Save Failed",message:T instanceof Error?T.message:"Failed to save document"})}}})})]})]}),e.jsx(gt,{open:c,onOpenChange:u,children:e.jsxs(yt,{className:"max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsxs(Xt,{children:[e.jsxs(Zt,{className:"flex items-center space-x-2",children:[e.jsx(iu,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"AI Document Editor"})]}),e.jsxs(Ws,{children:["Chat with AI to enhance and improve your ",d==null?void 0:d.document_type.replace("_"," ")]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 h-[70vh]",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:"Document Content"}),e.jsxs($,{size:"sm",onClick:f,disabled:!h.trim(),children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Save Enhanced"]})]}),e.jsx(Hi,{value:h,onChange:T=>p(T.target.value),className:"min-h-[500px] font-mono text-sm",placeholder:"Document content will appear here..."})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx("h4",{className:"font-semibold",children:"AI Assistant"}),e.jsx(Lt,{className:"flex-1 border rounded-lg p-4 min-h-[400px]",children:e.jsxs("div",{className:"space-y-4",children:[b.map(T=>e.jsx("div",{className:`flex ${T.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] rounded-lg px-3 py-2 ${T.role==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:T.content}),e.jsx("span",{className:"text-xs opacity-70",children:new Date(T.timestamp).toLocaleTimeString()})]})},T.id)),A&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-lg px-3 py-2",children:e.jsx(Be,{className:"w-4 h-4 animate-spin"})})}),e.jsx("div",{ref:E})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Hi,{value:F,onChange:T=>L(T.target.value),placeholder:"Ask me to improve, add details, restructure, or enhance any part of your document...",className:"flex-1 resize-none",rows:3,onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),x())}}),e.jsx($,{onClick:x,disabled:!F.trim()||A,size:"sm",children:e.jsx(Ga,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>L("Add more specific KPIs and success metrics"),children:[e.jsx(Mr,{className:"w-3 h-3 mr-1"}),"Add KPIs"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>L("Expand the risk analysis section with more details"),children:[e.jsx(Mr,{className:"w-3 h-3 mr-1"}),"Risk Analysis"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>L("Improve the timeline and make it more specific"),children:[e.jsx(Mr,{className:"w-3 h-3 mr-1"}),"Timeline"]})]})]})]})]})})]})};function dx({project:t}){const{toast:s}=Gt(),{documents:i,setDocuments:r}=ht(),[n,o]=y.useState(!1),a=i.find(m=>m.project_id===t._id&&m.document_type==="business_case"),l=async(m=0)=>{o(!0);try{s({title:"Generating Business Case",description:"Creating comprehensive business justification and ROI analysis..."});const c=await xe.generateBusinessCase(t);if(c.success&&c.content){const u={_id:`bc_${Date.now()}`,_uid:"",_tid:"",project_id:t._id,document_type:"business_case",title:`Business Case: ${t.name}`,content:c.content,generated_at:Date.now(),status:"generated",phase:"justification"};await xe.saveDocument(u);const h=i.filter(p=>!(p.project_id===t._id&&p.document_type==="business_case"));h.push(u),r(h),s({title:"Business Case Generated Successfully",description:"Your comprehensive business case with ROI analysis is ready."})}else throw new Error(c.error||"Failed to generate business case")}catch(c){if(console.error("Business case generation failed:",c),m<2&&c instanceof Error&&(c.message.includes("timeout")||c.message.includes("rate limit"))){s({title:"Retrying Generation",description:`Generation failed, retrying attempt ${m+2}/3...`}),setTimeout(()=>l(m+1),2e3);return}s({title:"Generation Failed",description:c instanceof Error?c.message:"Failed to generate business case. Please try again or check the Test AI page for troubleshooting.",variant:"destructive"})}finally{o(!1)}},d=async m=>{if(a)try{const c=await xe.exportDocument(a,m);if(c.success&&c.blob){const u=URL.createObjectURL(c.blob),h=document.createElement("a");h.href=u,h.download=`${a.title}.${m}`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u),s({title:"Export Successful",description:`Business case exported as ${m.toUpperCase()}`})}else throw new Error(c.error||"Export failed")}catch(c){s({title:"Export Failed",description:c instanceof Error?c.message:"Failed to export document",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5 text-green-600"}),"Business Case"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Justify project investment with comprehensive ROI analysis and stakeholder benefits"})]}),e.jsx(X,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Justification Phase"})]}),a?e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{children:e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-base",children:a.title}),e.jsxs(ae,{children:["Generated on ",new Date(a.generated_at).toLocaleDateString()," •",e.jsxs(X,{variant:"secondary",className:"ml-2",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Ready"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>d("docx"),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Word"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>d("pdf"),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"PDF"]}),e.jsxs($,{size:"sm",onClick:()=>l(0),disabled:n,children:[n?e.jsx(Be,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(ke,{className:"h-4 w-4 mr-1"}),"Regenerate"]})]})]})})}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-base",children:"Business Case Content"})}),e.jsx(N,{children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed",children:a.content})})})]})]}):e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Generate Business Case"]}),e.jsx(ae,{children:"Create a comprehensive business case that includes financial analysis, risk assessment, and stakeholder benefits to secure project approval and funding."})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Et,{className:"h-4 w-4 text-blue-600"}),"Financial Analysis"]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• ROI calculations and projections"}),e.jsx("li",{children:"• Cost-benefit analysis"}),e.jsx("li",{children:"• Break-even and payback period"}),e.jsx("li",{children:"• Investment requirements"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-orange-600"}),"Risk Assessment"]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:"• Market and technical risks"}),e.jsx("li",{children:"• Mitigation strategies"}),e.jsx("li",{children:"• Risk-adjusted benefits"}),e.jsx("li",{children:"• Contingency planning"})]})]})]}),e.jsx(Ye,{}),e.jsx($,{onClick:()=>l(0),disabled:n,className:"w-full",size:"lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Business Case..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"mr-2 h-4 w-4"}),"Generate Business Case"]})})]})})]})]})}function hx({project:t}){const{toast:s}=Gt(),{documents:i,setDocuments:r}=ht(),[n,o]=y.useState(!1),a=i.find(c=>c.project_id===t._id&&c.document_type==="feasibility_study"),l=async(c=0)=>{o(!0);try{s({title:"Generating Feasibility Study",description:"Analyzing technical, financial, market, and operational feasibility..."});const u=await xe.generateFeasibilityStudy(t);if(u.success&&u.content){const h={_id:`fs_${Date.now()}`,_uid:"",_tid:"",project_id:t._id,document_type:"feasibility_study",title:`Feasibility Study: ${t.name}`,content:u.content,generated_at:Date.now(),status:"generated",phase:"justification"};await xe.saveDocument(h);const p=i.filter(b=>!(b.project_id===t._id&&b.document_type==="feasibility_study"));p.push(h),r(p),s({title:"Feasibility Study Generated Successfully",description:"Your comprehensive feasibility analysis is ready."})}else throw new Error(u.error||"Failed to generate feasibility study")}catch(u){if(console.error("Feasibility study generation failed:",u),c<2&&u instanceof Error&&(u.message.includes("timeout")||u.message.includes("rate limit"))){s({title:"Retrying Generation",description:`Generation failed, retrying attempt ${c+2}/3...`}),setTimeout(()=>l(c+1),2e3);return}s({title:"Generation Failed",description:u instanceof Error?u.message:"Failed to generate feasibility study. Please try again or check the Test AI page for troubleshooting.",variant:"destructive"})}finally{o(!1)}},d=async c=>{if(a)try{const u=await xe.exportDocument(a,c);if(u.success&&u.blob){const h=URL.createObjectURL(u.blob),p=document.createElement("a");p.href=h,p.download=`${a.title}.${c}`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(h),s({title:"Export Successful",description:`Feasibility study exported as ${c.toUpperCase()}`})}else throw new Error(u.error||"Export failed")}catch(u){s({title:"Export Failed",description:u instanceof Error?u.message:"Failed to export document",variant:"destructive"})}},m=c=>{switch(c==null?void 0:c.toLowerCase()){case"high":return e.jsx(Ss,{className:"h-4 w-4 text-green-600"});case"medium":return e.jsx(rr,{className:"h-4 w-4 text-yellow-600"});case"low":return e.jsx(_c,{className:"h-4 w-4 text-red-600"});default:return e.jsx(Oi,{className:"h-4 w-4 text-gray-400"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Oi,{className:"h-5 w-5 text-blue-600"}),"Feasibility Study"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Comprehensive analysis of technical, financial, market, and operational feasibility"})]}),e.jsx(X,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Justification Phase"})]}),a?e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{children:e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-base",children:a.title}),e.jsxs(ae,{children:["Generated on ",new Date(a.generated_at).toLocaleDateString()," •",e.jsxs(X,{variant:"secondary",className:"ml-2",children:[e.jsx(Ss,{className:"h-3 w-3 mr-1"}),"Complete"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>d("docx"),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Word"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>d("pdf"),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"PDF"]}),e.jsxs($,{size:"sm",onClick:()=>l(0),disabled:n,children:[n?e.jsx(Be,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(Oi,{className:"h-4 w-4 mr-1"}),"Regenerate"]})]})]})})}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-base",children:"Feasibility Analysis"})}),e.jsx(N,{children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed",children:a.content})})})]})]}):e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Generate Feasibility Study"]}),e.jsx(ae,{children:"Analyze project viability across all critical dimensions to determine if the project is practically achievable and should proceed to development."})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m("high"),e.jsx("h4",{className:"font-medium",children:"Technical Feasibility"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Technology requirements analysis"}),e.jsx("li",{children:"• Development complexity assessment"}),e.jsx("li",{children:"• Infrastructure and integration needs"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m("high"),e.jsx("h4",{className:"font-medium",children:"Financial Feasibility"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Cost analysis and projections"}),e.jsx("li",{children:"• Revenue model viability"}),e.jsx("li",{children:"• ROI and break-even analysis"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m("medium"),e.jsx("h4",{className:"font-medium",children:"Market Feasibility"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Market size and opportunity"}),e.jsx("li",{children:"• Competitive landscape analysis"}),e.jsx("li",{children:"• Customer validation and demand"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[m("high"),e.jsx("h4",{className:"font-medium",children:"Operational Feasibility"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Resource availability assessment"}),e.jsx("li",{children:"• Organizational impact analysis"}),e.jsx("li",{children:"• Process integration requirements"})]})]})]}),e.jsx(Ye,{}),e.jsx($,{onClick:()=>l(0),disabled:n,className:"w-full",size:"lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing Feasibility..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oi,{className:"mr-2 h-4 w-4"}),"Generate Feasibility Study"]})})]})})]})]})}function mx({project:t}){const{toast:s}=Gt(),{documents:i,setDocuments:r}=ht(),[n,o]=y.useState(!1),a=i.find(m=>m.project_id===t._id&&m.document_type==="project_charter"),l=async(m=0)=>{o(!0);try{s({title:"Generating Project Charter",description:"Creating formal project authorization and governance framework..."});const c=await xe.generateProjectCharter(t);if(c.success&&c.content){const u={_id:`pc_${Date.now()}`,_uid:"",_tid:"",project_id:t._id,document_type:"project_charter",title:`Project Charter: ${t.name}`,content:c.content,generated_at:Date.now(),status:"generated",phase:"definition"};await xe.saveDocument(u);const h=i.filter(p=>!(p.project_id===t._id&&p.document_type==="project_charter"));h.push(u),r(h),s({title:"Project Charter Generated Successfully",description:"Your formal project authorization document is ready."})}else throw new Error(c.error||"Failed to generate project charter")}catch(c){if(console.error("Project charter generation failed:",c),m<2&&c instanceof Error&&(c.message.includes("timeout")||c.message.includes("rate limit"))){s({title:"Retrying Generation",description:`Generation failed, retrying attempt ${m+2}/3...`}),setTimeout(()=>l(m+1),2e3);return}s({title:"Generation Failed",description:c instanceof Error?c.message:"Failed to generate project charter. Please try again or check the Test AI page for troubleshooting.",variant:"destructive"})}finally{o(!1)}},d=async m=>{if(a)try{const c=await xe.exportDocument(a,m);if(c.success&&c.blob){const u=URL.createObjectURL(c.blob),h=document.createElement("a");h.href=u,h.download=`${a.title}.${m}`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u),s({title:"Export Successful",description:`Project charter exported as ${m.toUpperCase()}`})}else throw new Error(c.error||"Export failed")}catch(c){s({title:"Export Failed",description:c instanceof Error?c.message:"Failed to export document",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Is,{className:"h-5 w-5 text-purple-600"}),"Project Charter"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Formal project authorization establishing governance, objectives, and project manager authority"})]}),e.jsx(X,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-200",children:"Definition & Authority"})]}),a?e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{children:e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-base",children:a.title}),e.jsxs(ae,{children:["Generated on ",new Date(a.generated_at).toLocaleDateString()," •",e.jsxs(X,{variant:"secondary",className:"ml-2",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Authorized"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>d("docx"),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Word"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>d("pdf"),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"PDF"]}),e.jsxs($,{size:"sm",onClick:()=>l(0),disabled:n,children:[n?e.jsx(Be,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(Is,{className:"h-4 w-4 mr-1"}),"Regenerate"]})]})]})})}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-base",children:"Project Charter Document"})}),e.jsx(N,{children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed",children:a.content})})})]})]}):e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Generate Project Charter"]}),e.jsx(ae,{children:"Create formal project authorization that establishes the project manager's authority, defines success criteria, and provides governance framework for project execution."})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-4 w-4 text-blue-600"}),e.jsx("h4",{className:"font-medium",children:"Project Objectives"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• SMART objectives and success criteria"}),e.jsx("li",{children:"• Key performance indicators (KPIs)"}),e.jsx("li",{children:"• Business value and strategic alignment"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"h-4 w-4 text-green-600"}),e.jsx("h4",{className:"font-medium",children:"Authority & Governance"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Project manager authority levels"}),e.jsx("li",{children:"• Budget and resource authorization"}),e.jsx("li",{children:"• Decision-making framework"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4 text-orange-600"}),e.jsx("h4",{className:"font-medium",children:"Stakeholder Framework"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Stakeholder identification and roles"}),e.jsx("li",{children:"• Communication and engagement plan"}),e.jsx("li",{children:"• Approval and escalation processes"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-purple-600"}),e.jsx("h4",{className:"font-medium",children:"Project Scope & Constraints"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• High-level scope definition"}),e.jsx("li",{children:"• Key assumptions and constraints"}),e.jsx("li",{children:"• Risk identification and response"})]})]})]}),e.jsx(Ye,{}),e.jsx($,{onClick:()=>l(0),disabled:n,className:"w-full",size:"lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Project Charter..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"mr-2 h-4 w-4"}),"Generate Project Charter"]})})]})})]})]})}function ux({project:t}){const{toast:s}=Gt(),{documents:i,setDocuments:r}=ht(),[n,o]=y.useState(!1),a=i.find(m=>m.project_id===t._id&&m.document_type==="scope_statement"),l=async(m=0)=>{o(!0);try{s({title:"Generating Scope Statement",description:"Defining project boundaries, deliverables, and acceptance criteria..."});const c=await xe.generateScopeStatement(t);if(c.success&&c.content){const u={_id:`ss_${Date.now()}`,_uid:"",_tid:"",project_id:t._id,document_type:"scope_statement",title:`Scope Statement: ${t.name}`,content:c.content,generated_at:Date.now(),status:"generated",phase:"definition"};await xe.saveDocument(u);const h=i.filter(p=>!(p.project_id===t._id&&p.document_type==="scope_statement"));h.push(u),r(h),s({title:"Scope Statement Generated Successfully",description:"Your comprehensive project scope definition is ready."})}else throw new Error(c.error||"Failed to generate scope statement")}catch(c){if(console.error("Scope statement generation failed:",c),m<2&&c instanceof Error&&(c.message.includes("timeout")||c.message.includes("rate limit"))){s({title:"Retrying Generation",description:`Generation failed, retrying attempt ${m+2}/3...`}),setTimeout(()=>l(m+1),2e3);return}s({title:"Generation Failed",description:c instanceof Error?c.message:"Failed to generate scope statement. Please try again or check the Test AI page for troubleshooting.",variant:"destructive"})}finally{o(!1)}},d=async m=>{if(a)try{const c=await xe.exportDocument(a,m);if(c.success&&c.blob){const u=URL.createObjectURL(c.blob),h=document.createElement("a");h.href=u,h.download=`${a.title}.${m}`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(u),s({title:"Export Successful",description:`Scope statement exported as ${m.toUpperCase()}`})}else throw new Error(c.error||"Export failed")}catch(c){s({title:"Export Failed",description:c instanceof Error?c.message:"Failed to export document",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(ai,{className:"h-5 w-5 text-indigo-600"}),"Scope Statement"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clear definition of project boundaries, deliverables, and acceptance criteria"})]}),e.jsx(X,{variant:"outline",className:"bg-indigo-50 text-indigo-700 border-indigo-200",children:"Definition & Authority"})]}),a?e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{children:e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-base",children:a.title}),e.jsxs(ae,{children:["Generated on ",new Date(a.generated_at).toLocaleDateString()," •",e.jsxs(X,{variant:"secondary",className:"ml-2",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Defined"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>d("docx"),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Word"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>d("pdf"),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"PDF"]}),e.jsxs($,{size:"sm",onClick:()=>l(0),disabled:n,children:[n?e.jsx(Be,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(ai,{className:"h-4 w-4 mr-1"}),"Regenerate"]})]})]})})}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-base",children:"Project Scope Definition"})}),e.jsx(N,{children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed",children:a.content})})})]})]}):e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Generate Scope Statement"]}),e.jsx(ae,{children:"Define precise project boundaries to prevent scope creep and ensure stakeholder alignment on what will and will not be delivered."})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ju,{className:"h-4 w-4 text-green-600"}),e.jsx("h4",{className:"font-medium",children:"Project Deliverables"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Major deliverables and outputs"}),e.jsx("li",{children:"• Acceptance criteria for each deliverable"}),e.jsx("li",{children:"• Quality standards and requirements"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zu,{className:"h-4 w-4 text-red-600"}),e.jsx("h4",{className:"font-medium",children:"Project Boundaries"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• What's included in scope"}),e.jsx("li",{children:"• What's explicitly excluded"}),e.jsx("li",{children:"• Future phase considerations"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ai,{className:"h-4 w-4 text-blue-600"}),e.jsx("h4",{className:"font-medium",children:"Work Breakdown"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• High-level work breakdown structure"}),e.jsx("li",{children:"• Project phases and milestones"}),e.jsx("li",{children:"• Task dependencies and sequencing"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-purple-600"}),e.jsx("h4",{className:"font-medium",children:"Assumptions & Constraints"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Key project assumptions"}),e.jsx("li",{children:"• Resource and timeline constraints"}),e.jsx("li",{children:"• Change control processes"})]})]})]}),e.jsx(Ye,{}),e.jsx($,{onClick:()=>l(0),disabled:n,className:"w-full",size:"lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"mr-2 h-4 w-4 animate-spin"}),"Defining Project Scope..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ai,{className:"mr-2 h-4 w-4"}),"Generate Scope Statement"]})})]})})]})]})}function xx({project:t}){const{toast:s}=Gt(),{documents:i,setDocuments:r}=ht(),[n,o]=y.useState(!1),[a,l]=y.useState(!1),d=i.find(h=>h.project_id===t._id&&h.document_type==="rfp"),m=async(h=0)=>{o(!0);try{s({title:"Generating RFP Document",description:"Creating comprehensive request for proposal for vendor selection..."});const p=await xe.generateRFP(t);if(p.success&&p.content){const b={_id:`rfp_${Date.now()}`,_uid:"",_tid:"",project_id:t._id,document_type:"rfp",title:`RFP: ${t.name}`,content:p.content,generated_at:Date.now(),status:"generated",phase:"procurement"};await xe.saveDocument(b);const k=i.filter(F=>!(F.project_id===t._id&&F.document_type==="rfp"));k.push(b),r(k),s({title:"RFP Generated Successfully",description:"Your comprehensive request for proposal is ready for distribution."})}else throw new Error(p.error||"Failed to generate RFP")}catch(p){if(console.error("RFP generation failed:",p),h<2&&p instanceof Error&&(p.message.includes("timeout")||p.message.includes("rate limit"))){s({title:"Retrying Generation",description:`Generation failed, retrying attempt ${h+2}/3...`}),setTimeout(()=>m(h+1),2e3);return}s({title:"Generation Failed",description:p instanceof Error?p.message:"Failed to generate RFP. Please try again or check the Test AI page for troubleshooting.",variant:"destructive"})}finally{o(!1)}},c=async()=>{try{s({title:"Generating RFP vs RFQ Comparison",description:"Analyzing optimal procurement approach for your project..."});const h=await xe.generateProcurementComparison(t);if(h.success&&h.content){const p={_id:`rfp_comp_${Date.now()}`,_uid:"",_tid:"",project_id:t._id,document_type:"rfp",title:`Procurement Analysis: RFP vs RFQ for ${t.name}`,content:h.content,generated_at:Date.now(),status:"generated",phase:"procurement"};await xe.saveDocument(p);const b=[...i];b.push(p),r(b),l(!0),s({title:"Procurement Comparison Generated",description:"Your RFP vs RFQ analysis is ready."})}else throw new Error(h.error||"Failed to generate comparison")}catch(h){s({title:"Comparison Generation Failed",description:h instanceof Error?h.message:"Failed to generate comparison",variant:"destructive"})}},u=async h=>{if(d)try{const p=await xe.exportDocument(d,h);if(p.success&&p.blob){const b=URL.createObjectURL(p.blob),k=document.createElement("a");k.href=b,k.download=`${d.title}.${h}`,document.body.appendChild(k),k.click(),document.body.removeChild(k),URL.revokeObjectURL(b),s({title:"Export Successful",description:`RFP document exported as ${h.toUpperCase()}`})}else throw new Error(p.error||"Export failed")}catch(p){s({title:"Export Failed",description:p instanceof Error?p.message:"Failed to export document",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(oi,{className:"h-5 w-5 text-orange-600"}),"Request for Proposal (RFP)"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Comprehensive vendor solicitation document for solution development"})]}),e.jsx(X,{variant:"outline",className:"bg-orange-50 text-orange-700 border-orange-200",children:"Procurement & Planning"})]}),e.jsxs(_,{className:"border-blue-200 bg-blue-50",children:[e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ac,{className:"h-5 w-5 text-blue-600"}),e.jsx(I,{className:"text-base text-blue-900",children:"RFP vs RFQ Decision Guide"})]}),e.jsxs($,{variant:"outline",size:"sm",onClick:c,className:"border-blue-300 text-blue-700 hover:bg-blue-100",children:[e.jsx(Wo,{className:"h-4 w-4 mr-1"}),"Generate Comparison"]})]})}),e.jsx(N,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"RFP (Request for Proposal)"}),e.jsxs("ul",{className:"text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Focus: Solution & Value 💡"}),e.jsx("li",{children:"• When: Open to different solutions"}),e.jsx("li",{children:"• Decision: Technical merit + price"}),e.jsx("li",{children:"• Timeline: 9-13 weeks"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"RFQ (Request for Quotation)"}),e.jsxs("ul",{className:"text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Focus: Price 💲"}),e.jsx("li",{children:"• When: Clear, specific requirements"}),e.jsx("li",{children:"• Decision: Lowest qualified price"}),e.jsx("li",{children:"• Timeline: 4-7 weeks"})]})]})]})})]}),d?e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{children:e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-base",children:d.title}),e.jsxs(ae,{children:["Generated on ",new Date(d.generated_at).toLocaleDateString()," •",e.jsxs(X,{variant:"secondary",className:"ml-2",children:[e.jsx(Fe,{className:"h-3 w-3 mr-1"}),"Ready for Distribution"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>u("docx"),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Word"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>u("pdf"),children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"PDF"]}),e.jsxs($,{size:"sm",onClick:()=>m(0),disabled:n,children:[n?e.jsx(Be,{className:"h-4 w-4 mr-1 animate-spin"}):e.jsx(oi,{className:"h-4 w-4 mr-1"}),"Regenerate"]})]})]})})}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-base",children:"RFP Document Content"})}),e.jsx(N,{children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm leading-relaxed",children:d.content})})})]})]}):e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Generate RFP Document"]}),e.jsx(ae,{children:"Create a comprehensive request for proposal that attracts qualified vendors and facilitates effective vendor selection based on value and capability."})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-green-600"}),e.jsx("h4",{className:"font-medium",children:"Project Requirements"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Detailed functional requirements"}),e.jsx("li",{children:"• Technical specifications"}),e.jsx("li",{children:"• Performance and security standards"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Wo,{className:"h-4 w-4 text-blue-600"}),e.jsx("h4",{className:"font-medium",children:"Evaluation Criteria"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Weighted scoring methodology"}),e.jsx("li",{children:"• Technical approach assessment"}),e.jsx("li",{children:"• Vendor qualifications review"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oi,{className:"h-4 w-4 text-purple-600"}),e.jsx("h4",{className:"font-medium",children:"Vendor Requirements"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Minimum qualifications"}),e.jsx("li",{children:"• Portfolio and reference requirements"}),e.jsx("li",{children:"• Proposal format specifications"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-orange-600"}),e.jsx("h4",{className:"font-medium",children:"Process & Timeline"})]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-6",children:[e.jsx("li",{children:"• Complete procurement timeline"}),e.jsx("li",{children:"• Vendor Q&A and presentation process"}),e.jsx("li",{children:"• Contract terms and conditions"})]})]})]}),e.jsx(Ye,{}),e.jsx($,{onClick:()=>m(0),disabled:n,className:"w-full",size:"lg",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating RFP Document..."]}):e.jsxs(e.Fragment,{children:[e.jsx(oi,{className:"mr-2 h-4 w-4"}),"Generate RFP Document"]})})]})})]})]})}class px{async addItem(s,i){try{return await hs.table.addItem(s,i),{success:!0,data:{...i,_id:`${Date.now()}`,_tid:s}}}catch(r){return console.error(`Error adding item to ${s}:`,r),{success:!1,error:r.message||"Failed to add item"}}}async getItems(s,i={}){try{const r={};i.limit&&(r.limit=i.limit),i.conditions&&(r.query=i.conditions),i.sortOrder&&(r.order=i.sortOrder);const n=await hs.table.getItems(s,r);return{success:!0,data:n.items||n}}catch(r){return console.error(`Error getting items from ${s}:`,r),{success:!1,error:r.message||"Failed to get items"}}}async updateItem(s,i){try{return await hs.table.updateItem(s,i),{success:!0,data:i}}catch(r){return console.error(`Error updating item in ${s}:`,r),{success:!1,error:r.message||"Failed to update item"}}}async deleteItem(s,i){try{return await hs.table.deleteItem(s,i),{success:!0}}catch(r){return console.error(`Error deleting item from ${s}:`,r),{success:!1,error:r.message||"Failed to delete item"}}}}const Jo=new px;class fx{constructor(){Ct(this,"ai");Ct(this,"imageGen");this.ai=new hs.DevvAI,this.imageGen=new hs.DevvImageGen}async generateDiagram(s){try{const i=this.buildConceptPrompt(s),r=await this.ai.chat.completions.create({model:"kimi-k2-0711-preview",messages:[{role:"system",content:`You are an expert technical architect and diagram designer. You create comprehensive diagrams and provide detailed Mermaid code.
            
            Respond in JSON format:
            {
              "mermaidCode": "string - Complete Mermaid diagram code",
              "description": "string - Detailed description of the diagram",
              "visualPrompt": "string - Detailed prompt for AI image generation",
              "suggestions": ["string array - 3-5 improvement suggestions"]
            }`},{role:"user",content:i}],temperature:.3,max_tokens:2e3});let n;try{n=JSON.parse(r.choices[0].message.content||"{}")}catch{n={mermaidCode:this.generateFallbackMermaid(s),description:`${s.diagramType} diagram for ${s.title}`,visualPrompt:this.buildVisualPrompt(s),suggestions:["Consider adding more detail","Review data flow","Add error handling"]}}const o=this.enhanceVisualPrompt(n.visualPrompt,s);return{visualDiagram:(await this.imageGen.textToImage({prompt:o,model:"google/gemini-2.5-flash-image",aspect_ratio:"16:9",output_format:"png"})).images[0],mermaidCode:n.mermaidCode,description:n.description,suggestions:n.suggestions||[]}}catch(i){return console.error("AI diagram generation failed:",i),this.generateFallbackDiagram(s)}}async generateVariations(s,i,r){try{const n=this.buildVariationPrompt(i,r),o=await this.imageGen.textToImage({prompt:n,model:"google/gemini-2.5-flash-image",image_urls:[s],output_format:"png"}),a=await this.ai.chat.completions.create({model:"default",messages:[{role:"system",content:"Describe the diagram variation and provide improvement suggestions."},{role:"user",content:`Describe this ${r.replace("_"," ")} variation of a ${i.diagramType} diagram for ${i.title}.`}],temperature:.5,max_tokens:500});return{visualDiagram:o.images[0],mermaidCode:this.generateFallbackMermaid(i),description:a.choices[0].message.content||`${r} variation of ${i.title}`,suggestions:["Compare with original","Consider hybrid approach","Gather stakeholder feedback"]}}catch(n){throw console.error("Variation generation failed:",n),new Error("Failed to generate diagram variation")}}async analyzeDiagram(s,i){try{const r=await this.ai.chat.completions.create({model:"kimi-k2-0711-preview",messages:[{role:"system",content:`You are a technical diagram expert. Analyze diagrams and provide constructive feedback.
            
            Respond in JSON format:
            {
              "analysis": "string - Detailed analysis of the diagram",
              "improvements": ["string array - Specific improvement suggestions"],
              "alternativeApproaches": ["string array - Alternative design approaches"]
            }`},{role:"user",content:`Analyze this diagram in the context of: ${i}. The diagram should be evaluated for clarity, completeness, and technical accuracy.`}],temperature:.4,max_tokens:1500}),n=JSON.parse(r.choices[0].message.content||"{}");return{analysis:n.analysis||"Technical diagram with good structure",improvements:n.improvements||["Consider adding labels","Review flow logic"],alternativeApproaches:n.alternativeApproaches||["Modular approach","Layered architecture"]}}catch(r){return console.error("Diagram analysis failed:",r),{analysis:"Unable to analyze diagram at this time",improvements:["Manual review recommended"],alternativeApproaches:["Consult with technical team"]}}}buildConceptPrompt(s){return`Create a comprehensive ${s.diagramType} diagram for "${s.title}".

Details:
- Description: ${s.description}
- Complexity: ${s.complexity}
- Style: ${s.style}
${s.projectContext?`- Project Context: ${s.projectContext}`:""}

Requirements:
1. Generate complete Mermaid diagram code that accurately represents the concept
2. Create a detailed visual description suitable for AI image generation
3. Provide specific improvement suggestions
4. Ensure the diagram is technically accurate and follows best practices

Focus on clarity, completeness, and professional presentation.`}buildVisualPrompt(s){const i={professional:"clean, corporate, blue and gray color scheme, professional typography",modern:"sleek, contemporary, vibrant colors, modern flat design",minimal:"clean, simple, monochrome with accent colors, lots of white space",colorful:"bright, engaging colors, visually appealing, distinct color coding",technical:"detailed, engineering-style, precise, with technical annotations",hand_drawn:"sketch-like, hand-drawn appearance, organic lines, creative"},r={flowchart:"process flow diagram with decision points, start/end nodes, and clear directional arrows",architecture:"system architecture diagram showing components, layers, and connections",system_design:"technical system design with modules, interfaces, and data flow",user_journey:"user experience flow showing touchpoints, emotions, and interactions",process_flow:"business process diagram with roles, activities, and decision points",data_flow:"data flow diagram showing data stores, processes, and external entities",organization:"organizational hierarchy chart with roles and reporting structures",timeline:"timeline diagram showing events, milestones, and chronological progression",network:"network topology diagram with devices, connections, and protocols",database_schema:"database entity relationship diagram with tables and relationships"};return`Create a professional ${s.diagramType} diagram: ${r[s.diagramType]}.
    
Title: "${s.title}"
Style: ${i[s.style]}
Complexity: ${s.complexity} level with appropriate detail
    
The diagram should be clear, well-organized, properly labeled, and suitable for business/technical presentation. Include professional styling with clean lines, appropriate icons, and logical layout.`}enhanceVisualPrompt(s,i){return`${s}

Additional requirements:
- High-quality, professional diagram suitable for presentations
- Clear, readable text and labels
- Consistent color scheme and styling
- Proper spacing and alignment
- Vector-style appearance with crisp lines
- Business/technical documentation quality
- ${i.style} aesthetic with appropriate visual hierarchy`}buildVariationPrompt(s,i){return{style_change:`Transform this diagram to ${s.style} style while maintaining the same structure and information`,complexity_change:`Adjust the diagram complexity to ${s.complexity} level - add or simplify details accordingly`,format_change:"Convert this diagram to a different visual format while preserving all information",color_scheme:`Apply a new professional color scheme suitable for ${s.diagramType} diagrams`}[i]||"Improve the visual presentation of this diagram"}generateFallbackMermaid(s){const i={flowchart:`graph TD
    A[Start: ${s.title}] --> B[Process]
    B --> C{Decision}
    C -->|Yes| D[Action 1]
    C -->|No| E[Action 2]
    D --> F[End]
    E --> F`,architecture:`graph TB
    subgraph "Frontend"
        UI[User Interface]
        API[API Layer]
    end
    subgraph "Backend"
        BL[Business Logic]
        DB[(Database)]
    end
    UI --> API
    API --> BL
    BL --> DB`,system_design:`graph LR
    User --> System[${s.title}]
    System --> Process[Processing]
    Process --> Output[Output]`,user_journey:`journey
    title ${s.title}
    section Discovery
        Awareness: 5: User
        Research: 4: User
    section Engagement
        Trial: 3: User
        Adoption: 5: User`,process_flow:`graph TD
    Start([Start Process]) --> Step1[Initial Step]
    Step1 --> Step2[${s.title}]
    Step2 --> End([Complete])`,data_flow:`graph LR
    Input[Data Input] --> Process[${s.title}]
    Process --> Output[Data Output]
    Process --> Store[(Data Store)]`,organization:`graph TD
    CEO[Chief Executive]
    CEO --> CTO[Chief Technology Officer]
    CEO --> CMO[Chief Marketing Officer]
    CTO --> Dev[Development Team]
    CMO --> Marketing[Marketing Team]`,timeline:`gantt
    title ${s.title}
    dateFormat YYYY-MM-DD
    section Phase 1
        Planning: 2024-01-01, 30d
    section Phase 2
        Implementation: after planning, 60d`,network:`graph TB
    Internet((Internet))
    Router[Router]
    Switch[Switch]
    Device1[Device 1]
    Device2[Device 2]
    
    Internet --> Router
    Router --> Switch
    Switch --> Device1
    Switch --> Device2`,database_schema:`erDiagram
    USER {
        int id PK
        string name
        string email
    }
    PROJECT {
        int id PK
        string title
        string description
        int user_id FK
    }
    USER ||--o{ PROJECT : creates`};return i[s.diagramType]||i.flowchart}async generateFallbackDiagram(s){try{const i=this.buildVisualPrompt(s);return{visualDiagram:(await this.imageGen.textToImage({prompt:i,aspect_ratio:"16:9",output_format:"png"})).images[0],mermaidCode:this.generateFallbackMermaid(s),description:`AI-generated ${s.diagramType} diagram for ${s.title}`,suggestions:["Review diagram accuracy","Consider manual refinements","Validate with stakeholders"]}}catch(i){throw console.error("Fallback diagram generation failed:",i),new Error("Unable to generate diagram at this time")}}}const Wn=new fx,xa=[{title:"User Authentication Flow",description:"Complete user authentication system showing login, registration, password reset, and multi-factor authentication flow with error handling and security measures",diagramType:"flowchart",complexity:"moderate",style:"professional",projectContext:"Web Application Security"},{title:"Microservices Architecture",description:"Modern microservices architecture with API gateway, service mesh, database per service, message queues, and monitoring infrastructure",diagramType:"architecture",complexity:"complex",style:"technical",projectContext:"Enterprise System Design"},{title:"E-commerce Customer Journey",description:"Complete customer journey from product discovery through purchase, including touchpoints, pain points, emotions, and optimization opportunities",diagramType:"user_journey",complexity:"moderate",style:"colorful",projectContext:"E-commerce Platform"},{title:"Data Processing Pipeline",description:"Real-time data processing pipeline with data ingestion, transformation, validation, storage, and analytics components with error handling",diagramType:"data_flow",complexity:"complex",style:"modern",projectContext:"Big Data Analytics"},{title:"Product Development Timeline",description:"Comprehensive product development timeline showing research, design, development, testing, and launch phases with dependencies and milestones",diagramType:"timeline",complexity:"moderate",style:"minimal",projectContext:"Product Management"},{title:"Network Infrastructure Design",description:"Enterprise network infrastructure with DMZ, internal networks, security zones, load balancers, firewalls, and monitoring systems",diagramType:"network",complexity:"complex",style:"technical",projectContext:"IT Infrastructure"},{title:"Database Schema Design",description:"Comprehensive database schema for e-commerce platform with user management, product catalog, orders, inventory, and analytics tables",diagramType:"database_schema",complexity:"moderate",style:"professional",projectContext:"E-commerce Database"},{title:"Agile Development Process",description:"Complete agile development process flow including sprint planning, daily standups, development, testing, review, and retrospective phases",diagramType:"process_flow",complexity:"moderate",style:"hand_drawn",projectContext:"Software Development"},{title:"Cloud Migration Strategy",description:"Step-by-step cloud migration strategy showing assessment, planning, migration phases, validation, and optimization with risk mitigation",diagramType:"flowchart",complexity:"complex",style:"modern",projectContext:"Cloud Transformation"},{title:"Organizational Structure",description:"Modern organizational hierarchy with cross-functional teams, reporting relationships, communication channels, and decision-making authority",diagramType:"organization",complexity:"moderate",style:"professional",projectContext:"Human Resources"}],gx=t=>({...t,projectContext:`Demo: ${t.projectContext}`}),yx=()=>{const t=Math.floor(Math.random()*xa.length);return gx(xa[t])},js=t=>t.type==="ai",jx=({project:t,diagrams:s,onDiagramSaved:i})=>{const{addNotification:r}=ht(),{isAuthenticated:n}=Ra(),[o,a]=y.useState(null),[l,d]=y.useState(!1),[m,c]=y.useState(0),[u,h]=y.useState(!1),[p,b]=y.useState([]),[k,F]=y.useState(!0),[L,A]=y.useState(!1),[U,B]=y.useState(null);y.useEffect(()=>{C()},[t._id]);const C=async()=>{if(!n){F(!1);return}try{F(!0);const x=await Jo.getItems("excq0fukr5ds",{conditions:{project_id:t._id}});if(x.success&&x.data){const f=x.data.map(g=>({type:"ai",_id:g._id,project_id:g.project_id,title:g.title,description:g.description,diagram_type:g.diagram_type,complexity:g.complexity,style:g.style,visual_url:g.visual_url,mermaid_code:g.mermaid_code,ai_suggestions:JSON.parse(g.ai_suggestions||"[]"),generation_prompt:g.generation_prompt,ai_model_used:g.ai_model_used,created_at:g.created_at}));b(f)}}catch(x){console.error("Error loading AI diagrams:",x),r({type:"error",title:"Loading Failed",message:"Could not load AI diagrams.",duration:4e3})}finally{F(!1)}},E=async x=>{if(!n)return r({type:"error",title:"Authentication Required",message:"Please log in to save diagrams.",duration:4e3}),null;try{const f=await Jo.addItem("excq0fukr5ds",{project_id:x.project_id,title:x.title,description:x.description,diagram_type:x.diagram_type,complexity:x.complexity,style:x.style,mermaid_code:x.mermaid_code,visual_url:x.visual_url,ai_suggestions:JSON.stringify(x.ai_suggestions),generation_prompt:x.generation_prompt,ai_model_used:x.ai_model_used,created_at:x.created_at});return f.success&&f.data?{...x,type:"ai",_id:f.data._id}:null}catch(f){return console.error("Error saving AI diagram:",f),r({type:"error",title:"Save Failed",message:"Could not save AI diagram to database.",duration:4e3}),null}},[j,M]=y.useState({title:"",description:"",diagramType:"flowchart",complexity:"moderate",style:"professional",projectContext:t.name}),q=async()=>{if(!n){r({type:"error",title:"Authentication Required",message:"Please log in to use AI diagram generation features.",duration:5e3});return}if(!j.title.trim()||!j.description.trim()){r({type:"warning",title:"Missing Information",message:"Please provide both title and description for the diagram.",duration:3e3});return}d(!0),c(0);let x=null,f=null;try{let g=0;x=setInterval(()=>{g+=Math.random()*12+3,g>=90&&(g=90),c(Math.min(g,90))},600),f=setTimeout(()=>{x&&clearInterval(x),d(!1),c(0),r({type:"error",title:"Generation Timeout",message:"AI diagram generation took too long. Please try again.",duration:5e3})},45e3),r({type:"info",title:"AI Generation Started",message:"Creating your diagram with AI assistance...",duration:3e3});const D=await Wn.generateDiagram(j);x&&clearInterval(x),f&&clearTimeout(f),c(95),setTimeout(()=>c(100),300);const T={project_id:t._id,title:j.title,description:D.description,diagram_type:j.diagramType,complexity:j.complexity,style:j.style,visual_url:D.visualDiagram,mermaid_code:D.mermaidCode,ai_suggestions:D.suggestions,generation_prompt:j.description,ai_model_used:"kimi",created_at:new Date().toISOString()},O=await E(T);if(O){b(Z=>[O,...Z]);const w={...O,type:"ai",uniqueId:O._id,timestamp:new Date(O.created_at).getTime()};a(w)}r({type:"success",title:"AI Diagram Generated!",message:"Your visual diagram has been created successfully.",duration:4e3}),M({title:"",description:"",diagramType:"flowchart",complexity:"moderate",style:"professional",projectContext:t.name})}catch(g){console.error("AI diagram generation failed:",g),x&&clearInterval(x),f&&clearTimeout(f);const D=g instanceof Error?g.message:"Unknown error occurred",T=D.includes("unauthorized")||D.includes("authentication");r({type:"error",title:T?"Authentication Required":"Generation Failed",message:T?"Please ensure you are logged in to use AI features.":"Could not generate the diagram. Please check your connection and try again.",duration:5e3})}finally{d(!1),c(0)}},H=async(x,f)=>{try{r({type:"info",title:"Creating Variation",message:"Generating diagram variation...",duration:3e3});const g={title:x.title,description:x.description,diagramType:"flowchart",complexity:j.complexity,style:j.style,projectContext:t.name},D=await Wn.generateVariations(x.visual_url,g,f),T={type:"ai",_id:`ai_var_${Date.now()}`,project_id:t._id,title:`${x.title} (${f.replace("_"," ")})`,description:D.description,diagram_type:x.diagram_type,complexity:x.complexity,style:x.style,visual_url:D.visualDiagram,mermaid_code:D.mermaidCode,ai_suggestions:D.suggestions,generation_prompt:`${f} variation of: ${x.description}`,ai_model_used:"kimi",created_at:new Date().toISOString()};b(w=>[T,...w]);const O={...T,type:"ai",uniqueId:T._id,timestamp:new Date(T.created_at).getTime()};a(O),r({type:"success",title:"Variation Created!",message:"New diagram variation generated successfully.",duration:3e3})}catch(g){console.error("Variation generation failed:",g),r({type:"error",title:"Variation Failed",message:"Could not create diagram variation.",duration:4e3})}},z=async x=>{A(!0);try{const f=await Wn.analyzeDiagram(x.visual_url,`Project: ${t.name}. Diagram: ${x.title}. ${x.description}`);B(f),r({type:"success",title:"Analysis Complete",message:"AI analysis results are ready.",duration:3e3})}catch(f){console.error("Diagram analysis failed:",f),r({type:"error",title:"Analysis Failed",message:"Could not analyze the diagram.",duration:4e3})}finally{A(!1)}},V=async x=>{try{await xe.saveDiagram({project_id:t._id,title:x.title,diagram_type:"flowchart",mermaid_code:x.mermaid_code}),i(),r({type:"success",title:"Diagram Copied!",message:"AI diagram copied to your regular diagrams collection.",duration:3e3})}catch(f){console.error("Failed to copy AI diagram:",f),r({type:"error",title:"Copy Failed",message:"Could not copy the diagram.",duration:4e3})}},te=async(x,f)=>{try{const D=await(await fetch(x)).blob(),T=window.URL.createObjectURL(D),O=document.createElement("a");O.href=T,O.download=`${f.replace(/\s+/g,"_")}.png`,document.body.appendChild(O),O.click(),window.URL.revokeObjectURL(T),document.body.removeChild(O),r({type:"success",title:"Download Complete",message:"Diagram downloaded successfully.",duration:3e3})}catch(g){console.error("Download failed:",g),r({type:"error",title:"Download Failed",message:"Could not download the diagram.",duration:4e3})}},Y=[...p.map(x=>({...x,type:"ai",uniqueId:x._id,timestamp:new Date(x.created_at).getTime()})),...s.map(x=>({...x,type:"mermaid",uniqueId:x._id,timestamp:x.created_at}))].sort((x,f)=>f.timestamp-x.timestamp);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center space-x-2",children:[e.jsx(at,{className:"w-6 h-6 text-primary"}),e.jsx("span",{children:"AI-Powered Diagrams"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Generate visual diagrams using AI assistance"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs($,{variant:"outline",onClick:()=>h(!u),children:[e.jsx(Mr,{className:"w-4 h-4 mr-2"}),"AI Generator"]}),e.jsxs($,{onClick:()=>h(!0),children:[e.jsx(ui,{className:"w-4 h-4 mr-2"}),"Create Diagram"]})]})]}),u&&e.jsxs(_,{className:"border-primary/20 bg-gradient-to-r from-primary/5 to-purple-500/5",children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center space-x-2",children:[e.jsx(at,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"AI Diagram Generator"})]}),e.jsx(ae,{children:"Describe your diagram and let AI create a professional visual representation"})]}),e.jsxs(N,{className:"space-y-4",children:[l&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Generating diagram..."}),e.jsxs("span",{children:[m,"%"]})]}),e.jsx(Ae,{value:m,className:"w-full"})]}),e.jsxs(qt,{defaultValue:"custom",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-2",children:[e.jsx(Ne,{value:"templates",children:"Templates"}),e.jsx(Ne,{value:"custom",children:"Custom"})]}),e.jsxs(Ce,{value:"templates",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-medium",children:"AI Diagram Templates"}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>{const x=yx();M(x)},disabled:l,children:[e.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Random"]})]}),e.jsx(Lt,{className:"h-64",children:e.jsx("div",{className:"grid grid-cols-1 gap-3",children:xa.map((x,f)=>e.jsx(_,{className:"cursor-pointer hover:shadow-sm transition-all hover:border-primary/50",onClick:()=>M(x),children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h4",{className:"font-medium text-sm",children:x.title}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:x.diagramType.replace("_"," ")}),e.jsx(X,{variant:"secondary",className:"text-xs",children:x.complexity})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.description.substring(0,120),"..."]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"outline",className:`text-xs ${x.style==="professional"?"bg-blue-50 text-blue-700 border-blue-200":x.style==="modern"?"bg-purple-50 text-purple-700 border-purple-200":x.style==="minimal"?"bg-gray-50 text-gray-700 border-gray-200":x.style==="colorful"?"bg-pink-50 text-pink-700 border-pink-200":x.style==="technical"?"bg-green-50 text-green-700 border-green-200":"bg-orange-50 text-orange-700 border-orange-200"}`,children:x.style}),e.jsx("span",{className:"text-xs text-muted-foreground",children:x.projectContext})]})]})})},f))})})]}),e.jsx(Ce,{value:"custom",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ve,{htmlFor:"ai-title",children:"Diagram Title"}),e.jsx(ut,{id:"ai-title",placeholder:"e.g., User Authentication Flow",value:j.title,onChange:x=>M(f=>({...f,title:x.target.value})),disabled:l})]}),e.jsxs("div",{children:[e.jsx(ve,{htmlFor:"ai-description",children:"Description"}),e.jsx(Hi,{id:"ai-description",placeholder:"Describe what the diagram should show...",value:j.description,onChange:x=>M(f=>({...f,description:x.target.value})),rows:3,disabled:l})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(ve,{children:"Diagram Type"}),e.jsxs(Re,{value:j.diagramType,onValueChange:x=>M(f=>({...f,diagramType:x})),disabled:l,children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"flowchart",children:"Flowchart"}),e.jsx(se,{value:"architecture",children:"Architecture"}),e.jsx(se,{value:"system_design",children:"System Design"}),e.jsx(se,{value:"user_journey",children:"User Journey"}),e.jsx(se,{value:"process_flow",children:"Process Flow"}),e.jsx(se,{value:"data_flow",children:"Data Flow"}),e.jsx(se,{value:"organization",children:"Organization"}),e.jsx(se,{value:"timeline",children:"Timeline"}),e.jsx(se,{value:"network",children:"Network"}),e.jsx(se,{value:"database_schema",children:"Database Schema"})]})]})]}),e.jsxs("div",{children:[e.jsx(ve,{children:"Complexity"}),e.jsxs(Re,{value:j.complexity,onValueChange:x=>M(f=>({...f,complexity:x})),disabled:l,children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"simple",children:"Simple"}),e.jsx(se,{value:"moderate",children:"Moderate"}),e.jsx(se,{value:"complex",children:"Complex"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(ve,{children:"Visual Style"}),e.jsxs(Re,{value:j.style,onValueChange:x=>M(f=>({...f,style:x})),disabled:l,children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"professional",children:"Professional"}),e.jsx(se,{value:"modern",children:"Modern"}),e.jsx(se,{value:"minimal",children:"Minimal"}),e.jsx(se,{value:"colorful",children:"Colorful"}),e.jsx(se,{value:"technical",children:"Technical"}),e.jsx(se,{value:"hand_drawn",children:"Hand Drawn"})]})]})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsx($,{variant:"outline",onClick:()=>h(!1),disabled:l,children:"Cancel"}),e.jsx($,{onClick:q,disabled:l||!j.title.trim()||!j.description.trim(),className:"bg-gradient-to-r from-primary to-purple-600 hover:from-primary/90 hover:to-purple-600/90",children:l?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Generate Diagram"]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs(I,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ji,{className:"w-5 h-5 text-primary"}),e.jsxs("span",{children:["All Diagrams (",Y.length,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[e.jsxs(X,{variant:"secondary",className:"bg-primary/10 text-primary",children:[p.length," AI"]}),e.jsxs(X,{variant:"outline",children:[s.length," Manual"]})]})]})}),e.jsx(N,{children:k?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Be,{className:"w-8 h-8 text-primary mx-auto mb-4 animate-spin"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Loading Diagrams"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Retrieving your AI-generated diagrams..."})]}):Y.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(at,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No Diagrams Yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Generate your first AI-powered diagram to visualize your concepts."}),e.jsxs($,{onClick:()=>h(!0),size:"sm",children:[e.jsx(at,{className:"w-4 h-4 mr-2"}),"Generate First Diagram"]})]}):e.jsx(Lt,{className:"h-96",children:e.jsx("div",{className:"space-y-3",children:Y.map(x=>e.jsx(_,{className:`cursor-pointer transition-all hover:shadow-sm ${o&&o.uniqueId===x.uniqueId?"ring-2 ring-primary":""}`,onClick:()=>a(x),children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1 flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[x.type==="ai"?e.jsx(at,{className:"w-4 h-4 text-primary"}):e.jsx(du,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("h4",{className:"font-medium text-sm",children:x.title})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:x.type==="ai"?"default":"secondary",className:`text-xs ${x.type==="ai"?"bg-gradient-to-r from-primary to-purple-600":""}`,children:x.type==="ai"?"AI Generated":"Manual"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(x.timestamp).toLocaleDateString()})]})]}),e.jsx("div",{className:"flex items-center space-x-1",children:x.type==="ai"&&e.jsx($,{variant:"ghost",size:"sm",onClick:f=>{f.stopPropagation(),te(x.visual_url,x.title)},children:e.jsx(Me,{className:"w-4 h-4"})})})]})})},x.uniqueId))})})})]}),o?e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center space-x-2",children:[js(o)?e.jsx(at,{className:"w-5 h-5 text-primary"}):e.jsx(Tt,{className:"w-5 h-5 text-muted-foreground"}),e.jsx("span",{children:o.title})]}),e.jsxs(ae,{children:[js(o)?"AI Generated":"Manual"," • "," ",new Date(o.timestamp).toLocaleDateString()]})]}),js(o)&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>z(o),disabled:L,children:[L?e.jsx(Be,{className:"w-4 h-4 mr-2 animate-spin"}):e.jsx(tt,{className:"w-4 h-4 mr-2"}),"Analyze"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>V(o),children:[e.jsx(Hr,{className:"w-4 h-4 mr-2"}),"Copy to Diagrams"]})]})]})}),e.jsx(N,{children:e.jsxs(qt,{defaultValue:"visual",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-3",children:[e.jsx(Ne,{value:"visual",children:"Visual"}),e.jsx(Ne,{value:"code",children:"Code"}),js(o)&&e.jsx(Ne,{value:"insights",children:"Insights"})]}),e.jsx(Ce,{value:"visual",className:"space-y-4",children:e.jsx("div",{className:"border rounded-lg p-4 bg-card",children:js(o)?e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{src:o.visual_url,alt:o.title,className:"w-full rounded-lg shadow-sm",loading:"lazy"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:o.description||"Diagram description"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:()=>H(o,"style_change"),children:[e.jsx(za,{className:"w-4 h-4 mr-2"}),"Style"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>H(o,"complexity_change"),children:[e.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Variation"]})]})]})]}):e.jsx("div",{id:`preview-${o.uniqueId}`,className:"w-full min-h-[300px] flex items-center justify-center",children:e.jsx("p",{className:"text-muted-foreground",children:"Mermaid diagram preview"})})})}),e.jsx(Ce,{value:"code",children:e.jsx(Lt,{className:"h-64 w-full",children:e.jsx("pre",{className:"text-sm font-mono bg-muted p-4 rounded-lg",children:(js(o),o.mermaid_code)})})}),js(o)&&e.jsx(Ce,{value:"insights",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center space-x-2 mb-2",children:[e.jsx(Gs,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{children:"AI Suggestions"})]}),e.jsx("div",{className:"space-y-2",children:js(o)&&o.ai_suggestions.map((x,f)=>e.jsxs("div",{className:"flex items-start space-x-2 text-sm",children:[e.jsx(Ft,{className:"w-3 h-3 text-primary mt-1 flex-shrink-0"}),e.jsx("span",{children:x})]},f))})]}),U&&e.jsxs(e.Fragment,{children:[e.jsx(Ye,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center space-x-2 mb-2",children:[e.jsx(tt,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{children:"AI Analysis"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:U.analysis}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Improvements"}),e.jsx("div",{className:"space-y-1",children:U.improvements.map((x,f)=>e.jsxs("div",{className:"text-sm text-muted-foreground",children:["• ",x]},f))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Alternative Approaches"}),e.jsx("div",{className:"space-y-1",children:U.alternativeApproaches.map((x,f)=>e.jsxs("div",{className:"text-sm text-muted-foreground",children:["• ",x]},f))})]})]})]})]})]})})]})})]}):e.jsx(_,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ji,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Select a Diagram"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose a diagram from the list to view it here."})]})})})]})]})};var vn="Checkbox",[vx,K2]=gc(vn),[bx,Wa]=vx(vn);function wx(t){const{__scopeCheckbox:s,checked:i,children:r,defaultChecked:n,disabled:o,form:a,name:l,onCheckedChange:d,required:m,value:c="on",internal_do_not_use_render:u}=t,[h,p]=yc({prop:i,defaultProp:n??!1,onChange:d,caller:vn}),[b,k]=y.useState(null),[F,L]=y.useState(null),A=y.useRef(!1),U=b?!!a||!!b.closest("form"):!0,B={checked:h,disabled:o,setChecked:p,control:b,setControl:k,name:l,form:a,value:c,hasConsumerStoppedPropagationRef:A,required:m,defaultChecked:Ns(n)?!1:n,isFormControl:U,bubbleInput:F,setBubbleInput:L};return e.jsx(bx,{scope:s,...B,children:_x(u)?u(B):r})}var $c="CheckboxTrigger",Rc=y.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:i,...r},n)=>{const{control:o,value:a,disabled:l,checked:d,required:m,setControl:c,setChecked:u,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:b}=Wa($c,t),k=Es(n,c),F=y.useRef(d);return y.useEffect(()=>{const L=o==null?void 0:o.form;if(L){const A=()=>u(F.current);return L.addEventListener("reset",A),()=>L.removeEventListener("reset",A)}},[o,u]),e.jsx(As.button,{type:"button",role:"checkbox","aria-checked":Ns(d)?"mixed":d,"aria-required":m,"data-state":Gc(d),"data-disabled":l?"":void 0,disabled:l,value:a,...r,ref:k,onKeyDown:ws(s,L=>{L.key==="Enter"&&L.preventDefault()}),onClick:ws(i,L=>{u(A=>Ns(A)?!0:!A),b&&p&&(h.current=L.isPropagationStopped(),h.current||L.stopPropagation())})})});Rc.displayName=$c;var Va=y.forwardRef((t,s)=>{const{__scopeCheckbox:i,name:r,checked:n,defaultChecked:o,required:a,disabled:l,value:d,onCheckedChange:m,form:c,...u}=t;return e.jsx(wx,{__scopeCheckbox:i,checked:n,defaultChecked:o,disabled:l,required:a,onCheckedChange:m,name:r,form:c,value:d,internal_do_not_use_render:({isFormControl:h})=>e.jsxs(e.Fragment,{children:[e.jsx(Rc,{...u,ref:s,__scopeCheckbox:i}),h&&e.jsx(Uc,{__scopeCheckbox:i})]})})});Va.displayName=vn;var Oc="CheckboxIndicator",zc=y.forwardRef((t,s)=>{const{__scopeCheckbox:i,forceMount:r,...n}=t,o=Wa(Oc,i);return e.jsx(Tm,{present:r||Ns(o.checked)||o.checked===!0,children:e.jsx(As.span,{"data-state":Gc(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...t.style}})})});zc.displayName=Oc;var qc="CheckboxBubbleInput",Uc=y.forwardRef(({__scopeCheckbox:t,...s},i)=>{const{control:r,hasConsumerStoppedPropagationRef:n,checked:o,defaultChecked:a,required:l,disabled:d,name:m,value:c,form:u,bubbleInput:h,setBubbleInput:p}=Wa(qc,t),b=Es(i,p),k=Nc(o),F=Cc(r);y.useEffect(()=>{const A=h;if(!A)return;const U=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(U,"checked").set,E=!n.current;if(k!==o&&C){const j=new Event("click",{bubbles:E});A.indeterminate=Ns(o),C.call(A,Ns(o)?!1:o),A.dispatchEvent(j)}},[h,k,o,n]);const L=y.useRef(Ns(o)?!1:o);return e.jsx(As.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??L.current,required:l,disabled:d,name:m,value:c,form:u,...s,tabIndex:-1,ref:b,style:{...s.style,...F,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Uc.displayName=qc;function _x(t){return typeof t=="function"}function Ns(t){return t==="indeterminate"}function Gc(t){return Ns(t)?"indeterminate":t?"checked":"unchecked"}const We=y.forwardRef(({className:t,...s},i)=>e.jsx(Va,{ref:i,className:ca("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(zc,{className:ca("flex items-center justify-center text-current"),children:e.jsx(Gm,{className:"h-4 w-4"})})}));We.displayName=Va.displayName;const Nx=({project:t,documents:s,diagrams:i,onExportComplete:r})=>{const{toast:n}=Gt(),[o,a]=y.useState(!1),[l,d]=y.useState(0),[m,c]=y.useState(!1),[u,h]=y.useState({template:"executive",includeTableOfContents:!0,includeDiagrams:!0,includeWatermark:!1,includeFooter:!0,compressionLevel:"medium",accessLevel:"public",branding:"kairos",pageLayout:"portrait",fontSize:"medium"}),p=y.useRef(null),b=y.useCallback(()=>{const{template:x,branding:f,includeTableOfContents:g}=u;return{coverPage:k(),tableOfContents:g?F():null,executiveSummary:L(),documents:A(),diagrams:u.includeDiagrams?U():null,appendices:B()}},[u,t,s,i]),k=()=>({title:t.name,subtitle:"Strategic Document Portfolio",author:"KAIROS Platform",date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),confidentiality:u.accessLevel.toUpperCase(),version:"1.0"}),F=()=>[{title:"Executive Summary",page:3},{title:"Project Overview",page:4},...s.map((f,g)=>({title:f.document_type.replace("_"," ").toUpperCase(),page:5+g})),...i.length>0?[{title:"Strategic Diagrams",page:5+s.length}]:[],{title:"Appendices",page:6+s.length+(i.length>0?1:0)}],L=()=>({overview:t.problem_statement,keyMetrics:{documentsGenerated:s.length,diagramsCreated:i.length,lastUpdated:new Date().toLocaleDateString()},strategicHighlights:s.slice(0,3).map(x=>({title:x.document_type.replace("_"," "),summary:x.content.substring(0,200)+"..."}))}),A=()=>s.map(x=>({title:x.document_type.replace("_"," ").toUpperCase(),type:x.document_type,content:x.content,generatedAt:x.generated_at,wordCount:x.content.split(" ").length,readingTime:Math.ceil(x.content.split(" ").length/200)})),U=()=>i.length?i.map(x=>({title:x.title,type:x.diagram_type,content:x.mermaid_code,createdAt:x.created_at,description:x.mermaid_code.substring(0,200)+"..."})):[],B=()=>({generationMetadata:{platform:"KAIROS - Intelligent Strategic Document Platform",exportDate:new Date().toISOString(),version:"2.0",totalPages:C()},contactInformation:{platform:"KAIROS",website:"https://kairos.devv.ai",support:"support@kairos.devv.ai"}}),C=()=>{let x=3;return x+=s.length,u.includeDiagrams&&i.length>0&&(x+=Math.ceil(i.length/2)),x+=1,x},E=async()=>{if(!s.length){n({title:"No Documents",description:"Please generate some documents before exporting to PDF.",variant:"destructive"});return}a(!0),d(0);try{const x=b();d(20);const f=new Wm({orientation:u.pageLayout,unit:"pt",format:"a4"});await j(f,x.coverPage),d(40),x.tableOfContents&&(await M(f,x.tableOfContents),d(50)),await q(f,x.executiveSummary),d(60),await H(f,x.documents),d(80),x.diagrams&&(await z(f,x.diagrams),d(90)),await V(f,x.appendices),u.includeWatermark&&await te(f),d(100);const g=`KAIROS_${t.name.replace(/[^a-zA-Z0-9]/g,"_")}_${new Date().toISOString().split("T")[0]}.pdf`;f.save(g),n({title:"Export Successful",description:`PDF exported as ${g}`}),r==null||r(!0,g)}catch(x){console.error("Export failed:",x),n({title:"Export Failed",description:"There was an error exporting your PDF. Please try again.",variant:"destructive"}),r==null||r(!1)}finally{a(!1),d(0)}},j=async(x,f)=>{const g=x.internal.pageSize.getWidth(),D=x.internal.pageSize.getHeight();u.branding==="kairos"&&(x.setFontSize(48),x.setTextColor(34,47,62),x.text("KAIROS",60,120),x.setFontSize(16),x.setTextColor(100,116,139),x.text("Intelligent Strategic Document Platform",60,150)),x.setFontSize(32),x.setTextColor(0,0,0);const T=220;x.text(f.title,60,T,{maxWidth:g-120}),x.setFontSize(18),x.setTextColor(100,116,139),x.text(f.subtitle,60,T+40),x.setFontSize(12),x.text(`Generated: ${f.date}`,60,D-100),u.accessLevel!=="public"&&(x.setFontSize(12),x.setTextColor(239,68,68),x.text(`${f.confidentiality}`,g-150,D-100)),x.addPage()},M=async(x,f)=>{x.setFontSize(24),x.setTextColor(0,0,0),x.text("Table of Contents",60,80);let g=120;x.setFontSize(12),f.forEach((D,T)=>{g>700&&(x.addPage(),g=80),x.setTextColor(0,0,0),x.text(D.title,60,g);const O=x.getTextWidth(D.title),w=x.getTextWidth(D.page.toString()),Z=x.internal.pageSize.getWidth()-120-O-w,ie=Math.floor(Z/5),le=".".repeat(Math.max(0,ie));x.text(le,60+O+5,g),x.text(D.page.toString(),x.internal.pageSize.getWidth()-60-w,g),g+=20}),x.addPage()},q=async(x,f)=>{x.setFontSize(24),x.setTextColor(0,0,0),x.text("Executive Summary",60,80);let g=120;x.setFontSize(16),x.text("Project Overview",60,g),g+=30,x.setFontSize(12);const D=x.splitTextToSize(f.overview,500);x.text(D,60,g),g+=D.length*15+20,x.setFontSize(16),x.text("Key Metrics",60,g),g+=30,x.setFontSize(12),x.text(`Documents Generated: ${f.keyMetrics.documentsGenerated}`,60,g),g+=20,x.text(`Diagrams Created: ${f.keyMetrics.diagramsCreated}`,60,g),g+=20,x.text(`Last Updated: ${f.keyMetrics.lastUpdated}`,60,g),g+=30,f.strategicHighlights.length>0&&(x.setFontSize(16),x.text("Strategic Highlights",60,g),g+=30,x.setFontSize(12),f.strategicHighlights.forEach((T,O)=>{g>700&&(x.addPage(),g=80),x.setFontSize(14),x.text(`${O+1}. ${T.title}`,60,g),g+=20,x.setFontSize(12);const w=x.splitTextToSize(T.summary,500);x.text(w,80,g),g+=w.length*15+15})),x.addPage()},H=async(x,f)=>{for(const g of f){x.setFontSize(24),x.setTextColor(0,0,0),x.text(g.title,60,80);let D=120;x.setFontSize(10),x.setTextColor(100,116,139),x.text(`Type: ${g.type} | Generated: ${g.generatedAt} | Words: ${g.wordCount} | Reading Time: ${g.readingTime} min`,60,D),D+=30,x.setFontSize(12),x.setTextColor(0,0,0);const T=x.splitTextToSize(g.content,500),O=35;for(let w=0;w<T.length;w+=O){w>0&&(x.addPage(),D=80);const Z=T.slice(w,w+O);x.text(Z,60,D)}x.addPage()}},z=async(x,f)=>{x.setFontSize(24),x.setTextColor(0,0,0),x.text("Strategic Diagrams",60,80);let g=120;for(const D of f){if(g>600&&(x.addPage(),g=80),x.setFontSize(18),x.setTextColor(0,0,0),x.text(D.title,60,g),g+=30,x.setFontSize(10),x.setTextColor(100,116,139),x.text(`Type: ${D.type} | Created: ${D.createdAt}`,60,g),g+=20,D.description){x.setFontSize(12),x.setTextColor(0,0,0);const T=x.splitTextToSize(D.description,500);x.text(T,60,g),g+=T.length*15+20}x.setFillColor(248,250,252),x.rect(60,g,480,200,"F"),x.setTextColor(148,163,184),x.text("Diagram would be rendered here",240,g+100,{align:"center"}),g+=220}x.addPage()},V=async(x,f)=>{x.setFontSize(24),x.setTextColor(0,0,0),x.text("Appendices",60,80);let g=120;x.setFontSize(16),x.text("Generation Metadata",60,g),g+=30,x.setFontSize(12),x.text(`Platform: ${f.generationMetadata.platform}`,60,g),g+=20,x.text(`Export Date: ${new Date(f.generationMetadata.exportDate).toLocaleString()}`,60,g),g+=20,x.text(`Version: ${f.generationMetadata.version}`,60,g),g+=20,x.text(`Total Pages: ${f.generationMetadata.totalPages}`,60,g),g+=40,x.setFontSize(16),x.text("Contact Information",60,g),g+=30,x.setFontSize(12),x.text(`Platform: ${f.contactInformation.platform}`,60,g),g+=20,x.text(`Website: ${f.contactInformation.website}`,60,g),g+=20,x.text(`Support: ${f.contactInformation.support}`,60,g)},te=async x=>{const f=x.getNumberOfPages(),g=x.internal.pageSize.getWidth(),D=x.internal.pageSize.getHeight();for(let T=1;T<=f;T++)x.setPage(T),x.setGState(x.GState({opacity:.1})),x.setFontSize(72),x.setTextColor(148,163,184),x.text("KAIROS",g/2,D/2,{angle:45,align:"center"})},Y=()=>{c(!0)};return e.jsxs(_,{className:"card-enterprise",children:[e.jsx(R,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Interactive PDF Export"]})}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs(qt,{defaultValue:"template",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"template",children:"Template"}),e.jsx(Ne,{value:"content",children:"Content"}),e.jsx(Ne,{value:"branding",children:"Branding"}),e.jsx(Ne,{value:"security",children:"Security"})]}),e.jsx(Ce,{value:"template",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Template Style"}),e.jsxs(Re,{value:u.template,onValueChange:x=>h(f=>({...f,template:x})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"executive",children:"Executive Summary"}),e.jsx(se,{value:"detailed",children:"Detailed Report"}),e.jsx(se,{value:"presentation",children:"Presentation Mode"}),e.jsx(se,{value:"custom",children:"Custom Layout"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Page Layout"}),e.jsxs(Re,{value:u.pageLayout,onValueChange:x=>h(f=>({...f,pageLayout:x})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"portrait",children:"Portrait"}),e.jsx(se,{value:"landscape",children:"Landscape"})]})]})]})]})}),e.jsx(Ce,{value:"content",className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"toc",checked:u.includeTableOfContents,onCheckedChange:x=>h(f=>({...f,includeTableOfContents:!!x}))}),e.jsx("label",{htmlFor:"toc",className:"text-sm font-medium",children:"Include Table of Contents"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"diagrams",checked:u.includeDiagrams,onCheckedChange:x=>h(f=>({...f,includeDiagrams:!!x}))}),e.jsx("label",{htmlFor:"diagrams",className:"text-sm font-medium",children:"Include Diagrams"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"footer",checked:u.includeFooter,onCheckedChange:x=>h(f=>({...f,includeFooter:!!x}))}),e.jsx("label",{htmlFor:"footer",className:"text-sm font-medium",children:"Include Page Footers"})]})]})}),e.jsxs(Ce,{value:"branding",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Branding"}),e.jsxs(Re,{value:u.branding,onValueChange:x=>h(f=>({...f,branding:x})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"kairos",children:"KAIROS Branding"}),e.jsx(se,{value:"custom",children:"Custom Branding"}),e.jsx(se,{value:"none",children:"No Branding"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Font Size"}),e.jsxs(Re,{value:u.fontSize,onValueChange:x=>h(f=>({...f,fontSize:x})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"small",children:"Small"}),e.jsx(se,{value:"medium",children:"Medium"}),e.jsx(se,{value:"large",children:"Large"})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"watermark",checked:u.includeWatermark,onCheckedChange:x=>h(f=>({...f,includeWatermark:!!x}))}),e.jsx("label",{htmlFor:"watermark",className:"text-sm font-medium",children:"Add KAIROS Watermark"})]})]}),e.jsxs(Ce,{value:"security",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Access Level"}),e.jsxs(Re,{value:u.accessLevel,onValueChange:x=>h(f=>({...f,accessLevel:x})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"public",children:"Public"}),e.jsx(se,{value:"confidential",children:"Confidential"}),e.jsx(se,{value:"restricted",children:"Restricted"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Compression Level"}),e.jsxs(Re,{value:u.compressionLevel,onValueChange:x=>h(f=>({...f,compressionLevel:x})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"low",children:"Low (Best Quality)"}),e.jsx(se,{value:"medium",children:"Medium"}),e.jsx(se,{value:"high",children:"High (Smallest Size)"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(_,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Documents"}),e.jsx("p",{className:"text-2xl font-bold",children:s.length})]}),e.jsx(ke,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(_,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Diagrams"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(ai,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(_,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Est. Pages"}),e.jsx("p",{className:"text-2xl font-bold",children:C()})]}),e.jsx(tu,{className:"h-8 w-8 text-primary"})]})})})]}),o&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Generating PDF..."}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[l,"%"]})]}),e.jsx(Ae,{value:l,className:"w-full"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs($,{variant:"outline",className:"flex-1",onClick:Y,disabled:!s.length,children:[e.jsx(Tt,{className:"h-4 w-4 mr-2"}),"Preview PDF"]}),e.jsxs($,{onClick:E,disabled:o||!s.length,className:"btn-enterprise flex-1",children:[o?e.jsx(Ge,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Me,{className:"h-4 w-4 mr-2"}),o?"Generating...":"Export PDF"]})]}),e.jsx(gt,{open:m,onOpenChange:c,children:e.jsxs(yt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(Xt,{children:e.jsx(Zt,{children:"PDF Preview"})}),e.jsx("div",{ref:p,className:"space-y-6 p-6 bg-white text-black",children:e.jsxs("div",{className:"text-center py-20 text-muted-foreground",children:[e.jsx(Tc,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"PDF preview will be displayed here"}),e.jsx("p",{className:"text-sm",children:"This would show the actual PDF layout with all content and diagrams"})]})})]})})]})]})};var Wc=["PageUp","PageDown"],Vc=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Hc={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ni="Slider",[pa,Cx,Sx]=Am(Ni),[Yc,Q2]=gc(Ni,[Sx]),[kx,bn]=Yc(Ni),Jc=y.forwardRef((t,s)=>{const{name:i,min:r=0,max:n=100,step:o=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:d=0,defaultValue:m=[r],value:c,onValueChange:u=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:b,...k}=t,F=y.useRef(new Set),L=y.useRef(0),U=a==="horizontal"?Tx:Ax,[B=[],C]=yc({prop:c,defaultProp:m,onChange:z=>{var te;(te=[...F.current][L.current])==null||te.focus(),u(z)}}),E=y.useRef(B);function j(z){const V=Mx(B,z);H(z,V)}function M(z){H(z,L.current)}function q(){const z=E.current[L.current];B[L.current]!==z&&h(B)}function H(z,V,{commit:te}={commit:!1}){const Y=$x(o),x=Rx(Math.round((z-r)/o)*o+r,Y),f=Sc(x,[r,n]);C((g=[])=>{const D=Dx(g,f,V);if(Ix(D,d*o)){L.current=D.indexOf(f);const T=String(D)!==String(g);return T&&te&&h(D),T?D:g}else return g})}return e.jsx(kx,{scope:t.__scopeSlider,name:i,disabled:l,min:r,max:n,valueIndexToChangeRef:L,thumbs:F.current,values:B,orientation:a,form:b,children:e.jsx(pa.Provider,{scope:t.__scopeSlider,children:e.jsx(pa.Slot,{scope:t.__scopeSlider,children:e.jsx(U,{"aria-disabled":l,"data-disabled":l?"":void 0,...k,ref:s,onPointerDown:ws(k.onPointerDown,()=>{l||(E.current=B)}),min:r,max:n,inverted:p,onSlideStart:l?void 0:j,onSlideMove:l?void 0:M,onSlideEnd:l?void 0:q,onHomeKeyDown:()=>!l&&H(r,0,{commit:!0}),onEndKeyDown:()=>!l&&H(n,B.length-1,{commit:!0}),onStepKeyDown:({event:z,direction:V})=>{if(!l){const x=Wc.includes(z.key)||z.shiftKey&&Vc.includes(z.key)?10:1,f=L.current,g=B[f],D=o*x*V;H(g+D,f,{commit:!0})}}})})})})});Jc.displayName=Ni;var[Kc,Qc]=Yc(Ni,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Tx=y.forwardRef((t,s)=>{const{min:i,max:r,dir:n,inverted:o,onSlideStart:a,onSlideMove:l,onSlideEnd:d,onStepKeyDown:m,...c}=t,[u,h]=y.useState(null),p=Es(s,U=>h(U)),b=y.useRef(void 0),k=Vm(n),F=k==="ltr",L=F&&!o||!F&&o;function A(U){const B=b.current||u.getBoundingClientRect(),C=[0,B.width],j=Ha(C,L?[i,r]:[r,i]);return b.current=B,j(U-B.left)}return e.jsx(Kc,{scope:t.__scopeSlider,startEdge:L?"left":"right",endEdge:L?"right":"left",direction:L?1:-1,size:"width",children:e.jsx(Xc,{dir:k,"data-orientation":"horizontal",...c,ref:p,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:U=>{const B=A(U.clientX);a==null||a(B)},onSlideMove:U=>{const B=A(U.clientX);l==null||l(B)},onSlideEnd:()=>{b.current=void 0,d==null||d()},onStepKeyDown:U=>{const C=Hc[L?"from-left":"from-right"].includes(U.key);m==null||m({event:U,direction:C?-1:1})}})})}),Ax=y.forwardRef((t,s)=>{const{min:i,max:r,inverted:n,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:d,...m}=t,c=y.useRef(null),u=Es(s,c),h=y.useRef(void 0),p=!n;function b(k){const F=h.current||c.current.getBoundingClientRect(),L=[0,F.height],U=Ha(L,p?[r,i]:[i,r]);return h.current=F,U(k-F.top)}return e.jsx(Kc,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:e.jsx(Xc,{"data-orientation":"vertical",...m,ref:u,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:k=>{const F=b(k.clientY);o==null||o(F)},onSlideMove:k=>{const F=b(k.clientY);a==null||a(F)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:k=>{const L=Hc[p?"from-bottom":"from-top"].includes(k.key);d==null||d({event:k,direction:L?-1:1})}})})}),Xc=y.forwardRef((t,s)=>{const{__scopeSlider:i,onSlideStart:r,onSlideMove:n,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:d,...m}=t,c=bn(Ni,i);return e.jsx(As.span,{...m,ref:s,onKeyDown:ws(t.onKeyDown,u=>{u.key==="Home"?(a(u),u.preventDefault()):u.key==="End"?(l(u),u.preventDefault()):Wc.concat(Vc).includes(u.key)&&(d(u),u.preventDefault())}),onPointerDown:ws(t.onPointerDown,u=>{const h=u.target;h.setPointerCapture(u.pointerId),u.preventDefault(),c.thumbs.has(h)?h.focus():r(u)}),onPointerMove:ws(t.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&n(u)}),onPointerUp:ws(t.onPointerUp,u=>{const h=u.target;h.hasPointerCapture(u.pointerId)&&(h.releasePointerCapture(u.pointerId),o(u))})})}),Zc="SliderTrack",ed=y.forwardRef((t,s)=>{const{__scopeSlider:i,...r}=t,n=bn(Zc,i);return e.jsx(As.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...r,ref:s})});ed.displayName=Zc;var fa="SliderRange",td=y.forwardRef((t,s)=>{const{__scopeSlider:i,...r}=t,n=bn(fa,i),o=Qc(fa,i),a=y.useRef(null),l=Es(s,a),d=n.values.length,m=n.values.map(h=>rd(h,n.min,n.max)),c=d>1?Math.min(...m):0,u=100-Math.max(...m);return e.jsx(As.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...r,ref:l,style:{...t.style,[o.startEdge]:c+"%",[o.endEdge]:u+"%"}})});td.displayName=fa;var ga="SliderThumb",sd=y.forwardRef((t,s)=>{const i=Cx(t.__scopeSlider),[r,n]=y.useState(null),o=Es(s,l=>n(l)),a=y.useMemo(()=>r?i().findIndex(l=>l.ref.current===r):-1,[i,r]);return e.jsx(Ex,{...t,ref:o,index:a})}),Ex=y.forwardRef((t,s)=>{const{__scopeSlider:i,index:r,name:n,...o}=t,a=bn(ga,i),l=Qc(ga,i),[d,m]=y.useState(null),c=Es(s,A=>m(A)),u=d?a.form||!!d.closest("form"):!0,h=Cc(d),p=a.values[r],b=p===void 0?0:rd(p,a.min,a.max),k=Lx(r,a.values.length),F=h==null?void 0:h[l.size],L=F?Px(F,b,l.direction):0;return y.useEffect(()=>{if(d)return a.thumbs.add(d),()=>{a.thumbs.delete(d)}},[d,a.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${b}% + ${L}px)`},children:[e.jsx(pa.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(As.span,{role:"slider","aria-label":t["aria-label"]||k,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:c,style:p===void 0?{display:"none"}:t.style,onFocus:ws(t.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),u&&e.jsx(id,{name:n??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:p},r)]})});sd.displayName=ga;var Fx="RadioBubbleInput",id=y.forwardRef(({__scopeSlider:t,value:s,...i},r)=>{const n=y.useRef(null),o=Es(n,r),a=Nc(s);return y.useEffect(()=>{const l=n.current;if(!l)return;const d=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==s&&c){const u=new Event("input",{bubbles:!0});c.call(l,s),l.dispatchEvent(u)}},[a,s]),e.jsx(As.input,{style:{display:"none"},...i,ref:o,defaultValue:s})});id.displayName=Fx;function Dx(t=[],s,i){const r=[...t];return r[i]=s,r.sort((n,o)=>n-o)}function rd(t,s,i){const o=100/(i-s)*(t-s);return Sc(o,[0,100])}function Lx(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function Mx(t,s){if(t.length===1)return 0;const i=t.map(n=>Math.abs(n-s)),r=Math.min(...i);return i.indexOf(r)}function Px(t,s,i){const r=t/2,o=Ha([0,50],[0,r]);return(r-o(s)*i)*i}function Bx(t){return t.slice(0,-1).map((s,i)=>t[i+1]-s)}function Ix(t,s){if(s>0){const i=Bx(t);return Math.min(...i)>=s}return!0}function Ha(t,s){return i=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(i-t[0])}}function $x(t){return(String(t).split(".")[1]||"").length}function Rx(t,s){const i=Math.pow(10,s);return Math.round(t*i)/i}var nd=Jc,Ox=ed,zx=td,qx=sd;const wn=y.forwardRef(({className:t,...s},i)=>e.jsxs(nd,{ref:i,className:ca("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(Ox,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(zx,{className:"absolute h-full bg-primary"})}),e.jsx(qx,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));wn.displayName=nd.displayName;const Ux=({project:t,documents:s,diagrams:i,isOpen:r,onClose:n})=>{var Ee,G,oe,de;Gt();const[o,a]=y.useState(0),[l,d]=y.useState(!1),[m,c]=y.useState(!1),[u,h]=y.useState(!0),[p,b]=y.useState([5]),[k,F]=y.useState(!1),[L,A]=y.useState("executive"),U=y.useRef(null),B=y.useRef(null),C=()=>{const P=[];return P.push({id:"cover",type:"cover",title:t.name,content:{title:t.name,subtitle:"Strategic Document Portfolio",organization:"KAIROS Platform",date:new Date().toLocaleDateString(),presenter:"Strategic Planning Team"},duration:p[0],animation:"fade"}),P.push({id:"overview",type:"overview",title:"Project Overview",content:{description:t.problem_statement,keyMetrics:{documentsCreated:s.length,diagramsGenerated:i.length,lastUpdated:new Date(Math.max(...s.map(J=>new Date(J.generated_at).getTime()))).toLocaleDateString()},objectives:j()},duration:p[0]+2,animation:"slide"}),P.push({id:"metrics",type:"metrics",title:"Strategic Metrics",content:{projectProgress:M(),documentTypes:q(),timelineMetrics:H(),strategicKPIs:z()},duration:p[0]+3,animation:"zoom"}),L==="executive"?s.slice(0,3).forEach((re,Te)=>{P.push({id:`doc-${re._id}`,type:"document",title:re.title,content:{document:re,summary:V(re),keyPoints:te(re),recommendations:Y(re)},duration:p[0]+1,animation:"slide"})}):s.forEach((J,re)=>{P.push({id:`doc-${J._id}`,type:"document",title:J.title,content:{document:J,summary:V(J),keyPoints:te(J),recommendations:Y(J)},duration:p[0],animation:"slide"})}),i.length>0&&i.forEach((J,re)=>{P.push({id:`diagram-${J._id}`,type:"diagram",title:J.title,content:{diagram:J,analysis:x(J),insights:f()},duration:p[0]+2,animation:"zoom"})}),P.push({id:"summary",type:"summary",title:"Strategic Summary & Next Steps",content:{keyAchievements:g(),nextSteps:D(),recommendations:T(),callToAction:O()},duration:p[0]+3,animation:"fade"}),P},[E]=y.useState(C()),j=()=>{const P=[];return t.problem_statement.toLowerCase().includes("improve")&&P.push("Process Improvement"),t.problem_statement.toLowerCase().includes("digital")&&P.push("Digital Transformation"),(t.problem_statement.toLowerCase().includes("cost")||t.problem_statement.toLowerCase().includes("efficiency"))&&P.push("Cost Optimization"),(t.problem_statement.toLowerCase().includes("customer")||t.problem_statement.toLowerCase().includes("user"))&&P.push("Customer Experience"),P.length>0?P:["Strategic Initiative","Business Enhancement"]},M=()=>{const J=Math.min(s.length/10*100,100);return{completion:Math.round(J),status:J>=80?"On Track":J>=60?"In Progress":"Getting Started",documentsComplete:s.length,totalDocuments:10}},q=()=>{const P=s.reduce((J,re)=>(J[re.document_type]=(J[re.document_type]||0)+1,J),{});return Object.entries(P).map(([J,re])=>({type:J.charAt(0).toUpperCase()+J.slice(1),count:re,percentage:Math.round(re/s.length*100)}))},H=()=>{if(s.length===0)return{avgTime:0,totalTime:0};const P=s.map(it=>new Date(it.generated_at).getTime()),J=Math.min(...P),re=Math.max(...P),Te=Math.ceil((re-J)/(1e3*60*60*24));return{totalTime:Te||1,avgTime:Math.ceil(Te/s.length)||1,velocity:Math.round(s.length/Math.max(Te/7,1))}},z=()=>[{metric:"Document Quality",value:"92%",trend:"up"},{metric:"Stakeholder Alignment",value:"87%",trend:"up"},{metric:"Timeline Adherence",value:"94%",trend:"stable"},{metric:"Strategic Clarity",value:"89%",trend:"up"}],V=P=>{const J=P.content.split(" ");return J.slice(0,50).join(" ")+(J.length>50?"...":"")},te=P=>{const re=P.content.split(`
`).filter(Te=>Te.trim().startsWith("•")||Te.trim().startsWith("*")||Te.trim().startsWith("-")||/^\d+\./.test(Te.trim())).slice(0,4);return re.length>0?re.map(Te=>Te.replace(/^[•*-]|\d+\./,"").trim()):["Strategic initiative outlined","Key stakeholders identified","Timeline established","Success metrics defined"]},Y=P=>{if(P.content.toLowerCase().includes("recommend")){const re=P.content.split(/[.!?]/).filter(Te=>Te.toLowerCase().includes("recommend")).slice(0,2);return re.length>0?re:["Proceed with implementation","Monitor progress regularly"]}return["Proceed with next phase","Review quarterly"]},x=P=>({complexity:P.mermaid_code.split(`
`).length>10?"Complex":"Simple",elements:(P.mermaid_code.match(/-->/g)||[]).length,type:P.diagram_type}),f=P=>["Process flow clearly defined","Dependencies identified","Critical path established"],g=()=>[`${s.length} strategic documents generated`,`${i.length} process diagrams created`,"Comprehensive project framework established","Stakeholder alignment achieved"],D=()=>["Finalize implementation timeline","Secure stakeholder approvals","Begin execution phase","Establish monitoring framework"],T=()=>["Approve project charter and budget allocation","Establish project governance structure","Initiate vendor selection process","Set up regular stakeholder reviews"],O=()=>({primary:"Approve Project Charter",secondary:"Schedule Implementation Kickoff",timeline:"Target Start: Next Quarter"}),w=()=>{a(P=>(P+1)%E.length)},Z=()=>{a(P=>P===0?E.length-1:P-1)},ie=()=>{d(!l)},le=()=>{!m&&U.current?(U.current.requestFullscreen(),c(!0)):document.fullscreenElement&&(document.exitFullscreen(),c(!1))};y.useEffect(()=>{var P;return l&&u?B.current=setTimeout(()=>{w()},((P=E[o])==null?void 0:P.duration)*1e3||5e3):B.current&&clearTimeout(B.current),()=>{B.current&&clearTimeout(B.current)}},[l,u,o,E]),y.useEffect(()=>{const P=J=>{if(r)switch(J.key){case"ArrowRight":case" ":J.preventDefault(),w();break;case"ArrowLeft":J.preventDefault(),Z();break;case"Escape":n();break;case"f":case"F":le();break}};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[r]);const pe=P=>{switch(P.type){case"cover":return e.jsx("div",{className:"h-full flex flex-col items-center justify-center text-center bg-gradient-to-br from-primary/20 to-primary/5 rounded-lg",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-6xl font-bold text-primary",children:P.content.title}),e.jsx("p",{className:"text-2xl text-muted-foreground",children:P.content.subtitle})]}),e.jsxs("div",{className:"space-y-2 text-lg",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Organization:"})," ",P.content.organization]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",P.content.date]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Presenter:"})," ",P.content.presenter]})]})]})});case"overview":return e.jsxs("div",{className:"h-full p-8 space-y-8",children:[e.jsx("h2",{className:"text-4xl font-bold mb-8",children:"Project Overview"}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 h-full",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Description"}),e.jsx("p",{className:"text-lg leading-relaxed",children:P.content.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Strategic Objectives"}),e.jsx("div",{className:"space-y-2",children:P.content.objectives.map((J,re)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-lg",children:J})]},re))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Key Metrics"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(_,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-primary",children:P.content.keyMetrics.documentsCreated}),e.jsx("p",{className:"text-muted-foreground",children:"Documents Created"})]})})}),e.jsx(_,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-primary",children:P.content.keyMetrics.diagramsGenerated}),e.jsx("p",{className:"text-muted-foreground",children:"Diagrams Generated"})]})})}),e.jsx(_,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold",children:P.content.keyMetrics.lastUpdated}),e.jsx("p",{className:"text-muted-foreground",children:"Last Updated"})]})})})]})]})]})]});case"metrics":return e.jsxs("div",{className:"h-full p-8 space-y-8",children:[e.jsx("h2",{className:"text-4xl font-bold mb-8",children:"Strategic Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 h-full",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Project Progress"}),e.jsx(_,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg",children:"Completion"}),e.jsx(X,{variant:P.content.projectProgress.completion>=80?"default":"secondary",children:P.content.projectProgress.status})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-4xl font-bold text-primary",children:[P.content.projectProgress.completion,"%"]})}),e.jsxs("p",{className:"text-center text-muted-foreground",children:[P.content.projectProgress.documentsComplete," of ",P.content.projectProgress.totalDocuments," documents"]})]})})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Timeline Metrics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(_,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:P.content.timelineMetrics.totalTime}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Days"})]})})}),e.jsx(_,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:P.content.timelineMetrics.avgTime}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg/Doc"})]})})}),e.jsx(_,{children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold",children:P.content.timelineMetrics.velocity}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Docs/Week"})]})})})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Document Distribution"}),e.jsx("div",{className:"space-y-3",children:P.content.documentTypes.map((J,re)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"font-medium",children:J.type}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl font-bold",children:J.count}),e.jsxs(X,{variant:"outline",children:[J.percentage,"%"]})]})]},re))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Strategic KPIs"}),e.jsx("div",{className:"space-y-3",children:P.content.strategicKPIs.map((J,re)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"font-medium",children:J.metric}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl font-bold",children:J.value}),e.jsx(Et,{className:`h-4 w-4 ${J.trend==="up"?"text-green-500":"text-gray-500"}`})]})]},re))})]})]})]})]});case"document":return e.jsxs("div",{className:"h-full p-8 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-4xl font-bold",children:P.content.document.title}),e.jsx(X,{variant:"outline",className:"text-lg px-4 py-2",children:P.content.document.type})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 h-full",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Executive Summary"}),e.jsx("p",{className:"text-lg leading-relaxed",children:P.content.summary})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Key Recommendations"}),e.jsx("div",{className:"space-y-2",children:P.content.recommendations.map((J,re)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Fe,{className:"h-5 w-5 text-primary mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-lg",children:J})]},re))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Key Points"}),e.jsx("div",{className:"space-y-3",children:P.content.keyPoints.map((J,re)=>e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsx("p",{className:"text-lg",children:J})},re))})]}),e.jsx("div",{className:"flex items-center justify-center p-8 bg-primary/5 rounded-lg",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(Ge,{className:"h-12 w-12 text-primary mx-auto"}),e.jsx("p",{className:"text-lg font-semibold",children:"Generated"}),e.jsx("p",{className:"text-muted-foreground",children:new Date(P.content.document.generated_at).toLocaleDateString()})]})})]})]})]});case"summary":return e.jsxs("div",{className:"h-full p-8 space-y-8",children:[e.jsx("h2",{className:"text-4xl font-bold mb-8 text-center",children:"Strategic Summary & Next Steps"}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 h-full",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Key Achievements"}),e.jsx("div",{className:"space-y-3",children:P.content.keyAchievements.map((J,re)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(Fe,{className:"h-6 w-6 text-green-500"}),e.jsx("span",{className:"text-lg",children:J})]},re))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Recommendations"}),e.jsx("div",{className:"space-y-2",children:P.content.recommendations.map((J,re)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ct,{className:"h-5 w-5 text-primary mt-1"}),e.jsx("span",{className:"text-lg",children:J})]},re))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-semibold mb-4",children:"Next Steps"}),e.jsx("div",{className:"space-y-3",children:P.content.nextSteps.map((J,re)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold",children:re+1}),e.jsx("span",{className:"text-lg",children:J})]},re))})]}),e.jsx(_,{className:"bg-gradient-to-r from-primary to-primary/80 text-white",children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Call to Action"}),e.jsx("p",{className:"text-xl",children:P.content.callToAction.primary}),e.jsx("p",{className:"text-lg opacity-90",children:P.content.callToAction.secondary}),e.jsx(X,{variant:"secondary",className:"text-lg px-4 py-2",children:P.content.callToAction.timeline})]})})})]})]})]});default:return e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-2xl text-muted-foreground",children:"Slide content not available"})})}};return r?e.jsx(gt,{open:r,onOpenChange:n,children:e.jsx(yt,{className:"max-w-[95vw] max-h-[95vh] p-0",children:e.jsxs("div",{ref:U,className:"relative h-[90vh] bg-white",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-white/95 backdrop-blur-sm border-b p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(X,{variant:"outline",children:[o+1," / ",E.length]}),e.jsx("h3",{className:"font-semibold",children:(Ee=E[o])==null?void 0:Ee.title})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Re,{value:L,onValueChange:P=>A(P),children:[e.jsx(Oe,{className:"w-32",children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"executive",children:"Executive"}),e.jsx(se,{value:"detailed",children:"Detailed"}),e.jsx(se,{value:"interactive",children:"Interactive"})]})]}),e.jsx($,{variant:"outline",size:"sm",onClick:le,children:m?e.jsx(Dc,{className:"h-4 w-4"}):e.jsx(Fc,{className:"h-4 w-4"})}),e.jsx($,{variant:"outline",size:"sm",onClick:n,children:"×"})]})]})}),e.jsx("div",{className:"pt-20 pb-16 h-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${((G=E[o])==null?void 0:G.animation)==="fade"?"animate-in fade-in":((oe=E[o])==null?void 0:oe.animation)==="slide"?"animate-in slide-in-from-right":((de=E[o])==null?void 0:de.animation)==="zoom"?"animate-in zoom-in":""}`,children:E[o]&&pe(E[o])})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-10 bg-white/95 backdrop-blur-sm border-t p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx($,{variant:"outline",size:"sm",onClick:Z,children:e.jsx(Bc,{className:"h-4 w-4"})}),e.jsx($,{variant:"outline",size:"sm",onClick:ie,children:l?e.jsx(Pc,{className:"h-4 w-4"}):e.jsx(qa,{className:"h-4 w-4"})}),e.jsx($,{variant:"outline",size:"sm",onClick:w,children:e.jsx(Ic,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{checked:u,onCheckedChange:h}),e.jsx("span",{className:"text-sm",children:"Auto-advance"})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsxs("span",{children:[p[0],"s per slide"]}),e.jsx(wn,{value:p,onValueChange:b,max:15,min:3,step:1,className:"w-20"})]}),e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx(zs,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})})]})})}):null};function Gx(t){for(var s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];var r=Array.from(typeof t=="string"?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var n=r.reduce(function(l,d){var m=d.match(/\n([\t ]+|(?!\s).)/g);return m?l.concat(m.map(function(c){var u,h;return(h=(u=c.match(/[\t ]/g))===null||u===void 0?void 0:u.length)!==null&&h!==void 0?h:0})):l},[]);if(n.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,n)+"}","g");r=r.map(function(l){return l.replace(o,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return s.forEach(function(l,d){var m=a.match(/(?:^|\n)( *)$/),c=m?m[1]:"",u=l;typeof l=="string"&&l.includes(`
`)&&(u=String(l).split(`
`).map(function(h,p){return p===0?h:""+c+h}).join(`
`)),a+=u+r[d+1]}),a}var Pr={exports:{}},Wx=Pr.exports,Ko;function Vx(){return Ko||(Ko=1,(function(t,s){(function(i,r){t.exports=r()})(Wx,(function(){var i=1e3,r=6e4,n=36e5,o="millisecond",a="second",l="minute",d="hour",m="day",c="week",u="month",h="quarter",p="year",b="date",k="Invalid Date",F=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,L=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var x=["th","st","nd","rd"],f=Y%100;return"["+Y+(x[(f-20)%10]||x[f]||x[0])+"]"}},U=function(Y,x,f){var g=String(Y);return!g||g.length>=x?Y:""+Array(x+1-g.length).join(f)+Y},B={s:U,z:function(Y){var x=-Y.utcOffset(),f=Math.abs(x),g=Math.floor(f/60),D=f%60;return(x<=0?"+":"-")+U(g,2,"0")+":"+U(D,2,"0")},m:function Y(x,f){if(x.date()<f.date())return-Y(f,x);var g=12*(f.year()-x.year())+(f.month()-x.month()),D=x.clone().add(g,u),T=f-D<0,O=x.clone().add(g+(T?-1:1),u);return+(-(g+(f-D)/(T?D-O:O-D))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:u,y:p,w:c,d:m,D:b,h:d,m:l,s:a,ms:o,Q:h}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},C="en",E={};E[C]=A;var j="$isDayjsObject",M=function(Y){return Y instanceof V||!(!Y||!Y[j])},q=function Y(x,f,g){var D;if(!x)return C;if(typeof x=="string"){var T=x.toLowerCase();E[T]&&(D=T),f&&(E[T]=f,D=T);var O=x.split("-");if(!D&&O.length>1)return Y(O[0])}else{var w=x.name;E[w]=x,D=w}return!g&&D&&(C=D),D||!g&&C},H=function(Y,x){if(M(Y))return Y.clone();var f=typeof x=="object"?x:{};return f.date=Y,f.args=arguments,new V(f)},z=B;z.l=q,z.i=M,z.w=function(Y,x){return H(Y,{locale:x.$L,utc:x.$u,x:x.$x,$offset:x.$offset})};var V=(function(){function Y(f){this.$L=q(f.locale,null,!0),this.parse(f),this.$x=this.$x||f.x||{},this[j]=!0}var x=Y.prototype;return x.parse=function(f){this.$d=(function(g){var D=g.date,T=g.utc;if(D===null)return new Date(NaN);if(z.u(D))return new Date;if(D instanceof Date)return new Date(D);if(typeof D=="string"&&!/Z$/i.test(D)){var O=D.match(F);if(O){var w=O[2]-1||0,Z=(O[7]||"0").substring(0,3);return T?new Date(Date.UTC(O[1],w,O[3]||1,O[4]||0,O[5]||0,O[6]||0,Z)):new Date(O[1],w,O[3]||1,O[4]||0,O[5]||0,O[6]||0,Z)}}return new Date(D)})(f),this.init()},x.init=function(){var f=this.$d;this.$y=f.getFullYear(),this.$M=f.getMonth(),this.$D=f.getDate(),this.$W=f.getDay(),this.$H=f.getHours(),this.$m=f.getMinutes(),this.$s=f.getSeconds(),this.$ms=f.getMilliseconds()},x.$utils=function(){return z},x.isValid=function(){return this.$d.toString()!==k},x.isSame=function(f,g){var D=H(f);return this.startOf(g)<=D&&D<=this.endOf(g)},x.isAfter=function(f,g){return H(f)<this.startOf(g)},x.isBefore=function(f,g){return this.endOf(g)<H(f)},x.$g=function(f,g,D){return z.u(f)?this[g]:this.set(D,f)},x.unix=function(){return Math.floor(this.valueOf()/1e3)},x.valueOf=function(){return this.$d.getTime()},x.startOf=function(f,g){var D=this,T=!!z.u(g)||g,O=z.p(f),w=function(de,P){var J=z.w(D.$u?Date.UTC(D.$y,P,de):new Date(D.$y,P,de),D);return T?J:J.endOf(m)},Z=function(de,P){return z.w(D.toDate()[de].apply(D.toDate("s"),(T?[0,0,0,0]:[23,59,59,999]).slice(P)),D)},ie=this.$W,le=this.$M,pe=this.$D,Ee="set"+(this.$u?"UTC":"");switch(O){case p:return T?w(1,0):w(31,11);case u:return T?w(1,le):w(0,le+1);case c:var G=this.$locale().weekStart||0,oe=(ie<G?ie+7:ie)-G;return w(T?pe-oe:pe+(6-oe),le);case m:case b:return Z(Ee+"Hours",0);case d:return Z(Ee+"Minutes",1);case l:return Z(Ee+"Seconds",2);case a:return Z(Ee+"Milliseconds",3);default:return this.clone()}},x.endOf=function(f){return this.startOf(f,!1)},x.$set=function(f,g){var D,T=z.p(f),O="set"+(this.$u?"UTC":""),w=(D={},D[m]=O+"Date",D[b]=O+"Date",D[u]=O+"Month",D[p]=O+"FullYear",D[d]=O+"Hours",D[l]=O+"Minutes",D[a]=O+"Seconds",D[o]=O+"Milliseconds",D)[T],Z=T===m?this.$D+(g-this.$W):g;if(T===u||T===p){var ie=this.clone().set(b,1);ie.$d[w](Z),ie.init(),this.$d=ie.set(b,Math.min(this.$D,ie.daysInMonth())).$d}else w&&this.$d[w](Z);return this.init(),this},x.set=function(f,g){return this.clone().$set(f,g)},x.get=function(f){return this[z.p(f)]()},x.add=function(f,g){var D,T=this;f=Number(f);var O=z.p(g),w=function(le){var pe=H(T);return z.w(pe.date(pe.date()+Math.round(le*f)),T)};if(O===u)return this.set(u,this.$M+f);if(O===p)return this.set(p,this.$y+f);if(O===m)return w(1);if(O===c)return w(7);var Z=(D={},D[l]=r,D[d]=n,D[a]=i,D)[O]||1,ie=this.$d.getTime()+f*Z;return z.w(ie,this)},x.subtract=function(f,g){return this.add(-1*f,g)},x.format=function(f){var g=this,D=this.$locale();if(!this.isValid())return D.invalidDate||k;var T=f||"YYYY-MM-DDTHH:mm:ssZ",O=z.z(this),w=this.$H,Z=this.$m,ie=this.$M,le=D.weekdays,pe=D.months,Ee=D.meridiem,G=function(P,J,re,Te){return P&&(P[J]||P(g,T))||re[J].slice(0,Te)},oe=function(P){return z.s(w%12||12,P,"0")},de=Ee||function(P,J,re){var Te=P<12?"AM":"PM";return re?Te.toLowerCase():Te};return T.replace(L,(function(P,J){return J||(function(re){switch(re){case"YY":return String(g.$y).slice(-2);case"YYYY":return z.s(g.$y,4,"0");case"M":return ie+1;case"MM":return z.s(ie+1,2,"0");case"MMM":return G(D.monthsShort,ie,pe,3);case"MMMM":return G(pe,ie);case"D":return g.$D;case"DD":return z.s(g.$D,2,"0");case"d":return String(g.$W);case"dd":return G(D.weekdaysMin,g.$W,le,2);case"ddd":return G(D.weekdaysShort,g.$W,le,3);case"dddd":return le[g.$W];case"H":return String(w);case"HH":return z.s(w,2,"0");case"h":return oe(1);case"hh":return oe(2);case"a":return de(w,Z,!0);case"A":return de(w,Z,!1);case"m":return String(Z);case"mm":return z.s(Z,2,"0");case"s":return String(g.$s);case"ss":return z.s(g.$s,2,"0");case"SSS":return z.s(g.$ms,3,"0");case"Z":return O}return null})(P)||O.replace(":","")}))},x.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},x.diff=function(f,g,D){var T,O=this,w=z.p(g),Z=H(f),ie=(Z.utcOffset()-this.utcOffset())*r,le=this-Z,pe=function(){return z.m(O,Z)};switch(w){case p:T=pe()/12;break;case u:T=pe();break;case h:T=pe()/3;break;case c:T=(le-ie)/6048e5;break;case m:T=(le-ie)/864e5;break;case d:T=le/n;break;case l:T=le/r;break;case a:T=le/i;break;default:T=le}return D?T:z.a(T)},x.daysInMonth=function(){return this.endOf(u).$D},x.$locale=function(){return E[this.$L]},x.locale=function(f,g){if(!f)return this.$L;var D=this.clone(),T=q(f,g,!0);return T&&(D.$L=T),D},x.clone=function(){return z.w(this.$d,this)},x.toDate=function(){return new Date(this.valueOf())},x.toJSON=function(){return this.isValid()?this.toISOString():null},x.toISOString=function(){return this.$d.toISOString()},x.toString=function(){return this.$d.toUTCString()},Y})(),te=V.prototype;return H.prototype=te,[["$ms",o],["$s",a],["$m",l],["$H",d],["$W",m],["$M",u],["$y",p],["$D",b]].forEach((function(Y){te[Y[1]]=function(x){return this.$g(x,Y[0],Y[1])}})),H.extend=function(Y,x){return Y.$i||(Y(x,V,H),Y.$i=!0),H},H.locale=q,H.isDayjs=M,H.unix=function(Y){return H(1e3*Y)},H.en=E[C],H.Ls=E,H.p={},H}))})(Pr)),Pr.exports}var Hx=Vx();const Yx=Em(Hx);var Vn={},Qo;function Jx(){return Qo||(Qo=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeUrl=t.BLANK_URL=void 0;var s=/^([^\w]*)(javascript|data|vbscript)/im,i=/&#(\w+)(^\w|;)?/g,r=/&(newline|tab);/gi,n=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,o=/^.+(:|&colon;)/gim,a=[".","/"];t.BLANK_URL="about:blank";function l(c){return a.indexOf(c[0])>-1}function d(c){var u=c.replace(n,"");return u.replace(i,function(h,p){return String.fromCharCode(p)})}function m(c){if(!c)return t.BLANK_URL;var u=d(c).replace(r,"").replace(n,"").trim();if(!u)return t.BLANK_URL;if(l(u))return u;var h=u.match(o);if(!h)return u;var p=h[0];return s.test(p)?t.BLANK_URL:u}t.sanitizeUrl=m})(Vn)),Vn}var Kx=Jx(),Qx={value:()=>{}};function ad(){for(var t=0,s=arguments.length,i={},r;t<s;++t){if(!(r=arguments[t]+"")||r in i||/[\s.]/.test(r))throw new Error("illegal type: "+r);i[r]=[]}return new Br(i)}function Br(t){this._=t}function Xx(t,s){return t.trim().split(/^|\s+/).map(function(i){var r="",n=i.indexOf(".");if(n>=0&&(r=i.slice(n+1),i=i.slice(0,n)),i&&!s.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:r}})}Br.prototype=ad.prototype={constructor:Br,on:function(t,s){var i=this._,r=Xx(t+"",i),n,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((n=(t=r[o]).type)&&(n=Zx(i[n],t.name)))return n;return}if(s!=null&&typeof s!="function")throw new Error("invalid callback: "+s);for(;++o<a;)if(n=(t=r[o]).type)i[n]=Xo(i[n],t.name,s);else if(s==null)for(n in i)i[n]=Xo(i[n],t.name,null);return this},copy:function(){var t={},s=this._;for(var i in s)t[i]=s[i].slice();return new Br(t)},call:function(t,s){if((n=arguments.length-2)>0)for(var i=new Array(n),r=0,n,o;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,n=o.length;r<n;++r)o[r].value.apply(s,i)},apply:function(t,s,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],n=0,o=r.length;n<o;++n)r[n].value.apply(s,i)}};function Zx(t,s){for(var i=0,r=t.length,n;i<r;++i)if((n=t[i]).name===s)return n.value}function Xo(t,s,i){for(var r=0,n=t.length;r<n;++r)if(t[r].name===s){t[r]=Qx,t=t.slice(0,r).concat(t.slice(r+1));break}return i!=null&&t.push({name:s,value:i}),t}var ya="http://www.w3.org/1999/xhtml";const Zo={svg:"http://www.w3.org/2000/svg",xhtml:ya,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _n(t){var s=t+="",i=s.indexOf(":");return i>=0&&(s=t.slice(0,i))!=="xmlns"&&(t=t.slice(i+1)),Zo.hasOwnProperty(s)?{space:Zo[s],local:t}:t}function ep(t){return function(){var s=this.ownerDocument,i=this.namespaceURI;return i===ya&&s.documentElement.namespaceURI===ya?s.createElement(t):s.createElementNS(i,t)}}function tp(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function od(t){var s=_n(t);return(s.local?tp:ep)(s)}function sp(){}function Ya(t){return t==null?sp:function(){return this.querySelector(t)}}function ip(t){typeof t!="function"&&(t=Ya(t));for(var s=this._groups,i=s.length,r=new Array(i),n=0;n<i;++n)for(var o=s[n],a=o.length,l=r[n]=new Array(a),d,m,c=0;c<a;++c)(d=o[c])&&(m=t.call(d,d.__data__,c,o))&&("__data__"in d&&(m.__data__=d.__data__),l[c]=m);return new _t(r,this._parents)}function rp(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function np(){return[]}function ld(t){return t==null?np:function(){return this.querySelectorAll(t)}}function ap(t){return function(){return rp(t.apply(this,arguments))}}function op(t){typeof t=="function"?t=ap(t):t=ld(t);for(var s=this._groups,i=s.length,r=[],n=[],o=0;o<i;++o)for(var a=s[o],l=a.length,d,m=0;m<l;++m)(d=a[m])&&(r.push(t.call(d,d.__data__,m,a)),n.push(d));return new _t(r,n)}function cd(t){return function(){return this.matches(t)}}function dd(t){return function(s){return s.matches(t)}}var lp=Array.prototype.find;function cp(t){return function(){return lp.call(this.children,t)}}function dp(){return this.firstElementChild}function hp(t){return this.select(t==null?dp:cp(typeof t=="function"?t:dd(t)))}var mp=Array.prototype.filter;function up(){return Array.from(this.children)}function xp(t){return function(){return mp.call(this.children,t)}}function pp(t){return this.selectAll(t==null?up:xp(typeof t=="function"?t:dd(t)))}function fp(t){typeof t!="function"&&(t=cd(t));for(var s=this._groups,i=s.length,r=new Array(i),n=0;n<i;++n)for(var o=s[n],a=o.length,l=r[n]=[],d,m=0;m<a;++m)(d=o[m])&&t.call(d,d.__data__,m,o)&&l.push(d);return new _t(r,this._parents)}function hd(t){return new Array(t.length)}function gp(){return new _t(this._enter||this._groups.map(hd),this._parents)}function Kr(t,s){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=s}Kr.prototype={constructor:Kr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,s){return this._parent.insertBefore(t,s)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function yp(t){return function(){return t}}function jp(t,s,i,r,n,o){for(var a=0,l,d=s.length,m=o.length;a<m;++a)(l=s[a])?(l.__data__=o[a],r[a]=l):i[a]=new Kr(t,o[a]);for(;a<d;++a)(l=s[a])&&(n[a]=l)}function vp(t,s,i,r,n,o,a){var l,d,m=new Map,c=s.length,u=o.length,h=new Array(c),p;for(l=0;l<c;++l)(d=s[l])&&(h[l]=p=a.call(d,d.__data__,l,s)+"",m.has(p)?n[l]=d:m.set(p,d));for(l=0;l<u;++l)p=a.call(t,o[l],l,o)+"",(d=m.get(p))?(r[l]=d,d.__data__=o[l],m.delete(p)):i[l]=new Kr(t,o[l]);for(l=0;l<c;++l)(d=s[l])&&m.get(h[l])===d&&(n[l]=d)}function bp(t){return t.__data__}function wp(t,s){if(!arguments.length)return Array.from(this,bp);var i=s?vp:jp,r=this._parents,n=this._groups;typeof t!="function"&&(t=yp(t));for(var o=n.length,a=new Array(o),l=new Array(o),d=new Array(o),m=0;m<o;++m){var c=r[m],u=n[m],h=u.length,p=_p(t.call(c,c&&c.__data__,m,r)),b=p.length,k=l[m]=new Array(b),F=a[m]=new Array(b),L=d[m]=new Array(h);i(c,u,k,F,L,p,s);for(var A=0,U=0,B,C;A<b;++A)if(B=k[A]){for(A>=U&&(U=A+1);!(C=F[U])&&++U<b;);B._next=C||null}}return a=new _t(a,r),a._enter=l,a._exit=d,a}function _p(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Np(){return new _t(this._exit||this._groups.map(hd),this._parents)}function Cp(t,s,i){var r=this.enter(),n=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),s!=null&&(n=s(n),n&&(n=n.selection())),i==null?o.remove():i(o),r&&n?r.merge(n).order():n}function Sp(t){for(var s=t.selection?t.selection():t,i=this._groups,r=s._groups,n=i.length,o=r.length,a=Math.min(n,o),l=new Array(n),d=0;d<a;++d)for(var m=i[d],c=r[d],u=m.length,h=l[d]=new Array(u),p,b=0;b<u;++b)(p=m[b]||c[b])&&(h[b]=p);for(;d<n;++d)l[d]=i[d];return new _t(l,this._parents)}function kp(){for(var t=this._groups,s=-1,i=t.length;++s<i;)for(var r=t[s],n=r.length-1,o=r[n],a;--n>=0;)(a=r[n])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Tp(t){t||(t=Ap);function s(u,h){return u&&h?t(u.__data__,h.__data__):!u-!h}for(var i=this._groups,r=i.length,n=new Array(r),o=0;o<r;++o){for(var a=i[o],l=a.length,d=n[o]=new Array(l),m,c=0;c<l;++c)(m=a[c])&&(d[c]=m);d.sort(s)}return new _t(n,this._parents).order()}function Ap(t,s){return t<s?-1:t>s?1:t>=s?0:NaN}function Ep(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Fp(){return Array.from(this)}function Dp(){for(var t=this._groups,s=0,i=t.length;s<i;++s)for(var r=t[s],n=0,o=r.length;n<o;++n){var a=r[n];if(a)return a}return null}function Lp(){let t=0;for(const s of this)++t;return t}function Mp(){return!this.node()}function Pp(t){for(var s=this._groups,i=0,r=s.length;i<r;++i)for(var n=s[i],o=0,a=n.length,l;o<a;++o)(l=n[o])&&t.call(l,l.__data__,o,n);return this}function Bp(t){return function(){this.removeAttribute(t)}}function Ip(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $p(t,s){return function(){this.setAttribute(t,s)}}function Rp(t,s){return function(){this.setAttributeNS(t.space,t.local,s)}}function Op(t,s){return function(){var i=s.apply(this,arguments);i==null?this.removeAttribute(t):this.setAttribute(t,i)}}function zp(t,s){return function(){var i=s.apply(this,arguments);i==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}function qp(t,s){var i=_n(t);if(arguments.length<2){var r=this.node();return i.local?r.getAttributeNS(i.space,i.local):r.getAttribute(i)}return this.each((s==null?i.local?Ip:Bp:typeof s=="function"?i.local?zp:Op:i.local?Rp:$p)(i,s))}function md(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Up(t){return function(){this.style.removeProperty(t)}}function Gp(t,s,i){return function(){this.style.setProperty(t,s,i)}}function Wp(t,s,i){return function(){var r=s.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,i)}}function Vp(t,s,i){return arguments.length>1?this.each((s==null?Up:typeof s=="function"?Wp:Gp)(t,s,i??"")):xi(this.node(),t)}function xi(t,s){return t.style.getPropertyValue(s)||md(t).getComputedStyle(t,null).getPropertyValue(s)}function Hp(t){return function(){delete this[t]}}function Yp(t,s){return function(){this[t]=s}}function Jp(t,s){return function(){var i=s.apply(this,arguments);i==null?delete this[t]:this[t]=i}}function Kp(t,s){return arguments.length>1?this.each((s==null?Hp:typeof s=="function"?Jp:Yp)(t,s)):this.node()[t]}function ud(t){return t.trim().split(/^|\s+/)}function Ja(t){return t.classList||new xd(t)}function xd(t){this._node=t,this._names=ud(t.getAttribute("class")||"")}xd.prototype={add:function(t){var s=this._names.indexOf(t);s<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var s=this._names.indexOf(t);s>=0&&(this._names.splice(s,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function pd(t,s){for(var i=Ja(t),r=-1,n=s.length;++r<n;)i.add(s[r])}function fd(t,s){for(var i=Ja(t),r=-1,n=s.length;++r<n;)i.remove(s[r])}function Qp(t){return function(){pd(this,t)}}function Xp(t){return function(){fd(this,t)}}function Zp(t,s){return function(){(s.apply(this,arguments)?pd:fd)(this,t)}}function ef(t,s){var i=ud(t+"");if(arguments.length<2){for(var r=Ja(this.node()),n=-1,o=i.length;++n<o;)if(!r.contains(i[n]))return!1;return!0}return this.each((typeof s=="function"?Zp:s?Qp:Xp)(i,s))}function tf(){this.textContent=""}function sf(t){return function(){this.textContent=t}}function rf(t){return function(){var s=t.apply(this,arguments);this.textContent=s??""}}function nf(t){return arguments.length?this.each(t==null?tf:(typeof t=="function"?rf:sf)(t)):this.node().textContent}function af(){this.innerHTML=""}function of(t){return function(){this.innerHTML=t}}function lf(t){return function(){var s=t.apply(this,arguments);this.innerHTML=s??""}}function cf(t){return arguments.length?this.each(t==null?af:(typeof t=="function"?lf:of)(t)):this.node().innerHTML}function df(){this.nextSibling&&this.parentNode.appendChild(this)}function hf(){return this.each(df)}function mf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uf(){return this.each(mf)}function xf(t){var s=typeof t=="function"?t:od(t);return this.select(function(){return this.appendChild(s.apply(this,arguments))})}function pf(){return null}function ff(t,s){var i=typeof t=="function"?t:od(t),r=s==null?pf:typeof s=="function"?s:Ya(s);return this.select(function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)})}function gf(){var t=this.parentNode;t&&t.removeChild(this)}function yf(){return this.each(gf)}function jf(){var t=this.cloneNode(!1),s=this.parentNode;return s?s.insertBefore(t,this.nextSibling):t}function vf(){var t=this.cloneNode(!0),s=this.parentNode;return s?s.insertBefore(t,this.nextSibling):t}function bf(t){return this.select(t?vf:jf)}function wf(t){return arguments.length?this.property("__data__",t):this.node().__data__}function _f(t){return function(s){t.call(this,s,this.__data__)}}function Nf(t){return t.trim().split(/^|\s+/).map(function(s){var i="",r=s.indexOf(".");return r>=0&&(i=s.slice(r+1),s=s.slice(0,r)),{type:s,name:i}})}function Cf(t){return function(){var s=this.__on;if(s){for(var i=0,r=-1,n=s.length,o;i<n;++i)o=s[i],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):s[++r]=o;++r?s.length=r:delete this.__on}}}function Sf(t,s,i){return function(){var r=this.__on,n,o=_f(s);if(r){for(var a=0,l=r.length;a<l;++a)if((n=r[a]).type===t.type&&n.name===t.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=o,n.options=i),n.value=s;return}}this.addEventListener(t.type,o,i),n={type:t.type,name:t.name,value:s,listener:o,options:i},r?r.push(n):this.__on=[n]}}function kf(t,s,i){var r=Nf(t+""),n,o=r.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,m=l.length,c;d<m;++d)for(n=0,c=l[d];n<o;++n)if((a=r[n]).type===c.type&&a.name===c.name)return c.value}return}for(l=s?Sf:Cf,n=0;n<o;++n)this.each(l(r[n],s,i));return this}function gd(t,s,i){var r=md(t),n=r.CustomEvent;typeof n=="function"?n=new n(s,i):(n=r.document.createEvent("Event"),i?(n.initEvent(s,i.bubbles,i.cancelable),n.detail=i.detail):n.initEvent(s,!1,!1)),t.dispatchEvent(n)}function Tf(t,s){return function(){return gd(this,t,s)}}function Af(t,s){return function(){return gd(this,t,s.apply(this,arguments))}}function Ef(t,s){return this.each((typeof s=="function"?Af:Tf)(t,s))}function*Ff(){for(var t=this._groups,s=0,i=t.length;s<i;++s)for(var r=t[s],n=0,o=r.length,a;n<o;++n)(a=r[n])&&(yield a)}var yd=[null];function _t(t,s){this._groups=t,this._parents=s}function ur(){return new _t([[document.documentElement]],yd)}function Df(){return this}_t.prototype=ur.prototype={constructor:_t,select:ip,selectAll:op,selectChild:hp,selectChildren:pp,filter:fp,data:wp,enter:gp,exit:Np,join:Cp,merge:Sp,selection:Df,order:kp,sort:Tp,call:Ep,nodes:Fp,node:Dp,size:Lp,empty:Mp,each:Pp,attr:qp,style:Vp,property:Kp,classed:ef,text:nf,html:cf,raise:hf,lower:uf,append:xf,insert:ff,remove:yf,clone:bf,datum:wf,on:kf,dispatch:Ef,[Symbol.iterator]:Ff};function kt(t){return typeof t=="string"?new _t([[document.querySelector(t)]],[document.documentElement]):new _t([[t]],yd)}function Ka(t,s,i){t.prototype=s.prototype=i,i.constructor=t}function jd(t,s){var i=Object.create(t.prototype);for(var r in s)i[r]=s[r];return i}function xr(){}var nr=.7,Qr=1/nr,di="\\s*([+-]?\\d+)\\s*",ar="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Lf=/^#([0-9a-f]{3,8})$/,Mf=new RegExp(`^rgb\\(${di},${di},${di}\\)$`),Pf=new RegExp(`^rgb\\(${Jt},${Jt},${Jt}\\)$`),Bf=new RegExp(`^rgba\\(${di},${di},${di},${ar}\\)$`),If=new RegExp(`^rgba\\(${Jt},${Jt},${Jt},${ar}\\)$`),$f=new RegExp(`^hsl\\(${ar},${Jt},${Jt}\\)$`),Rf=new RegExp(`^hsla\\(${ar},${Jt},${Jt},${ar}\\)$`),el={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ka(xr,or,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:tl,formatHex:tl,formatHex8:Of,formatHsl:zf,formatRgb:sl,toString:sl});function tl(){return this.rgb().formatHex()}function Of(){return this.rgb().formatHex8()}function zf(){return vd(this).formatHsl()}function sl(){return this.rgb().formatRgb()}function or(t){var s,i;return t=(t+"").trim().toLowerCase(),(s=Lf.exec(t))?(i=s[1].length,s=parseInt(s[1],16),i===6?il(s):i===3?new pt(s>>8&15|s>>4&240,s>>4&15|s&240,(s&15)<<4|s&15,1):i===8?kr(s>>24&255,s>>16&255,s>>8&255,(s&255)/255):i===4?kr(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|s&240,((s&15)<<4|s&15)/255):null):(s=Mf.exec(t))?new pt(s[1],s[2],s[3],1):(s=Pf.exec(t))?new pt(s[1]*255/100,s[2]*255/100,s[3]*255/100,1):(s=Bf.exec(t))?kr(s[1],s[2],s[3],s[4]):(s=If.exec(t))?kr(s[1]*255/100,s[2]*255/100,s[3]*255/100,s[4]):(s=$f.exec(t))?al(s[1],s[2]/100,s[3]/100,1):(s=Rf.exec(t))?al(s[1],s[2]/100,s[3]/100,s[4]):el.hasOwnProperty(t)?il(el[t]):t==="transparent"?new pt(NaN,NaN,NaN,0):null}function il(t){return new pt(t>>16&255,t>>8&255,t&255,1)}function kr(t,s,i,r){return r<=0&&(t=s=i=NaN),new pt(t,s,i,r)}function qf(t){return t instanceof xr||(t=or(t)),t?(t=t.rgb(),new pt(t.r,t.g,t.b,t.opacity)):new pt}function ja(t,s,i,r){return arguments.length===1?qf(t):new pt(t,s,i,r??1)}function pt(t,s,i,r){this.r=+t,this.g=+s,this.b=+i,this.opacity=+r}Ka(pt,ja,jd(xr,{brighter(t){return t=t==null?Qr:Math.pow(Qr,t),new pt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?nr:Math.pow(nr,t),new pt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new pt(qs(this.r),qs(this.g),qs(this.b),Xr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rl,formatHex:rl,formatHex8:Uf,formatRgb:nl,toString:nl}));function rl(){return`#${$s(this.r)}${$s(this.g)}${$s(this.b)}`}function Uf(){return`#${$s(this.r)}${$s(this.g)}${$s(this.b)}${$s((isNaN(this.opacity)?1:this.opacity)*255)}`}function nl(){const t=Xr(this.opacity);return`${t===1?"rgb(":"rgba("}${qs(this.r)}, ${qs(this.g)}, ${qs(this.b)}${t===1?")":`, ${t})`}`}function Xr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function qs(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $s(t){return t=qs(t),(t<16?"0":"")+t.toString(16)}function al(t,s,i,r){return r<=0?t=s=i=NaN:i<=0||i>=1?t=s=NaN:s<=0&&(t=NaN),new Rt(t,s,i,r)}function vd(t){if(t instanceof Rt)return new Rt(t.h,t.s,t.l,t.opacity);if(t instanceof xr||(t=or(t)),!t)return new Rt;if(t instanceof Rt)return t;t=t.rgb();var s=t.r/255,i=t.g/255,r=t.b/255,n=Math.min(s,i,r),o=Math.max(s,i,r),a=NaN,l=o-n,d=(o+n)/2;return l?(s===o?a=(i-r)/l+(i<r)*6:i===o?a=(r-s)/l+2:a=(s-i)/l+4,l/=d<.5?o+n:2-o-n,a*=60):l=d>0&&d<1?0:a,new Rt(a,l,d,t.opacity)}function Gf(t,s,i,r){return arguments.length===1?vd(t):new Rt(t,s,i,r??1)}function Rt(t,s,i,r){this.h=+t,this.s=+s,this.l=+i,this.opacity=+r}Ka(Rt,Gf,jd(xr,{brighter(t){return t=t==null?Qr:Math.pow(Qr,t),new Rt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?nr:Math.pow(nr,t),new Rt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,s=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,r=i+(i<.5?i:1-i)*s,n=2*i-r;return new pt(Hn(t>=240?t-240:t+120,n,r),Hn(t,n,r),Hn(t<120?t+240:t-120,n,r),this.opacity)},clamp(){return new Rt(ol(this.h),Tr(this.s),Tr(this.l),Xr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Xr(this.opacity);return`${t===1?"hsl(":"hsla("}${ol(this.h)}, ${Tr(this.s)*100}%, ${Tr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ol(t){return t=(t||0)%360,t<0?t+360:t}function Tr(t){return Math.max(0,Math.min(1,t||0))}function Hn(t,s,i){return(t<60?s+(i-s)*t/60:t<180?i:t<240?s+(i-s)*(240-t)/60:s)*255}const Qa=t=>()=>t;function bd(t,s){return function(i){return t+i*s}}function Wf(t,s,i){return t=Math.pow(t,i),s=Math.pow(s,i)-t,i=1/i,function(r){return Math.pow(t+r*s,i)}}function X2(t,s){var i=s-t;return i?bd(t,i>180||i<-180?i-360*Math.round(i/360):i):Qa(isNaN(t)?s:t)}function Vf(t){return(t=+t)==1?wd:function(s,i){return i-s?Wf(s,i,t):Qa(isNaN(s)?i:s)}}function wd(t,s){var i=s-t;return i?bd(t,i):Qa(isNaN(t)?s:t)}const ll=(function t(s){var i=Vf(s);function r(n,o){var a=i((n=ja(n)).r,(o=ja(o)).r),l=i(n.g,o.g),d=i(n.b,o.b),m=wd(n.opacity,o.opacity);return function(c){return n.r=a(c),n.g=l(c),n.b=d(c),n.opacity=m(c),n+""}}return r.gamma=t,r})(1);function bs(t,s){return t=+t,s=+s,function(i){return t*(1-i)+s*i}}var va=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yn=new RegExp(va.source,"g");function Hf(t){return function(){return t}}function Yf(t){return function(s){return t(s)+""}}function Jf(t,s){var i=va.lastIndex=Yn.lastIndex=0,r,n,o,a=-1,l=[],d=[];for(t=t+"",s=s+"";(r=va.exec(t))&&(n=Yn.exec(s));)(o=n.index)>i&&(o=s.slice(i,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(n=n[0])?l[a]?l[a]+=n:l[++a]=n:(l[++a]=null,d.push({i:a,x:bs(r,n)})),i=Yn.lastIndex;return i<s.length&&(o=s.slice(i),l[a]?l[a]+=o:l[++a]=o),l.length<2?d[0]?Yf(d[0].x):Hf(s):(s=d.length,function(m){for(var c=0,u;c<s;++c)l[(u=d[c]).i]=u.x(m);return l.join("")})}var cl=180/Math.PI,ba={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function _d(t,s,i,r,n,o){var a,l,d;return(a=Math.sqrt(t*t+s*s))&&(t/=a,s/=a),(d=t*i+s*r)&&(i-=t*d,r-=s*d),(l=Math.sqrt(i*i+r*r))&&(i/=l,r/=l,d/=l),t*r<s*i&&(t=-t,s=-s,d=-d,a=-a),{translateX:n,translateY:o,rotate:Math.atan2(s,t)*cl,skewX:Math.atan(d)*cl,scaleX:a,scaleY:l}}var Ar;function Kf(t){const s=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return s.isIdentity?ba:_d(s.a,s.b,s.c,s.d,s.e,s.f)}function Qf(t){return t==null||(Ar||(Ar=document.createElementNS("http://www.w3.org/2000/svg","g")),Ar.setAttribute("transform",t),!(t=Ar.transform.baseVal.consolidate()))?ba:(t=t.matrix,_d(t.a,t.b,t.c,t.d,t.e,t.f))}function Nd(t,s,i,r){function n(m){return m.length?m.pop()+" ":""}function o(m,c,u,h,p,b){if(m!==u||c!==h){var k=p.push("translate(",null,s,null,i);b.push({i:k-4,x:bs(m,u)},{i:k-2,x:bs(c,h)})}else(u||h)&&p.push("translate("+u+s+h+i)}function a(m,c,u,h){m!==c?(m-c>180?c+=360:c-m>180&&(m+=360),h.push({i:u.push(n(u)+"rotate(",null,r)-2,x:bs(m,c)})):c&&u.push(n(u)+"rotate("+c+r)}function l(m,c,u,h){m!==c?h.push({i:u.push(n(u)+"skewX(",null,r)-2,x:bs(m,c)}):c&&u.push(n(u)+"skewX("+c+r)}function d(m,c,u,h,p,b){if(m!==u||c!==h){var k=p.push(n(p)+"scale(",null,",",null,")");b.push({i:k-4,x:bs(m,u)},{i:k-2,x:bs(c,h)})}else(u!==1||h!==1)&&p.push(n(p)+"scale("+u+","+h+")")}return function(m,c){var u=[],h=[];return m=t(m),c=t(c),o(m.translateX,m.translateY,c.translateX,c.translateY,u,h),a(m.rotate,c.rotate,u,h),l(m.skewX,c.skewX,u,h),d(m.scaleX,m.scaleY,c.scaleX,c.scaleY,u,h),m=c=null,function(p){for(var b=-1,k=h.length,F;++b<k;)u[(F=h[b]).i]=F.x(p);return u.join("")}}}var Xf=Nd(Kf,"px, ","px)","deg)"),Zf=Nd(Qf,", ",")",")"),pi=0,Ui=0,Li=0,Cd=1e3,Zr,Gi,en=0,Vs=0,Nn=0,lr=typeof performance=="object"&&performance.now?performance:Date,Sd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xa(){return Vs||(Sd(eg),Vs=lr.now()+Nn)}function eg(){Vs=0}function tn(){this._call=this._time=this._next=null}tn.prototype=kd.prototype={constructor:tn,restart:function(t,s,i){if(typeof t!="function")throw new TypeError("callback is not a function");i=(i==null?Xa():+i)+(s==null?0:+s),!this._next&&Gi!==this&&(Gi?Gi._next=this:Zr=this,Gi=this),this._call=t,this._time=i,wa()},stop:function(){this._call&&(this._call=null,this._time=1/0,wa())}};function kd(t,s,i){var r=new tn;return r.restart(t,s,i),r}function tg(){Xa(),++pi;for(var t=Zr,s;t;)(s=Vs-t._time)>=0&&t._call.call(void 0,s),t=t._next;--pi}function dl(){Vs=(en=lr.now())+Nn,pi=Ui=0;try{tg()}finally{pi=0,ig(),Vs=0}}function sg(){var t=lr.now(),s=t-en;s>Cd&&(Nn-=s,en=t)}function ig(){for(var t,s=Zr,i,r=1/0;s;)s._call?(r>s._time&&(r=s._time),t=s,s=s._next):(i=s._next,s._next=null,s=t?t._next=i:Zr=i);Gi=t,wa(r)}function wa(t){if(!pi){Ui&&(Ui=clearTimeout(Ui));var s=t-Vs;s>24?(t<1/0&&(Ui=setTimeout(dl,t-lr.now()-Nn)),Li&&(Li=clearInterval(Li))):(Li||(en=lr.now(),Li=setInterval(sg,Cd)),pi=1,Sd(dl))}}function hl(t,s,i){var r=new tn;return s=s==null?0:+s,r.restart(n=>{r.stop(),t(n+s)},s,i),r}var rg=ad("start","end","cancel","interrupt"),ng=[],Td=0,ml=1,_a=2,Ir=3,ul=4,Na=5,$r=6;function Cn(t,s,i,r,n,o){var a=t.__transition;if(!a)t.__transition={};else if(i in a)return;ag(t,i,{name:s,index:r,group:n,on:rg,tween:ng,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Td})}function Za(t,s){var i=Wt(t,s);if(i.state>Td)throw new Error("too late; already scheduled");return i}function ss(t,s){var i=Wt(t,s);if(i.state>Ir)throw new Error("too late; already running");return i}function Wt(t,s){var i=t.__transition;if(!i||!(i=i[s]))throw new Error("transition not found");return i}function ag(t,s,i){var r=t.__transition,n;r[s]=i,i.timer=kd(o,0,i.time);function o(m){i.state=ml,i.timer.restart(a,i.delay,i.time),i.delay<=m&&a(m-i.delay)}function a(m){var c,u,h,p;if(i.state!==ml)return d();for(c in r)if(p=r[c],p.name===i.name){if(p.state===Ir)return hl(a);p.state===ul?(p.state=$r,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[c]):+c<s&&(p.state=$r,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[c])}if(hl(function(){i.state===Ir&&(i.state=ul,i.timer.restart(l,i.delay,i.time),l(m))}),i.state=_a,i.on.call("start",t,t.__data__,i.index,i.group),i.state===_a){for(i.state=Ir,n=new Array(h=i.tween.length),c=0,u=-1;c<h;++c)(p=i.tween[c].value.call(t,t.__data__,i.index,i.group))&&(n[++u]=p);n.length=u+1}}function l(m){for(var c=m<i.duration?i.ease.call(null,m/i.duration):(i.timer.restart(d),i.state=Na,1),u=-1,h=n.length;++u<h;)n[u].call(t,c);i.state===Na&&(i.on.call("end",t,t.__data__,i.index,i.group),d())}function d(){i.state=$r,i.timer.stop(),delete r[s];for(var m in r)return;delete t.__transition}}function og(t,s){var i=t.__transition,r,n,o=!0,a;if(i){s=s==null?null:s+"";for(a in i){if((r=i[a]).name!==s){o=!1;continue}n=r.state>_a&&r.state<Na,r.state=$r,r.timer.stop(),r.on.call(n?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete i[a]}o&&delete t.__transition}}function lg(t){return this.each(function(){og(this,t)})}function cg(t,s){var i,r;return function(){var n=ss(this,t),o=n.tween;if(o!==i){r=i=o;for(var a=0,l=r.length;a<l;++a)if(r[a].name===s){r=r.slice(),r.splice(a,1);break}}n.tween=r}}function dg(t,s,i){var r,n;if(typeof i!="function")throw new Error;return function(){var o=ss(this,t),a=o.tween;if(a!==r){n=(r=a).slice();for(var l={name:s,value:i},d=0,m=n.length;d<m;++d)if(n[d].name===s){n[d]=l;break}d===m&&n.push(l)}o.tween=n}}function hg(t,s){var i=this._id;if(t+="",arguments.length<2){for(var r=Wt(this.node(),i).tween,n=0,o=r.length,a;n<o;++n)if((a=r[n]).name===t)return a.value;return null}return this.each((s==null?cg:dg)(i,t,s))}function eo(t,s,i){var r=t._id;return t.each(function(){var n=ss(this,r);(n.value||(n.value={}))[s]=i.apply(this,arguments)}),function(n){return Wt(n,r).value[s]}}function Ad(t,s){var i;return(typeof s=="number"?bs:s instanceof or?ll:(i=or(s))?(s=i,ll):Jf)(t,s)}function mg(t){return function(){this.removeAttribute(t)}}function ug(t){return function(){this.removeAttributeNS(t.space,t.local)}}function xg(t,s,i){var r,n=i+"",o;return function(){var a=this.getAttribute(t);return a===n?null:a===r?o:o=s(r=a,i)}}function pg(t,s,i){var r,n=i+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===n?null:a===r?o:o=s(r=a,i)}}function fg(t,s,i){var r,n,o;return function(){var a,l=i(this),d;return l==null?void this.removeAttribute(t):(a=this.getAttribute(t),d=l+"",a===d?null:a===r&&d===n?o:(n=d,o=s(r=a,l)))}}function gg(t,s,i){var r,n,o;return function(){var a,l=i(this),d;return l==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),d=l+"",a===d?null:a===r&&d===n?o:(n=d,o=s(r=a,l)))}}function yg(t,s){var i=_n(t),r=i==="transform"?Zf:Ad;return this.attrTween(t,typeof s=="function"?(i.local?gg:fg)(i,r,eo(this,"attr."+t,s)):s==null?(i.local?ug:mg)(i):(i.local?pg:xg)(i,r,s))}function jg(t,s){return function(i){this.setAttribute(t,s.call(this,i))}}function vg(t,s){return function(i){this.setAttributeNS(t.space,t.local,s.call(this,i))}}function bg(t,s){var i,r;function n(){var o=s.apply(this,arguments);return o!==r&&(i=(r=o)&&vg(t,o)),i}return n._value=s,n}function wg(t,s){var i,r;function n(){var o=s.apply(this,arguments);return o!==r&&(i=(r=o)&&jg(t,o)),i}return n._value=s,n}function _g(t,s){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(s==null)return this.tween(i,null);if(typeof s!="function")throw new Error;var r=_n(t);return this.tween(i,(r.local?bg:wg)(r,s))}function Ng(t,s){return function(){Za(this,t).delay=+s.apply(this,arguments)}}function Cg(t,s){return s=+s,function(){Za(this,t).delay=s}}function Sg(t){var s=this._id;return arguments.length?this.each((typeof t=="function"?Ng:Cg)(s,t)):Wt(this.node(),s).delay}function kg(t,s){return function(){ss(this,t).duration=+s.apply(this,arguments)}}function Tg(t,s){return s=+s,function(){ss(this,t).duration=s}}function Ag(t){var s=this._id;return arguments.length?this.each((typeof t=="function"?kg:Tg)(s,t)):Wt(this.node(),s).duration}function Eg(t,s){if(typeof s!="function")throw new Error;return function(){ss(this,t).ease=s}}function Fg(t){var s=this._id;return arguments.length?this.each(Eg(s,t)):Wt(this.node(),s).ease}function Dg(t,s){return function(){var i=s.apply(this,arguments);if(typeof i!="function")throw new Error;ss(this,t).ease=i}}function Lg(t){if(typeof t!="function")throw new Error;return this.each(Dg(this._id,t))}function Mg(t){typeof t!="function"&&(t=cd(t));for(var s=this._groups,i=s.length,r=new Array(i),n=0;n<i;++n)for(var o=s[n],a=o.length,l=r[n]=[],d,m=0;m<a;++m)(d=o[m])&&t.call(d,d.__data__,m,o)&&l.push(d);return new us(r,this._parents,this._name,this._id)}function Pg(t){if(t._id!==this._id)throw new Error;for(var s=this._groups,i=t._groups,r=s.length,n=i.length,o=Math.min(r,n),a=new Array(r),l=0;l<o;++l)for(var d=s[l],m=i[l],c=d.length,u=a[l]=new Array(c),h,p=0;p<c;++p)(h=d[p]||m[p])&&(u[p]=h);for(;l<r;++l)a[l]=s[l];return new us(a,this._parents,this._name,this._id)}function Bg(t){return(t+"").trim().split(/^|\s+/).every(function(s){var i=s.indexOf(".");return i>=0&&(s=s.slice(0,i)),!s||s==="start"})}function Ig(t,s,i){var r,n,o=Bg(s)?Za:ss;return function(){var a=o(this,t),l=a.on;l!==r&&(n=(r=l).copy()).on(s,i),a.on=n}}function $g(t,s){var i=this._id;return arguments.length<2?Wt(this.node(),i).on.on(t):this.each(Ig(i,t,s))}function Rg(t){return function(){var s=this.parentNode;for(var i in this.__transition)if(+i!==t)return;s&&s.removeChild(this)}}function Og(){return this.on("end.remove",Rg(this._id))}function zg(t){var s=this._name,i=this._id;typeof t!="function"&&(t=Ya(t));for(var r=this._groups,n=r.length,o=new Array(n),a=0;a<n;++a)for(var l=r[a],d=l.length,m=o[a]=new Array(d),c,u,h=0;h<d;++h)(c=l[h])&&(u=t.call(c,c.__data__,h,l))&&("__data__"in c&&(u.__data__=c.__data__),m[h]=u,Cn(m[h],s,i,h,m,Wt(c,i)));return new us(o,this._parents,s,i)}function qg(t){var s=this._name,i=this._id;typeof t!="function"&&(t=ld(t));for(var r=this._groups,n=r.length,o=[],a=[],l=0;l<n;++l)for(var d=r[l],m=d.length,c,u=0;u<m;++u)if(c=d[u]){for(var h=t.call(c,c.__data__,u,d),p,b=Wt(c,i),k=0,F=h.length;k<F;++k)(p=h[k])&&Cn(p,s,i,k,h,b);o.push(h),a.push(c)}return new us(o,a,s,i)}var Ug=ur.prototype.constructor;function Gg(){return new Ug(this._groups,this._parents)}function Wg(t,s){var i,r,n;return function(){var o=xi(this,t),a=(this.style.removeProperty(t),xi(this,t));return o===a?null:o===i&&a===r?n:n=s(i=o,r=a)}}function Ed(t){return function(){this.style.removeProperty(t)}}function Vg(t,s,i){var r,n=i+"",o;return function(){var a=xi(this,t);return a===n?null:a===r?o:o=s(r=a,i)}}function Hg(t,s,i){var r,n,o;return function(){var a=xi(this,t),l=i(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(t),xi(this,t))),a===d?null:a===r&&d===n?o:(n=d,o=s(r=a,l))}}function Yg(t,s){var i,r,n,o="style."+s,a="end."+o,l;return function(){var d=ss(this,t),m=d.on,c=d.value[o]==null?l||(l=Ed(s)):void 0;(m!==i||n!==c)&&(r=(i=m).copy()).on(a,n=c),d.on=r}}function Jg(t,s,i){var r=(t+="")=="transform"?Xf:Ad;return s==null?this.styleTween(t,Wg(t,r)).on("end.style."+t,Ed(t)):typeof s=="function"?this.styleTween(t,Hg(t,r,eo(this,"style."+t,s))).each(Yg(this._id,t)):this.styleTween(t,Vg(t,r,s),i).on("end.style."+t,null)}function Kg(t,s,i){return function(r){this.style.setProperty(t,s.call(this,r),i)}}function Qg(t,s,i){var r,n;function o(){var a=s.apply(this,arguments);return a!==n&&(r=(n=a)&&Kg(t,a,i)),r}return o._value=s,o}function Xg(t,s,i){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(s==null)return this.tween(r,null);if(typeof s!="function")throw new Error;return this.tween(r,Qg(t,s,i??""))}function Zg(t){return function(){this.textContent=t}}function ey(t){return function(){var s=t(this);this.textContent=s??""}}function ty(t){return this.tween("text",typeof t=="function"?ey(eo(this,"text",t)):Zg(t==null?"":t+""))}function sy(t){return function(s){this.textContent=t.call(this,s)}}function iy(t){var s,i;function r(){var n=t.apply(this,arguments);return n!==i&&(s=(i=n)&&sy(n)),s}return r._value=t,r}function ry(t){var s="text";if(arguments.length<1)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,iy(t))}function ny(){for(var t=this._name,s=this._id,i=Fd(),r=this._groups,n=r.length,o=0;o<n;++o)for(var a=r[o],l=a.length,d,m=0;m<l;++m)if(d=a[m]){var c=Wt(d,s);Cn(d,t,i,m,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new us(r,this._parents,t,i)}function ay(){var t,s,i=this,r=i._id,n=i.size();return new Promise(function(o,a){var l={value:a},d={value:function(){--n===0&&o()}};i.each(function(){var m=ss(this,r),c=m.on;c!==t&&(s=(t=c).copy(),s._.cancel.push(l),s._.interrupt.push(l),s._.end.push(d)),m.on=s}),n===0&&o()})}var oy=0;function us(t,s,i,r){this._groups=t,this._parents=s,this._name=i,this._id=r}function Fd(){return++oy}var os=ur.prototype;us.prototype={constructor:us,select:zg,selectAll:qg,selectChild:os.selectChild,selectChildren:os.selectChildren,filter:Mg,merge:Pg,selection:Gg,transition:ny,call:os.call,nodes:os.nodes,node:os.node,size:os.size,empty:os.empty,each:os.each,on:$g,attr:yg,attrTween:_g,style:Jg,styleTween:Xg,text:ty,textTween:ry,remove:Og,tween:hg,delay:Sg,duration:Ag,ease:Fg,easeVarying:Lg,end:ay,[Symbol.iterator]:os[Symbol.iterator]};function ly(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var cy={time:null,delay:0,duration:250,ease:ly};function dy(t,s){for(var i;!(i=t.__transition)||!(i=i[s]);)if(!(t=t.parentNode))throw new Error(`transition ${s} not found`);return i}function hy(t){var s,i;t instanceof us?(s=t._id,t=t._name):(s=Fd(),(i=cy).time=Xa(),t=t==null?null:t+"");for(var r=this._groups,n=r.length,o=0;o<n;++o)for(var a=r[o],l=a.length,d,m=0;m<l;++m)(d=a[m])&&Cn(d,t,s,m,a,i||dy(d,s));return new us(r,this._parents,t,s)}ur.prototype.interrupt=lg;ur.prototype.transition=hy;const Z2=Math.abs,eS=Math.atan2,tS=Math.cos,sS=Math.max,iS=Math.min,rS=Math.sin,nS=Math.sqrt,xl=1e-12,to=Math.PI,pl=to/2,aS=2*to;function oS(t){return t>1?0:t<-1?to:Math.acos(t)}function lS(t){return t>=1?pl:t<=-1?-pl:Math.asin(t)}function Dd(t){this._context=t}Dd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:this._context.lineTo(t,s);break}}};function my(t){return new Dd(t)}class Ld{constructor(s,i){this._context=s,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(s,i){switch(s=+s,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(s,i):this._context.moveTo(s,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+s)/2,this._y0,this._x0,i,s,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,s,this._y0,s,i);break}}this._x0=s,this._y0=i}}function uy(t){return new Ld(t,!0)}function xy(t){return new Ld(t,!1)}function ks(){}function sn(t,s,i){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+s)/6,(t._y0+4*t._y1+i)/6)}function Sn(t){this._context=t}Sn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:sn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:sn(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function py(t){return new Sn(t)}function Md(t){this._context=t}Md.prototype={areaStart:ks,areaEnd:ks,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x2=t,this._y2=s;break;case 1:this._point=2,this._x3=t,this._y3=s;break;case 2:this._point=3,this._x4=t,this._y4=s,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+s)/6);break;default:sn(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function fy(t){return new Md(t)}function Pd(t){this._context=t}Pd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(i,r):this._context.moveTo(i,r);break;case 3:this._point=4;default:sn(this,t,s);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s}};function gy(t){return new Pd(t)}function Bd(t,s){this._basis=new Sn(t),this._beta=s}Bd.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,s=this._y,i=t.length-1;if(i>0)for(var r=t[0],n=s[0],o=t[i]-r,a=s[i]-n,l=-1,d;++l<=i;)d=l/i,this._basis.point(this._beta*t[l]+(1-this._beta)*(r+d*o),this._beta*s[l]+(1-this._beta)*(n+d*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,s){this._x.push(+t),this._y.push(+s)}};const yy=(function t(s){function i(r){return s===1?new Sn(r):new Bd(r,s)}return i.beta=function(r){return t(+r)},i})(.85);function rn(t,s,i){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-s),t._y2+t._k*(t._y1-i),t._x2,t._y2)}function so(t,s){this._context=t,this._k=(1-s)/6}so.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:rn(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2,this._x1=t,this._y1=s;break;case 2:this._point=3;default:rn(this,t,s);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const jy=(function t(s){function i(r){return new so(r,s)}return i.tension=function(r){return t(+r)},i})(0);function io(t,s){this._context=t,this._k=(1-s)/6}io.prototype={areaStart:ks,areaEnd:ks,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._x3=t,this._y3=s;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=s);break;case 2:this._point=3,this._x5=t,this._y5=s;break;default:rn(this,t,s);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const vy=(function t(s){function i(r){return new io(r,s)}return i.tension=function(r){return t(+r)},i})(0);function ro(t,s){this._context=t,this._k=(1-s)/6}ro.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:rn(this,t,s);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const by=(function t(s){function i(r){return new ro(r,s)}return i.tension=function(r){return t(+r)},i})(0);function no(t,s,i){var r=t._x1,n=t._y1,o=t._x2,a=t._y2;if(t._l01_a>xl){var l=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,d=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*l-t._x0*t._l12_2a+t._x2*t._l01_2a)/d,n=(n*l-t._y0*t._l12_2a+t._y2*t._l01_2a)/d}if(t._l23_a>xl){var m=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*m+t._x1*t._l23_2a-s*t._l12_2a)/c,a=(a*m+t._y1*t._l23_2a-i*t._l12_2a)/c}t._context.bezierCurveTo(r,n,o,a,t._x2,t._y2)}function Id(t,s){this._context=t,this._alpha=s}Id.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){if(t=+t,s=+s,this._point){var i=this._x2-t,r=this._y2-s;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3;default:no(this,t,s);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const wy=(function t(s){function i(r){return s?new Id(r,s):new so(r,0)}return i.alpha=function(r){return t(+r)},i})(.5);function $d(t,s){this._context=t,this._alpha=s}$d.prototype={areaStart:ks,areaEnd:ks,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,s){if(t=+t,s=+s,this._point){var i=this._x2-t,r=this._y2-s;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=s;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=s);break;case 2:this._point=3,this._x5=t,this._y5=s;break;default:no(this,t,s);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const _y=(function t(s){function i(r){return s?new $d(r,s):new io(r,0)}return i.alpha=function(r){return t(+r)},i})(.5);function Rd(t,s){this._context=t,this._alpha=s}Rd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){if(t=+t,s=+s,this._point){var i=this._x2-t,r=this._y2-s;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:no(this,t,s);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const Ny=(function t(s){function i(r){return s?new Rd(r,s):new ro(r,0)}return i.alpha=function(r){return t(+r)},i})(.5);function Od(t){this._context=t}Od.prototype={areaStart:ks,areaEnd:ks,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,s){t=+t,s=+s,this._point?this._context.lineTo(t,s):(this._point=1,this._context.moveTo(t,s))}};function Cy(t){return new Od(t)}function fl(t){return t<0?-1:1}function gl(t,s,i){var r=t._x1-t._x0,n=s-t._x1,o=(t._y1-t._y0)/(r||n<0&&-0),a=(i-t._y1)/(n||r<0&&-0),l=(o*n+a*r)/(r+n);return(fl(o)+fl(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(l))||0}function yl(t,s){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-s)/2:s}function Jn(t,s,i){var r=t._x0,n=t._y0,o=t._x1,a=t._y1,l=(o-r)/3;t._context.bezierCurveTo(r+l,n+l*s,o-l,a-l*i,o,a)}function nn(t){this._context=t}nn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Jn(this,this._t0,yl(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,s){var i=NaN;if(t=+t,s=+s,!(t===this._x1&&s===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;break;case 2:this._point=3,Jn(this,yl(this,i=gl(this,t,s)),i);break;default:Jn(this,this._t0,i=gl(this,t,s));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=s,this._t0=i}}};function zd(t){this._context=new qd(t)}(zd.prototype=Object.create(nn.prototype)).point=function(t,s){nn.prototype.point.call(this,s,t)};function qd(t){this._context=t}qd.prototype={moveTo:function(t,s){this._context.moveTo(s,t)},closePath:function(){this._context.closePath()},lineTo:function(t,s){this._context.lineTo(s,t)},bezierCurveTo:function(t,s,i,r,n,o){this._context.bezierCurveTo(s,t,r,i,o,n)}};function Sy(t){return new nn(t)}function ky(t){return new zd(t)}function Ud(t){this._context=t}Ud.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,s=this._y,i=t.length;if(i)if(this._line?this._context.lineTo(t[0],s[0]):this._context.moveTo(t[0],s[0]),i===2)this._context.lineTo(t[1],s[1]);else for(var r=jl(t),n=jl(s),o=0,a=1;a<i;++o,++a)this._context.bezierCurveTo(r[0][o],n[0][o],r[1][o],n[1][o],t[a],s[a]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,s){this._x.push(+t),this._y.push(+s)}};function jl(t){var s,i=t.length-1,r,n=new Array(i),o=new Array(i),a=new Array(i);for(n[0]=0,o[0]=2,a[0]=t[0]+2*t[1],s=1;s<i-1;++s)n[s]=1,o[s]=4,a[s]=4*t[s]+2*t[s+1];for(n[i-1]=2,o[i-1]=7,a[i-1]=8*t[i-1]+t[i],s=1;s<i;++s)r=n[s]/o[s-1],o[s]-=r,a[s]-=r*a[s-1];for(n[i-1]=a[i-1]/o[i-1],s=i-2;s>=0;--s)n[s]=(a[s]-n[s+1])/o[s];for(o[i-1]=(t[i]+n[i-1])/2,s=0;s<i-1;++s)o[s]=2*t[s+1]-n[s+1];return[n,o]}function Ty(t){return new Ud(t)}function kn(t,s){this._context=t,this._t=s}kn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,s){switch(t=+t,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,s):this._context.moveTo(t,s);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(t,s);else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,s)}break}}this._x=t,this._y=s}};function Ay(t){return new kn(t,.5)}function Ey(t){return new kn(t,0)}function Fy(t){return new kn(t,1)}function Wi(t,s,i){this.k=t,this.x=s,this.y=i}Wi.prototype={constructor:Wi,scale:function(t){return t===1?this:new Wi(this.k*t,this.x,this.y)},translate:function(t,s){return t===0&s===0?this:new Wi(this.k,this.x+this.k*t,this.y+this.k*s)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Wi.prototype;/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:Gd,setPrototypeOf:vl,isFrozen:Dy,getPrototypeOf:Ly,getOwnPropertyDescriptor:My}=Object;let{freeze:dt,seal:Mt,create:Wd}=Object,{apply:Ca,construct:Sa}=typeof Reflect<"u"&&Reflect;dt||(dt=function(s){return s});Mt||(Mt=function(s){return s});Ca||(Ca=function(s,i,r){return s.apply(i,r)});Sa||(Sa=function(s,i){return new s(...i)});const Er=Nt(Array.prototype.forEach),bl=Nt(Array.prototype.pop),Mi=Nt(Array.prototype.push),Rr=Nt(String.prototype.toLowerCase),Kn=Nt(String.prototype.toString),wl=Nt(String.prototype.match),Pi=Nt(String.prototype.replace),Py=Nt(String.prototype.indexOf),By=Nt(String.prototype.trim),$t=Nt(Object.prototype.hasOwnProperty),nt=Nt(RegExp.prototype.test),Bi=Iy(TypeError);function Nt(t){return function(s){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return Ca(t,s,r)}}function Iy(t){return function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return Sa(t,i)}}function Se(t,s){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rr;vl&&vl(t,null);let r=s.length;for(;r--;){let n=s[r];if(typeof n=="string"){const o=i(n);o!==n&&(Dy(s)||(s[r]=o),n=o)}t[n]=!0}return t}function $y(t){for(let s=0;s<t.length;s++)$t(t,s)||(t[s]=null);return t}function Ps(t){const s=Wd(null);for(const[i,r]of Gd(t))$t(t,i)&&(Array.isArray(r)?s[i]=$y(r):r&&typeof r=="object"&&r.constructor===Object?s[i]=Ps(r):s[i]=r);return s}function Ii(t,s){for(;t!==null;){const r=My(t,s);if(r){if(r.get)return Nt(r.get);if(typeof r.value=="function")return Nt(r.value)}t=Ly(t)}function i(){return null}return i}const _l=dt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Qn=dt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Xn=dt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ry=dt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Zn=dt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Oy=dt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Nl=dt(["#text"]),Cl=dt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ea=dt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Sl=dt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Fr=dt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zy=Mt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),qy=Mt(/<%[\w\W]*|[\w\W]*%>/gm),Uy=Mt(/\${[\w\W]*}/gm),Gy=Mt(/^data-[\-\w.\u00B7-\uFFFF]/),Wy=Mt(/^aria-[\-\w]+$/),Vd=Mt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Vy=Mt(/^(?:\w+script|data):/i),Hy=Mt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Hd=Mt(/^html$/i),Yy=Mt(/^[a-z][.\w]*(-[.\w]+)+$/i);var kl=Object.freeze({__proto__:null,MUSTACHE_EXPR:zy,ERB_EXPR:qy,TMPLIT_EXPR:Uy,DATA_ATTR:Gy,ARIA_ATTR:Wy,IS_ALLOWED_URI:Vd,IS_SCRIPT_OR_DATA:Vy,ATTR_WHITESPACE:Hy,DOCTYPE_NAME:Hd,CUSTOM_ELEMENT:Yy});const $i={element:1,text:3,progressingInstruction:7,comment:8,document:9},Jy=function(){return typeof window>"u"?null:window},Ky=function(s,i){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let r=null;const n="data-tt-policy-suffix";i&&i.hasAttribute(n)&&(r=i.getAttribute(n));const o="dompurify"+(r?"#"+r:"");try{return s.createPolicy(o,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function Yd(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jy();const s=he=>Yd(he);if(s.version="3.1.6",s.removed=[],!t||!t.document||t.document.nodeType!==$i.document)return s.isSupported=!1,s;let{document:i}=t;const r=i,n=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:l,Element:d,NodeFilter:m,NamedNodeMap:c=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:u,DOMParser:h,trustedTypes:p}=t,b=d.prototype,k=Ii(b,"cloneNode"),F=Ii(b,"remove"),L=Ii(b,"nextSibling"),A=Ii(b,"childNodes"),U=Ii(b,"parentNode");if(typeof a=="function"){const he=i.createElement("template");he.content&&he.content.ownerDocument&&(i=he.content.ownerDocument)}let B,C="";const{implementation:E,createNodeIterator:j,createDocumentFragment:M,getElementsByTagName:q}=i,{importNode:H}=r;let z={};s.isSupported=typeof Gd=="function"&&typeof U=="function"&&E&&E.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:V,ERB_EXPR:te,TMPLIT_EXPR:Y,DATA_ATTR:x,ARIA_ATTR:f,IS_SCRIPT_OR_DATA:g,ATTR_WHITESPACE:D,CUSTOM_ELEMENT:T}=kl;let{IS_ALLOWED_URI:O}=kl,w=null;const Z=Se({},[..._l,...Qn,...Xn,...Zn,...Nl]);let ie=null;const le=Se({},[...Cl,...ea,...Sl,...Fr]);let pe=Object.seal(Wd(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ee=null,G=null,oe=!0,de=!0,P=!1,J=!0,re=!1,Te=!0,it=!1,Bt=!1,Ds=!1,Vt=!1,ps=!1,fs=!1,Xs=!0,Ls=!1;const Ti="user-content-";let ne=!0,_e=!1,Je={},It=null;const Zs=Se({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let jr=null;const vr=Se({},["audio","video","img","source","image","track"]);let Ai=null;const br=Se({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ei="http://www.w3.org/1998/Math/MathML",gs="http://www.w3.org/2000/svg",jt="http://www.w3.org/1999/xhtml";let rs=jt,ti=!1,Ei=null;const zn=Se({},[ei,gs,jt],Kn);let ys=null;const wr=["application/xhtml+xml","text/html"],_r="text/html";let Ue=null,ns=null;const Nr=i.createElement("form"),Fi=function(v){return v instanceof RegExp||v instanceof Function},W=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ns&&ns===v)){if((!v||typeof v!="object")&&(v={}),v=Ps(v),ys=wr.indexOf(v.PARSER_MEDIA_TYPE)===-1?_r:v.PARSER_MEDIA_TYPE,Ue=ys==="application/xhtml+xml"?Kn:Rr,w=$t(v,"ALLOWED_TAGS")?Se({},v.ALLOWED_TAGS,Ue):Z,ie=$t(v,"ALLOWED_ATTR")?Se({},v.ALLOWED_ATTR,Ue):le,Ei=$t(v,"ALLOWED_NAMESPACES")?Se({},v.ALLOWED_NAMESPACES,Kn):zn,Ai=$t(v,"ADD_URI_SAFE_ATTR")?Se(Ps(br),v.ADD_URI_SAFE_ATTR,Ue):br,jr=$t(v,"ADD_DATA_URI_TAGS")?Se(Ps(vr),v.ADD_DATA_URI_TAGS,Ue):vr,It=$t(v,"FORBID_CONTENTS")?Se({},v.FORBID_CONTENTS,Ue):Zs,Ee=$t(v,"FORBID_TAGS")?Se({},v.FORBID_TAGS,Ue):{},G=$t(v,"FORBID_ATTR")?Se({},v.FORBID_ATTR,Ue):{},Je=$t(v,"USE_PROFILES")?v.USE_PROFILES:!1,oe=v.ALLOW_ARIA_ATTR!==!1,de=v.ALLOW_DATA_ATTR!==!1,P=v.ALLOW_UNKNOWN_PROTOCOLS||!1,J=v.ALLOW_SELF_CLOSE_IN_ATTR!==!1,re=v.SAFE_FOR_TEMPLATES||!1,Te=v.SAFE_FOR_XML!==!1,it=v.WHOLE_DOCUMENT||!1,Vt=v.RETURN_DOM||!1,ps=v.RETURN_DOM_FRAGMENT||!1,fs=v.RETURN_TRUSTED_TYPE||!1,Ds=v.FORCE_BODY||!1,Xs=v.SANITIZE_DOM!==!1,Ls=v.SANITIZE_NAMED_PROPS||!1,ne=v.KEEP_CONTENT!==!1,_e=v.IN_PLACE||!1,O=v.ALLOWED_URI_REGEXP||Vd,rs=v.NAMESPACE||jt,pe=v.CUSTOM_ELEMENT_HANDLING||{},v.CUSTOM_ELEMENT_HANDLING&&Fi(v.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(pe.tagNameCheck=v.CUSTOM_ELEMENT_HANDLING.tagNameCheck),v.CUSTOM_ELEMENT_HANDLING&&Fi(v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(pe.attributeNameCheck=v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),v.CUSTOM_ELEMENT_HANDLING&&typeof v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(pe.allowCustomizedBuiltInElements=v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),re&&(de=!1),ps&&(Vt=!0),Je&&(w=Se({},Nl),ie=[],Je.html===!0&&(Se(w,_l),Se(ie,Cl)),Je.svg===!0&&(Se(w,Qn),Se(ie,ea),Se(ie,Fr)),Je.svgFilters===!0&&(Se(w,Xn),Se(ie,ea),Se(ie,Fr)),Je.mathMl===!0&&(Se(w,Zn),Se(ie,Sl),Se(ie,Fr))),v.ADD_TAGS&&(w===Z&&(w=Ps(w)),Se(w,v.ADD_TAGS,Ue)),v.ADD_ATTR&&(ie===le&&(ie=Ps(ie)),Se(ie,v.ADD_ATTR,Ue)),v.ADD_URI_SAFE_ATTR&&Se(Ai,v.ADD_URI_SAFE_ATTR,Ue),v.FORBID_CONTENTS&&(It===Zs&&(It=Ps(It)),Se(It,v.FORBID_CONTENTS,Ue)),ne&&(w["#text"]=!0),it&&Se(w,["html","head","body"]),w.table&&(Se(w,["tbody"]),delete Ee.tbody),v.TRUSTED_TYPES_POLICY){if(typeof v.TRUSTED_TYPES_POLICY.createHTML!="function")throw Bi('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof v.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Bi('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');B=v.TRUSTED_TYPES_POLICY,C=B.createHTML("")}else B===void 0&&(B=Ky(p,n)),B!==null&&typeof C=="string"&&(C=B.createHTML(""));dt&&dt(v),ns=v}},we=Se({},["mi","mo","mn","ms","mtext"]),Pe=Se({},["foreignobject","annotation-xml"]),K=Se({},["title","style","font","a","script"]),be=Se({},[...Qn,...Xn,...Ry]),Ms=Se({},[...Zn,...Oy]),si=function(v){let Q=U(v);(!Q||!Q.tagName)&&(Q={namespaceURI:rs,tagName:"template"});const ce=Rr(v.tagName),De=Rr(Q.tagName);return Ei[v.namespaceURI]?v.namespaceURI===gs?Q.namespaceURI===jt?ce==="svg":Q.namespaceURI===ei?ce==="svg"&&(De==="annotation-xml"||we[De]):!!be[ce]:v.namespaceURI===ei?Q.namespaceURI===jt?ce==="math":Q.namespaceURI===gs?ce==="math"&&Pe[De]:!!Ms[ce]:v.namespaceURI===jt?Q.namespaceURI===gs&&!Pe[De]||Q.namespaceURI===ei&&!we[De]?!1:!Ms[ce]&&(K[ce]||!be[ce]):!!(ys==="application/xhtml+xml"&&Ei[v.namespaceURI]):!1},Qe=function(v){Mi(s.removed,{element:v});try{U(v).removeChild(v)}catch{F(v)}},Cr=function(v,Q){try{Mi(s.removed,{attribute:Q.getAttributeNode(v),from:Q})}catch{Mi(s.removed,{attribute:null,from:Q})}if(Q.removeAttribute(v),v==="is"&&!ie[v])if(Vt||ps)try{Qe(Q)}catch{}else try{Q.setAttribute(v,"")}catch{}},Ao=function(v){let Q=null,ce=null;if(Ds)v="<remove></remove>"+v;else{const Ke=wl(v,/^[\r\n\t ]+/);ce=Ke&&Ke[0]}ys==="application/xhtml+xml"&&rs===jt&&(v='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+v+"</body></html>");const De=B?B.createHTML(v):v;if(rs===jt)try{Q=new h().parseFromString(De,ys)}catch{}if(!Q||!Q.documentElement){Q=E.createDocument(rs,"template",null);try{Q.documentElement.innerHTML=ti?C:De}catch{}}const Xe=Q.body||Q.documentElement;return v&&ce&&Xe.insertBefore(i.createTextNode(ce),Xe.childNodes[0]||null),rs===jt?q.call(Q,it?"html":"body")[0]:it?Q.documentElement:Xe},Eo=function(v){return j.call(v.ownerDocument||v,v,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT|m.SHOW_PROCESSING_INSTRUCTION|m.SHOW_CDATA_SECTION,null)},Fo=function(v){return v instanceof u&&(typeof v.nodeName!="string"||typeof v.textContent!="string"||typeof v.removeChild!="function"||!(v.attributes instanceof c)||typeof v.removeAttribute!="function"||typeof v.setAttribute!="function"||typeof v.namespaceURI!="string"||typeof v.insertBefore!="function"||typeof v.hasChildNodes!="function")},Do=function(v){return typeof l=="function"&&v instanceof l},as=function(v,Q,ce){z[v]&&Er(z[v],De=>{De.call(s,Q,ce,ns)})},Lo=function(v){let Q=null;if(as("beforeSanitizeElements",v,null),Fo(v))return Qe(v),!0;const ce=Ue(v.nodeName);if(as("uponSanitizeElement",v,{tagName:ce,allowedTags:w}),v.hasChildNodes()&&!Do(v.firstElementChild)&&nt(/<[/\w]/g,v.innerHTML)&&nt(/<[/\w]/g,v.textContent)||v.nodeType===$i.progressingInstruction||Te&&v.nodeType===$i.comment&&nt(/<[/\w]/g,v.data))return Qe(v),!0;if(!w[ce]||Ee[ce]){if(!Ee[ce]&&Po(ce)&&(pe.tagNameCheck instanceof RegExp&&nt(pe.tagNameCheck,ce)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(ce)))return!1;if(ne&&!It[ce]){const De=U(v)||v.parentNode,Xe=A(v)||v.childNodes;if(Xe&&De){const Ke=Xe.length;for(let mt=Ke-1;mt>=0;--mt){const Ht=k(Xe[mt],!0);Ht.__removalCount=(v.__removalCount||0)+1,De.insertBefore(Ht,L(v))}}}return Qe(v),!0}return v instanceof d&&!si(v)||(ce==="noscript"||ce==="noembed"||ce==="noframes")&&nt(/<\/no(script|embed|frames)/i,v.innerHTML)?(Qe(v),!0):(re&&v.nodeType===$i.text&&(Q=v.textContent,Er([V,te,Y],De=>{Q=Pi(Q,De," ")}),v.textContent!==Q&&(Mi(s.removed,{element:v.cloneNode()}),v.textContent=Q)),as("afterSanitizeElements",v,null),!1)},Mo=function(v,Q,ce){if(Xs&&(Q==="id"||Q==="name")&&(ce in i||ce in Nr))return!1;if(!(de&&!G[Q]&&nt(x,Q))){if(!(oe&&nt(f,Q))){if(!ie[Q]||G[Q]){if(!(Po(v)&&(pe.tagNameCheck instanceof RegExp&&nt(pe.tagNameCheck,v)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(v))&&(pe.attributeNameCheck instanceof RegExp&&nt(pe.attributeNameCheck,Q)||pe.attributeNameCheck instanceof Function&&pe.attributeNameCheck(Q))||Q==="is"&&pe.allowCustomizedBuiltInElements&&(pe.tagNameCheck instanceof RegExp&&nt(pe.tagNameCheck,ce)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(ce))))return!1}else if(!Ai[Q]){if(!nt(O,Pi(ce,D,""))){if(!((Q==="src"||Q==="xlink:href"||Q==="href")&&v!=="script"&&Py(ce,"data:")===0&&jr[v])){if(!(P&&!nt(g,Pi(ce,D,"")))){if(ce)return!1}}}}}}return!0},Po=function(v){return v!=="annotation-xml"&&wl(v,T)},Bo=function(v){as("beforeSanitizeAttributes",v,null);const{attributes:Q}=v;if(!Q)return;const ce={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ie};let De=Q.length;for(;De--;){const Xe=Q[De],{name:Ke,namespaceURI:mt,value:Ht}=Xe,Di=Ue(Ke);let rt=Ke==="value"?Ht:By(Ht);if(ce.attrName=Di,ce.attrValue=rt,ce.keepAttr=!0,ce.forceKeepAttr=void 0,as("uponSanitizeAttribute",v,ce),rt=ce.attrValue,Te&&nt(/((--!?|])>)|<\/(style|title)/i,rt)){Cr(Ke,v);continue}if(ce.forceKeepAttr||(Cr(Ke,v),!ce.keepAttr))continue;if(!J&&nt(/\/>/i,rt)){Cr(Ke,v);continue}re&&Er([V,te,Y],$o=>{rt=Pi(rt,$o," ")});const Io=Ue(v.nodeName);if(Mo(Io,Di,rt)){if(Ls&&(Di==="id"||Di==="name")&&(Cr(Ke,v),rt=Ti+rt),B&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!mt)switch(p.getAttributeType(Io,Di)){case"TrustedHTML":{rt=B.createHTML(rt);break}case"TrustedScriptURL":{rt=B.createScriptURL(rt);break}}try{mt?v.setAttributeNS(mt,Ke,rt):v.setAttribute(Ke,rt),Fo(v)?Qe(v):bl(s.removed)}catch{}}}as("afterSanitizeAttributes",v,null)},Cm=function he(v){let Q=null;const ce=Eo(v);for(as("beforeSanitizeShadowDOM",v,null);Q=ce.nextNode();)as("uponSanitizeShadowNode",Q,null),!Lo(Q)&&(Q.content instanceof o&&he(Q.content),Bo(Q));as("afterSanitizeShadowDOM",v,null)};return s.sanitize=function(he){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=null,ce=null,De=null,Xe=null;if(ti=!he,ti&&(he="<!-->"),typeof he!="string"&&!Do(he))if(typeof he.toString=="function"){if(he=he.toString(),typeof he!="string")throw Bi("dirty is not a string, aborting")}else throw Bi("toString is not a function");if(!s.isSupported)return he;if(Bt||W(v),s.removed=[],typeof he=="string"&&(_e=!1),_e){if(he.nodeName){const Ht=Ue(he.nodeName);if(!w[Ht]||Ee[Ht])throw Bi("root node is forbidden and cannot be sanitized in-place")}}else if(he instanceof l)Q=Ao("<!---->"),ce=Q.ownerDocument.importNode(he,!0),ce.nodeType===$i.element&&ce.nodeName==="BODY"||ce.nodeName==="HTML"?Q=ce:Q.appendChild(ce);else{if(!Vt&&!re&&!it&&he.indexOf("<")===-1)return B&&fs?B.createHTML(he):he;if(Q=Ao(he),!Q)return Vt?null:fs?C:""}Q&&Ds&&Qe(Q.firstChild);const Ke=Eo(_e?he:Q);for(;De=Ke.nextNode();)Lo(De)||(De.content instanceof o&&Cm(De.content),Bo(De));if(_e)return he;if(Vt){if(ps)for(Xe=M.call(Q.ownerDocument);Q.firstChild;)Xe.appendChild(Q.firstChild);else Xe=Q;return(ie.shadowroot||ie.shadowrootmode)&&(Xe=H.call(r,Xe,!0)),Xe}let mt=it?Q.outerHTML:Q.innerHTML;return it&&w["!doctype"]&&Q.ownerDocument&&Q.ownerDocument.doctype&&Q.ownerDocument.doctype.name&&nt(Hd,Q.ownerDocument.doctype.name)&&(mt="<!DOCTYPE "+Q.ownerDocument.doctype.name+`>
`+mt),re&&Er([V,te,Y],Ht=>{mt=Pi(mt,Ht," ")}),B&&fs?B.createHTML(mt):mt},s.setConfig=function(){let he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};W(he),Bt=!0},s.clearConfig=function(){ns=null,Bt=!1},s.isValidAttribute=function(he,v,Q){ns||W({});const ce=Ue(he),De=Ue(v);return Mo(ce,De,Q)},s.addHook=function(he,v){typeof v=="function"&&(z[he]=z[he]||[],Mi(z[he],v))},s.removeHook=function(he){if(z[he])return bl(z[he])},s.removeHooks=function(he){z[he]&&(z[he]=[])},s.removeAllHooks=function(){z={}},s}var fi=Yd();const Or={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const s=t/255;return t>.03928?Math.pow((s+.055)/1.055,2.4):s/12.92},hue2rgb:(t,s,i)=>(i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(s-t)*6*i:i<1/2?s:i<2/3?t+(s-t)*(2/3-i)*6:t),hsl2rgb:({h:t,s,l:i},r)=>{if(!s)return i*2.55;t/=360,s/=100,i/=100;const n=i<.5?i*(1+s):i+s-i*s,o=2*i-n;switch(r){case"r":return Or.hue2rgb(o,n,t+1/3)*255;case"g":return Or.hue2rgb(o,n,t)*255;case"b":return Or.hue2rgb(o,n,t-1/3)*255}},rgb2hsl:({r:t,g:s,b:i},r)=>{t/=255,s/=255,i/=255;const n=Math.max(t,s,i),o=Math.min(t,s,i),a=(n+o)/2;if(r==="l")return a*100;if(n===o)return 0;const l=n-o,d=a>.5?l/(2-n-o):l/(n+o);if(r==="s")return d*100;switch(n){case t:return((s-i)/l+(s<i?6:0))*60;case s:return((i-t)/l+2)*60;case i:return((t-s)/l+4)*60;default:return-1}}},Qy={clamp:(t,s,i)=>s>i?Math.min(s,Math.max(i,t)):Math.min(i,Math.max(s,t)),round:t=>Math.round(t*1e10)/1e10},Xy={dec2hex:t=>{const s=Math.round(t).toString(16);return s.length>1?s:`0${s}`}},je={channel:Or,lang:Qy,unit:Xy},vs={};for(let t=0;t<=255;t++)vs[t]=je.unit.dec2hex(t);const Ze={ALL:0,RGB:1,HSL:2};class Zy{constructor(){this.type=Ze.ALL}get(){return this.type}set(s){if(this.type&&this.type!==s)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=s}reset(){this.type=Ze.ALL}is(s){return this.type===s}}class e0{constructor(s,i){this.color=i,this.changed=!1,this.data=s,this.type=new Zy}set(s,i){return this.color=i,this.changed=!1,this.data=s,this.type.type=Ze.ALL,this}_ensureHSL(){const s=this.data,{h:i,s:r,l:n}=s;i===void 0&&(s.h=je.channel.rgb2hsl(s,"h")),r===void 0&&(s.s=je.channel.rgb2hsl(s,"s")),n===void 0&&(s.l=je.channel.rgb2hsl(s,"l"))}_ensureRGB(){const s=this.data,{r:i,g:r,b:n}=s;i===void 0&&(s.r=je.channel.hsl2rgb(s,"r")),r===void 0&&(s.g=je.channel.hsl2rgb(s,"g")),n===void 0&&(s.b=je.channel.hsl2rgb(s,"b"))}get r(){const s=this.data,i=s.r;return!this.type.is(Ze.HSL)&&i!==void 0?i:(this._ensureHSL(),je.channel.hsl2rgb(s,"r"))}get g(){const s=this.data,i=s.g;return!this.type.is(Ze.HSL)&&i!==void 0?i:(this._ensureHSL(),je.channel.hsl2rgb(s,"g"))}get b(){const s=this.data,i=s.b;return!this.type.is(Ze.HSL)&&i!==void 0?i:(this._ensureHSL(),je.channel.hsl2rgb(s,"b"))}get h(){const s=this.data,i=s.h;return!this.type.is(Ze.RGB)&&i!==void 0?i:(this._ensureRGB(),je.channel.rgb2hsl(s,"h"))}get s(){const s=this.data,i=s.s;return!this.type.is(Ze.RGB)&&i!==void 0?i:(this._ensureRGB(),je.channel.rgb2hsl(s,"s"))}get l(){const s=this.data,i=s.l;return!this.type.is(Ze.RGB)&&i!==void 0?i:(this._ensureRGB(),je.channel.rgb2hsl(s,"l"))}get a(){return this.data.a}set r(s){this.type.set(Ze.RGB),this.changed=!0,this.data.r=s}set g(s){this.type.set(Ze.RGB),this.changed=!0,this.data.g=s}set b(s){this.type.set(Ze.RGB),this.changed=!0,this.data.b=s}set h(s){this.type.set(Ze.HSL),this.changed=!0,this.data.h=s}set s(s){this.type.set(Ze.HSL),this.changed=!0,this.data.s=s}set l(s){this.type.set(Ze.HSL),this.changed=!0,this.data.l=s}set a(s){this.changed=!0,this.data.a=s}}const Tn=new e0({r:0,g:0,b:0,a:0},"transparent"),hi={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(t.charCodeAt(0)!==35)return;const s=t.match(hi.re);if(!s)return;const i=s[1],r=parseInt(i,16),n=i.length,o=n%4===0,a=n>4,l=a?1:17,d=a?8:4,m=o?0:-1,c=a?255:15;return Tn.set({r:(r>>d*(m+3)&c)*l,g:(r>>d*(m+2)&c)*l,b:(r>>d*(m+1)&c)*l,a:o?(r&c)*l/255:1},t)},stringify:t=>{const{r:s,g:i,b:r,a:n}=t;return n<1?`#${vs[Math.round(s)]}${vs[Math.round(i)]}${vs[Math.round(r)]}${vs[Math.round(n*255)]}`:`#${vs[Math.round(s)]}${vs[Math.round(i)]}${vs[Math.round(r)]}`}},Rs={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const s=t.match(Rs.hueRe);if(s){const[,i,r]=s;switch(r){case"grad":return je.channel.clamp.h(parseFloat(i)*.9);case"rad":return je.channel.clamp.h(parseFloat(i)*180/Math.PI);case"turn":return je.channel.clamp.h(parseFloat(i)*360)}}return je.channel.clamp.h(parseFloat(t))},parse:t=>{const s=t.charCodeAt(0);if(s!==104&&s!==72)return;const i=t.match(Rs.re);if(!i)return;const[,r,n,o,a,l]=i;return Tn.set({h:Rs._hue2deg(r),s:je.channel.clamp.s(parseFloat(n)),l:je.channel.clamp.l(parseFloat(o)),a:a?je.channel.clamp.a(l?parseFloat(a)/100:parseFloat(a)):1},t)},stringify:t=>{const{h:s,s:i,l:r,a:n}=t;return n<1?`hsla(${je.lang.round(s)}, ${je.lang.round(i)}%, ${je.lang.round(r)}%, ${n})`:`hsl(${je.lang.round(s)}, ${je.lang.round(i)}%, ${je.lang.round(r)}%)`}},Qi={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const s=Qi.colors[t];if(s)return hi.parse(s)},stringify:t=>{const s=hi.stringify(t);for(const i in Qi.colors)if(Qi.colors[i]===s)return i}},Vi={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const s=t.charCodeAt(0);if(s!==114&&s!==82)return;const i=t.match(Vi.re);if(!i)return;const[,r,n,o,a,l,d,m,c]=i;return Tn.set({r:je.channel.clamp.r(n?parseFloat(r)*2.55:parseFloat(r)),g:je.channel.clamp.g(a?parseFloat(o)*2.55:parseFloat(o)),b:je.channel.clamp.b(d?parseFloat(l)*2.55:parseFloat(l)),a:m?je.channel.clamp.a(c?parseFloat(m)/100:parseFloat(m)):1},t)},stringify:t=>{const{r:s,g:i,b:r,a:n}=t;return n<1?`rgba(${je.lang.round(s)}, ${je.lang.round(i)}, ${je.lang.round(r)}, ${je.lang.round(n)})`:`rgb(${je.lang.round(s)}, ${je.lang.round(i)}, ${je.lang.round(r)})`}},es={format:{keyword:Qi,hex:hi,rgb:Vi,rgba:Vi,hsl:Rs,hsla:Rs},parse:t=>{if(typeof t!="string")return t;const s=hi.parse(t)||Vi.parse(t)||Rs.parse(t)||Qi.parse(t);if(s)return s;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(Ze.HSL)||t.data.r===void 0?Rs.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?Vi.stringify(t):hi.stringify(t)},Jd=(t,s)=>{const i=es.parse(t);for(const r in s)i[r]=je.channel.clamp[r](s[r]);return es.stringify(i)},Xi=(t,s,i=0,r=1)=>{if(typeof t!="number")return Jd(t,{a:s});const n=Tn.set({r:je.channel.clamp.r(t),g:je.channel.clamp.g(s),b:je.channel.clamp.b(i),a:je.channel.clamp.a(r)});return es.stringify(n)},t0=t=>{const{r:s,g:i,b:r}=es.parse(t),n=.2126*je.channel.toLinear(s)+.7152*je.channel.toLinear(i)+.0722*je.channel.toLinear(r);return je.lang.round(n)},s0=t=>t0(t)>=.5,pr=t=>!s0(t),Kd=(t,s,i)=>{const r=es.parse(t),n=r[s],o=je.channel.clamp[s](n+i);return n!==o&&(r[s]=o),es.stringify(r)},me=(t,s)=>Kd(t,"l",s),ge=(t,s)=>Kd(t,"l",-s),S=(t,s)=>{const i=es.parse(t),r={};for(const n in s)s[n]&&(r[n]=i[n]+s[n]);return Jd(t,r)},i0=(t,s,i=50)=>{const{r,g:n,b:o,a}=es.parse(t),{r:l,g:d,b:m,a:c}=es.parse(s),u=i/100,h=u*2-1,p=a-c,k=((h*p===-1?h:(h+p)/(1+h*p))+1)/2,F=1-k,L=r*k+l*F,A=n*k+d*F,U=o*k+m*F,B=a*u+c*(1-u);return Xi(L,A,U,B)},ee=(t,s=100)=>{const i=es.parse(t);return i.r=255-i.r,i.g=255-i.g,i.b=255-i.b,i0(i,t,s)};var Qd=typeof global=="object"&&global&&global.Object===Object&&global,r0=typeof self=="object"&&self&&self.Object===Object&&self,is=Qd||r0||Function("return this")(),an=is.Symbol,Xd=Object.prototype,n0=Xd.hasOwnProperty,a0=Xd.toString,Ri=an?an.toStringTag:void 0;function o0(t){var s=n0.call(t,Ri),i=t[Ri];try{t[Ri]=void 0;var r=!0}catch{}var n=a0.call(t);return r&&(s?t[Ri]=i:delete t[Ri]),n}var l0=Object.prototype,c0=l0.toString;function d0(t){return c0.call(t)}var h0="[object Null]",m0="[object Undefined]",Tl=an?an.toStringTag:void 0;function Ci(t){return t==null?t===void 0?m0:h0:Tl&&Tl in Object(t)?o0(t):d0(t)}function Js(t){var s=typeof t;return t!=null&&(s=="object"||s=="function")}var u0="[object AsyncFunction]",x0="[object Function]",p0="[object GeneratorFunction]",f0="[object Proxy]";function ao(t){if(!Js(t))return!1;var s=Ci(t);return s==x0||s==p0||s==u0||s==f0}var ta=is["__core-js_shared__"],Al=(function(){var t=/[^.]+$/.exec(ta&&ta.keys&&ta.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function g0(t){return!!Al&&Al in t}var y0=Function.prototype,j0=y0.toString;function Ks(t){if(t!=null){try{return j0.call(t)}catch{}try{return t+""}catch{}}return""}var v0=/[\\^$.*+?()[\]{}|]/g,b0=/^\[object .+?Constructor\]$/,w0=Function.prototype,_0=Object.prototype,N0=w0.toString,C0=_0.hasOwnProperty,S0=RegExp("^"+N0.call(C0).replace(v0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function k0(t){if(!Js(t)||g0(t))return!1;var s=ao(t)?S0:b0;return s.test(Ks(t))}function T0(t,s){return t==null?void 0:t[s]}function Qs(t,s){var i=T0(t,s);return k0(i)?i:void 0}var cr=Qs(Object,"create");function A0(){this.__data__=cr?cr(null):{},this.size=0}function E0(t){var s=this.has(t)&&delete this.__data__[t];return this.size-=s?1:0,s}var F0="__lodash_hash_undefined__",D0=Object.prototype,L0=D0.hasOwnProperty;function M0(t){var s=this.__data__;if(cr){var i=s[t];return i===F0?void 0:i}return L0.call(s,t)?s[t]:void 0}var P0=Object.prototype,B0=P0.hasOwnProperty;function I0(t){var s=this.__data__;return cr?s[t]!==void 0:B0.call(s,t)}var $0="__lodash_hash_undefined__";function R0(t,s){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=cr&&s===void 0?$0:s,this}function Hs(t){var s=-1,i=t==null?0:t.length;for(this.clear();++s<i;){var r=t[s];this.set(r[0],r[1])}}Hs.prototype.clear=A0;Hs.prototype.delete=E0;Hs.prototype.get=M0;Hs.prototype.has=I0;Hs.prototype.set=R0;function O0(){this.__data__=[],this.size=0}function An(t,s){return t===s||t!==t&&s!==s}function En(t,s){for(var i=t.length;i--;)if(An(t[i][0],s))return i;return-1}var z0=Array.prototype,q0=z0.splice;function U0(t){var s=this.__data__,i=En(s,t);if(i<0)return!1;var r=s.length-1;return i==r?s.pop():q0.call(s,i,1),--this.size,!0}function G0(t){var s=this.__data__,i=En(s,t);return i<0?void 0:s[i][1]}function W0(t){return En(this.__data__,t)>-1}function V0(t,s){var i=this.__data__,r=En(i,t);return r<0?(++this.size,i.push([t,s])):i[r][1]=s,this}function xs(t){var s=-1,i=t==null?0:t.length;for(this.clear();++s<i;){var r=t[s];this.set(r[0],r[1])}}xs.prototype.clear=O0;xs.prototype.delete=U0;xs.prototype.get=G0;xs.prototype.has=W0;xs.prototype.set=V0;var dr=Qs(is,"Map");function H0(){this.size=0,this.__data__={hash:new Hs,map:new(dr||xs),string:new Hs}}function Y0(t){var s=typeof t;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?t!=="__proto__":t===null}function Fn(t,s){var i=t.__data__;return Y0(s)?i[typeof s=="string"?"string":"hash"]:i.map}function J0(t){var s=Fn(this,t).delete(t);return this.size-=s?1:0,s}function K0(t){return Fn(this,t).get(t)}function Q0(t){return Fn(this,t).has(t)}function X0(t,s){var i=Fn(this,t),r=i.size;return i.set(t,s),this.size+=i.size==r?0:1,this}function Fs(t){var s=-1,i=t==null?0:t.length;for(this.clear();++s<i;){var r=t[s];this.set(r[0],r[1])}}Fs.prototype.clear=H0;Fs.prototype.delete=J0;Fs.prototype.get=K0;Fs.prototype.has=Q0;Fs.prototype.set=X0;var Z0="Expected a function";function fr(t,s){if(typeof t!="function"||s!=null&&typeof s!="function")throw new TypeError(Z0);var i=function(){var r=arguments,n=s?s.apply(this,r):r[0],o=i.cache;if(o.has(n))return o.get(n);var a=t.apply(this,r);return i.cache=o.set(n,a)||o,a};return i.cache=new(fr.Cache||Fs),i}fr.Cache=Fs;function ej(){this.__data__=new xs,this.size=0}function tj(t){var s=this.__data__,i=s.delete(t);return this.size=s.size,i}function sj(t){return this.__data__.get(t)}function ij(t){return this.__data__.has(t)}var rj=200;function nj(t,s){var i=this.__data__;if(i instanceof xs){var r=i.__data__;if(!dr||r.length<rj-1)return r.push([t,s]),this.size=++i.size,this;i=this.__data__=new Fs(r)}return i.set(t,s),this.size=i.size,this}function Si(t){var s=this.__data__=new xs(t);this.size=s.size}Si.prototype.clear=ej;Si.prototype.delete=tj;Si.prototype.get=sj;Si.prototype.has=ij;Si.prototype.set=nj;var on=(function(){try{var t=Qs(Object,"defineProperty");return t({},"",{}),t}catch{}})();function oo(t,s,i){s=="__proto__"&&on?on(t,s,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[s]=i}function ka(t,s,i){(i!==void 0&&!An(t[s],i)||i===void 0&&!(s in t))&&oo(t,s,i)}function aj(t){return function(s,i,r){for(var n=-1,o=Object(s),a=r(s),l=a.length;l--;){var d=a[++n];if(i(o[d],d,o)===!1)break}return s}}var oj=aj(),Zd=typeof exports=="object"&&exports&&!exports.nodeType&&exports,El=Zd&&typeof module=="object"&&module&&!module.nodeType&&module,lj=El&&El.exports===Zd,Fl=lj?is.Buffer:void 0,Dl=Fl?Fl.allocUnsafe:void 0;function cj(t,s){if(s)return t.slice();var i=t.length,r=Dl?Dl(i):new t.constructor(i);return t.copy(r),r}var Ll=is.Uint8Array;function dj(t){var s=new t.constructor(t.byteLength);return new Ll(s).set(new Ll(t)),s}function hj(t,s){var i=s?dj(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function mj(t,s){var i=-1,r=t.length;for(s||(s=Array(r));++i<r;)s[i]=t[i];return s}var Ml=Object.create,uj=(function(){function t(){}return function(s){if(!Js(s))return{};if(Ml)return Ml(s);t.prototype=s;var i=new t;return t.prototype=void 0,i}})();function eh(t,s){return function(i){return t(s(i))}}var th=eh(Object.getPrototypeOf,Object),xj=Object.prototype;function Dn(t){var s=t&&t.constructor,i=typeof s=="function"&&s.prototype||xj;return t===i}function pj(t){return typeof t.constructor=="function"&&!Dn(t)?uj(th(t)):{}}function gr(t){return t!=null&&typeof t=="object"}var fj="[object Arguments]";function Pl(t){return gr(t)&&Ci(t)==fj}var sh=Object.prototype,gj=sh.hasOwnProperty,yj=sh.propertyIsEnumerable,ln=Pl((function(){return arguments})())?Pl:function(t){return gr(t)&&gj.call(t,"callee")&&!yj.call(t,"callee")},cn=Array.isArray,jj=9007199254740991;function ih(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=jj}function Ln(t){return t!=null&&ih(t.length)&&!ao(t)}function vj(t){return gr(t)&&Ln(t)}function bj(){return!1}var rh=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Bl=rh&&typeof module=="object"&&module&&!module.nodeType&&module,wj=Bl&&Bl.exports===rh,Il=wj?is.Buffer:void 0,_j=Il?Il.isBuffer:void 0,lo=_j||bj,Nj="[object Object]",Cj=Function.prototype,Sj=Object.prototype,nh=Cj.toString,kj=Sj.hasOwnProperty,Tj=nh.call(Object);function Aj(t){if(!gr(t)||Ci(t)!=Nj)return!1;var s=th(t);if(s===null)return!0;var i=kj.call(s,"constructor")&&s.constructor;return typeof i=="function"&&i instanceof i&&nh.call(i)==Tj}var Ej="[object Arguments]",Fj="[object Array]",Dj="[object Boolean]",Lj="[object Date]",Mj="[object Error]",Pj="[object Function]",Bj="[object Map]",Ij="[object Number]",$j="[object Object]",Rj="[object RegExp]",Oj="[object Set]",zj="[object String]",qj="[object WeakMap]",Uj="[object ArrayBuffer]",Gj="[object DataView]",Wj="[object Float32Array]",Vj="[object Float64Array]",Hj="[object Int8Array]",Yj="[object Int16Array]",Jj="[object Int32Array]",Kj="[object Uint8Array]",Qj="[object Uint8ClampedArray]",Xj="[object Uint16Array]",Zj="[object Uint32Array]",Le={};Le[Wj]=Le[Vj]=Le[Hj]=Le[Yj]=Le[Jj]=Le[Kj]=Le[Qj]=Le[Xj]=Le[Zj]=!0;Le[Ej]=Le[Fj]=Le[Uj]=Le[Dj]=Le[Gj]=Le[Lj]=Le[Mj]=Le[Pj]=Le[Bj]=Le[Ij]=Le[$j]=Le[Rj]=Le[Oj]=Le[zj]=Le[qj]=!1;function ev(t){return gr(t)&&ih(t.length)&&!!Le[Ci(t)]}function tv(t){return function(s){return t(s)}}var ah=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Zi=ah&&typeof module=="object"&&module&&!module.nodeType&&module,sv=Zi&&Zi.exports===ah,sa=sv&&Qd.process,$l=(function(){try{var t=Zi&&Zi.require&&Zi.require("util").types;return t||sa&&sa.binding&&sa.binding("util")}catch{}})(),Rl=$l&&$l.isTypedArray,co=Rl?tv(Rl):ev;function Ta(t,s){if(!(s==="constructor"&&typeof t[s]=="function")&&s!="__proto__")return t[s]}var iv=Object.prototype,rv=iv.hasOwnProperty;function nv(t,s,i){var r=t[s];(!(rv.call(t,s)&&An(r,i))||i===void 0&&!(s in t))&&oo(t,s,i)}function av(t,s,i,r){var n=!i;i||(i={});for(var o=-1,a=s.length;++o<a;){var l=s[o],d=void 0;d===void 0&&(d=t[l]),n?oo(i,l,d):nv(i,l,d)}return i}function ov(t,s){for(var i=-1,r=Array(t);++i<t;)r[i]=s(i);return r}var lv=9007199254740991,cv=/^(?:0|[1-9]\d*)$/;function oh(t,s){var i=typeof t;return s=s??lv,!!s&&(i=="number"||i!="symbol"&&cv.test(t))&&t>-1&&t%1==0&&t<s}var dv=Object.prototype,hv=dv.hasOwnProperty;function mv(t,s){var i=cn(t),r=!i&&ln(t),n=!i&&!r&&lo(t),o=!i&&!r&&!n&&co(t),a=i||r||n||o,l=a?ov(t.length,String):[],d=l.length;for(var m in t)(s||hv.call(t,m))&&!(a&&(m=="length"||n&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||oh(m,d)))&&l.push(m);return l}function uv(t){var s=[];if(t!=null)for(var i in Object(t))s.push(i);return s}var xv=Object.prototype,pv=xv.hasOwnProperty;function fv(t){if(!Js(t))return uv(t);var s=Dn(t),i=[];for(var r in t)r=="constructor"&&(s||!pv.call(t,r))||i.push(r);return i}function lh(t){return Ln(t)?mv(t,!0):fv(t)}function gv(t){return av(t,lh(t))}function yv(t,s,i,r,n,o,a){var l=Ta(t,i),d=Ta(s,i),m=a.get(d);if(m){ka(t,i,m);return}var c=o?o(l,d,i+"",t,s,a):void 0,u=c===void 0;if(u){var h=cn(d),p=!h&&lo(d),b=!h&&!p&&co(d);c=d,h||p||b?cn(l)?c=l:vj(l)?c=mj(l):p?(u=!1,c=cj(d,!0)):b?(u=!1,c=hj(d,!0)):c=[]:Aj(d)||ln(d)?(c=l,ln(l)?c=gv(l):(!Js(l)||ao(l))&&(c=pj(d))):u=!1}u&&(a.set(d,c),n(c,d,r,o,a),a.delete(d)),ka(t,i,c)}function ch(t,s,i,r,n){t!==s&&oj(s,function(o,a){if(n||(n=new Si),Js(o))yv(t,s,a,i,ch,r,n);else{var l=r?r(Ta(t,a),o,a+"",t,s,n):void 0;l===void 0&&(l=o),ka(t,a,l)}},lh)}function dh(t){return t}function jv(t,s,i){switch(i.length){case 0:return t.call(s);case 1:return t.call(s,i[0]);case 2:return t.call(s,i[0],i[1]);case 3:return t.call(s,i[0],i[1],i[2])}return t.apply(s,i)}var Ol=Math.max;function vv(t,s,i){return s=Ol(s===void 0?t.length-1:s,0),function(){for(var r=arguments,n=-1,o=Ol(r.length-s,0),a=Array(o);++n<o;)a[n]=r[s+n];n=-1;for(var l=Array(s+1);++n<s;)l[n]=r[n];return l[s]=i(a),jv(t,this,l)}}function bv(t){return function(){return t}}var wv=on?function(t,s){return on(t,"toString",{configurable:!0,enumerable:!1,value:bv(s),writable:!0})}:dh,_v=800,Nv=16,Cv=Date.now;function Sv(t){var s=0,i=0;return function(){var r=Cv(),n=Nv-(r-i);if(i=r,n>0){if(++s>=_v)return arguments[0]}else s=0;return t.apply(void 0,arguments)}}var kv=Sv(wv);function Tv(t,s){return kv(vv(t,s,dh),t+"")}function Av(t,s,i){if(!Js(i))return!1;var r=typeof s;return(r=="number"?Ln(i)&&oh(s,i.length):r=="string"&&s in i)?An(i[s],t):!1}function Ev(t){return Tv(function(s,i){var r=-1,n=i.length,o=n>1?i[n-1]:void 0,a=n>2?i[2]:void 0;for(o=t.length>3&&typeof o=="function"?(n--,o):void 0,a&&Av(i[0],i[1],a)&&(o=n<3?void 0:o,n=1),s=Object(s);++r<n;){var l=i[r];l&&t(s,l,r,o)}return s})}var Fv=Ev(function(t,s,i){ch(t,s,i)}),hh="comm",mh="rule",uh="decl",Dv="@import",Lv="@namespace",Mv="@keyframes",Pv="@layer",xh=Math.abs,ho=String.fromCharCode;function ph(t){return t.trim()}function zr(t,s,i){return t.replace(s,i)}function Bv(t,s,i){return t.indexOf(s,i)}function mi(t,s){return t.charCodeAt(s)|0}function gi(t,s,i){return t.slice(s,i)}function Yt(t){return t.length}function Iv(t){return t.length}function Dr(t,s){return s.push(t),t}var Mn=1,yi=1,fh=0,Pt=0,Ve=0,ki="";function mo(t,s,i,r,n,o,a,l){return{value:t,root:s,parent:i,type:r,props:n,children:o,line:Mn,column:yi,length:a,return:"",siblings:l}}function $v(){return Ve}function Rv(){return Ve=Pt>0?mi(ki,--Pt):0,yi--,Ve===10&&(yi=1,Mn--),Ve}function zt(){return Ve=Pt<fh?mi(ki,Pt++):0,yi++,Ve===10&&(yi=1,Mn++),Ve}function _s(){return mi(ki,Pt)}function qr(){return Pt}function Pn(t,s){return gi(ki,t,s)}function hr(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ov(t){return Mn=yi=1,fh=Yt(ki=t),Pt=0,[]}function zv(t){return ki="",t}function ia(t){return ph(Pn(Pt-1,Aa(t===91?t+2:t===40?t+1:t)))}function qv(t){for(;(Ve=_s())&&Ve<33;)zt();return hr(t)>2||hr(Ve)>3?"":" "}function Uv(t,s){for(;--s&&zt()&&!(Ve<48||Ve>102||Ve>57&&Ve<65||Ve>70&&Ve<97););return Pn(t,qr()+(s<6&&_s()==32&&zt()==32))}function Aa(t){for(;zt();)switch(Ve){case t:return Pt;case 34:case 39:t!==34&&t!==39&&Aa(Ve);break;case 40:t===41&&Aa(t);break;case 92:zt();break}return Pt}function Gv(t,s){for(;zt()&&t+Ve!==57;)if(t+Ve===84&&_s()===47)break;return"/*"+Pn(s,Pt-1)+"*"+ho(t===47?t:zt())}function Wv(t){for(;!hr(_s());)zt();return Pn(t,Pt)}function Vv(t){return zv(Ur("",null,null,null,[""],t=Ov(t),0,[0],t))}function Ur(t,s,i,r,n,o,a,l,d){for(var m=0,c=0,u=a,h=0,p=0,b=0,k=1,F=1,L=1,A=0,U="",B=n,C=o,E=r,j=U;F;)switch(b=A,A=zt()){case 40:if(b!=108&&mi(j,u-1)==58){Bv(j+=zr(ia(A),"&","&\f"),"&\f",xh(m?l[m-1]:0))!=-1&&(L=-1);break}case 34:case 39:case 91:j+=ia(A);break;case 9:case 10:case 13:case 32:j+=qv(b);break;case 92:j+=Uv(qr()-1,7);continue;case 47:switch(_s()){case 42:case 47:Dr(Hv(Gv(zt(),qr()),s,i,d),d),(hr(b||1)==5||hr(_s()||1)==5)&&Yt(j)&&gi(j,-1,void 0)!==" "&&(j+=" ");break;default:j+="/"}break;case 123*k:l[m++]=Yt(j)*L;case 125*k:case 59:case 0:switch(A){case 0:case 125:F=0;case 59+c:L==-1&&(j=zr(j,/\f/g,"")),p>0&&(Yt(j)-u||k===0&&b===47)&&Dr(p>32?ql(j+";",r,i,u-1,d):ql(zr(j," ","")+";",r,i,u-2,d),d);break;case 59:j+=";";default:if(Dr(E=zl(j,s,i,m,c,n,l,U,B=[],C=[],u,o),o),A===123)if(c===0)Ur(j,s,E,E,B,o,u,l,C);else{switch(h){case 99:if(mi(j,3)===110)break;case 108:if(mi(j,2)===97)break;default:c=0;case 100:case 109:case 115:}c?Ur(t,E,E,r&&Dr(zl(t,E,E,0,0,n,l,U,n,B=[],u,C),C),n,C,u,l,r?B:C):Ur(j,E,E,E,[""],C,0,l,C)}}m=c=p=0,k=L=1,U=j="",u=a;break;case 58:u=1+Yt(j),p=b;default:if(k<1){if(A==123)--k;else if(A==125&&k++==0&&Rv()==125)continue}switch(j+=ho(A),A*k){case 38:L=c>0?1:(j+="\f",-1);break;case 44:l[m++]=(Yt(j)-1)*L,L=1;break;case 64:_s()===45&&(j+=ia(zt())),h=_s(),c=u=Yt(U=j+=Wv(qr())),A++;break;case 45:b===45&&Yt(j)==2&&(k=0)}}return o}function zl(t,s,i,r,n,o,a,l,d,m,c,u){for(var h=n-1,p=n===0?o:[""],b=Iv(p),k=0,F=0,L=0;k<r;++k)for(var A=0,U=gi(t,h+1,h=xh(F=a[k])),B=t;A<b;++A)(B=ph(F>0?p[A]+" "+U:zr(U,/&\f/g,p[A])))&&(d[L++]=B);return mo(t,s,i,n===0?mh:l,d,m,c,u)}function Hv(t,s,i,r){return mo(t,s,i,hh,ho($v()),gi(t,2,-2),0,r)}function ql(t,s,i,r,n){return mo(t,s,i,uh,gi(t,0,r),gi(t,r+1,-1),r,n)}function Ea(t,s){for(var i="",r=0;r<t.length;r++)i+=s(t[r],r,t,s)||"";return i}function Yv(t,s,i,r){switch(t.type){case Pv:if(t.children.length)break;case Dv:case Lv:case uh:return t.return=t.return||t.value;case hh:return"";case Mv:return t.return=t.value+"{"+Ea(t.children,r)+"}";case mh:if(!Yt(t.value=t.props.join(",")))return""}return Yt(i=Ea(t.children,r))?t.return=t.value+"{"+i+"}":""}var Jv=eh(Object.keys,Object),Kv=Object.prototype,Qv=Kv.hasOwnProperty;function Xv(t){if(!Dn(t))return Jv(t);var s=[];for(var i in Object(t))Qv.call(t,i)&&i!="constructor"&&s.push(i);return s}var Fa=Qs(is,"DataView"),Da=Qs(is,"Promise"),La=Qs(is,"Set"),Ma=Qs(is,"WeakMap"),Ul="[object Map]",Zv="[object Object]",Gl="[object Promise]",Wl="[object Set]",Vl="[object WeakMap]",Hl="[object DataView]",eb=Ks(Fa),tb=Ks(dr),sb=Ks(Da),ib=Ks(La),rb=Ks(Ma),Bs=Ci;(Fa&&Bs(new Fa(new ArrayBuffer(1)))!=Hl||dr&&Bs(new dr)!=Ul||Da&&Bs(Da.resolve())!=Gl||La&&Bs(new La)!=Wl||Ma&&Bs(new Ma)!=Vl)&&(Bs=function(t){var s=Ci(t),i=s==Zv?t.constructor:void 0,r=i?Ks(i):"";if(r)switch(r){case eb:return Hl;case tb:return Ul;case sb:return Gl;case ib:return Wl;case rb:return Vl}return s});var nb="[object Map]",ab="[object Set]",ob=Object.prototype,lb=ob.hasOwnProperty;function ra(t){if(t==null)return!0;if(Ln(t)&&(cn(t)||typeof t=="string"||typeof t.splice=="function"||lo(t)||co(t)||ln(t)))return!t.length;var s=Bs(t);if(s==nb||s==ab)return!t.size;if(Dn(t))return!Xv(t).length;for(var i in t)if(lb.call(t,i))return!1;return!0}const ls={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},fe={trace:(...t)=>{},debug:(...t)=>{},info:(...t)=>{},warn:(...t)=>{},error:(...t)=>{},fatal:(...t)=>{}},uo=function(t="fatal"){let s=ls.fatal;typeof t=="string"?(t=t.toLowerCase(),t in ls&&(s=ls[t])):typeof t=="number"&&(s=t),fe.trace=()=>{},fe.debug=()=>{},fe.info=()=>{},fe.warn=()=>{},fe.error=()=>{},fe.fatal=()=>{},s<=ls.fatal&&(fe.fatal=console.error?console.error.bind(console,St("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",St("FATAL"))),s<=ls.error&&(fe.error=console.error?console.error.bind(console,St("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",St("ERROR"))),s<=ls.warn&&(fe.warn=console.warn?console.warn.bind(console,St("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",St("WARN"))),s<=ls.info&&(fe.info=console.info?console.info.bind(console,St("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",St("INFO"))),s<=ls.debug&&(fe.debug=console.debug?console.debug.bind(console,St("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",St("DEBUG"))),s<=ls.trace&&(fe.trace=console.debug?console.debug.bind(console,St("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",St("TRACE")))},St=t=>`%c${Yx().format("ss.SSS")} : ${t} : `,yr=/<br\s*\/?>/gi,cb=t=>t?yh(t).replace(/\\n/g,"#br#").split("#br#"):[""],db=(()=>{let t=!1;return()=>{t||(hb(),t=!0)}})();function hb(){const t="data-temp-href-target";fi.addHook("beforeSanitizeAttributes",s=>{s.tagName==="A"&&s.hasAttribute("target")&&s.setAttribute(t,s.getAttribute("target")||"")}),fi.addHook("afterSanitizeAttributes",s=>{s.tagName==="A"&&s.hasAttribute(t)&&(s.setAttribute("target",s.getAttribute(t)||""),s.removeAttribute(t),s.getAttribute("target")==="_blank"&&s.setAttribute("rel","noopener"))})}const gh=t=>(db(),fi.sanitize(t)),Yl=(t,s)=>{var i;if(((i=s.flowchart)==null?void 0:i.htmlLabels)!==!1){const r=s.securityLevel;r==="antiscript"||r==="strict"?t=gh(t):r!=="loose"&&(t=yh(t),t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=t.replace(/=/g,"&equals;"),t=pb(t))}return t},ji=(t,s)=>t&&(s.dompurifyConfig?t=fi.sanitize(Yl(t,s),s.dompurifyConfig).toString():t=fi.sanitize(Yl(t,s),{FORBID_TAGS:["style"]}).toString(),t),mb=(t,s)=>typeof t=="string"?ji(t,s):t.flat().map(i=>ji(i,s)),ub=t=>yr.test(t),xb=t=>t.split(yr),pb=t=>t.replace(/#br#/g,"<br/>"),yh=t=>t.replace(yr,"#br#"),fb=t=>{let s="";return t&&(s=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,s=s.replaceAll(/\(/g,"\\("),s=s.replaceAll(/\)/g,"\\)")),s},jh=t=>!(t===!1||["false","null","0"].includes(String(t).trim().toLowerCase())),gb=function(...t){const s=t.filter(i=>!isNaN(i));return Math.max(...s)},yb=function(...t){const s=t.filter(i=>!isNaN(i));return Math.min(...s)},cS=function(t){const s=t.split(/(,)/),i=[];for(let r=0;r<s.length;r++){let n=s[r];if(n===","&&r>0&&r+1<s.length){const o=s[r-1],a=s[r+1];jb(o,a)&&(n=o+","+a,r++,i.pop())}i.push(vb(n))}return i.join("")},Pa=(t,s)=>Math.max(0,t.split(s).length-1),jb=(t,s)=>{const i=Pa(t,"~"),r=Pa(s,"~");return i===1&&r===1},vb=t=>{const s=Pa(t,"~");let i=!1;if(s<=1)return t;s%2!==0&&t.startsWith("~")&&(t=t.substring(1),i=!0);const r=[...t];let n=r.indexOf("~"),o=r.lastIndexOf("~");for(;n!==-1&&o!==-1&&n!==o;)r[n]="<",r[o]=">",n=r.indexOf("~"),o=r.lastIndexOf("~");return i&&r.unshift("~"),r.join("")},Jl=()=>window.MathMLElement!==void 0,Ba=/\$\$(.*)\$\$/g,Kl=t=>{var s;return(((s=t.match(Ba))==null?void 0:s.length)??0)>0},dS=async(t,s)=>{const i=document.createElement("div");i.innerHTML=await wb(t,s),i.id="katex-temp",i.style.visibility="hidden",i.style.position="absolute",i.style.top="0";const r=document.querySelector("body");r==null||r.insertAdjacentElement("beforeend",i);const n={width:i.clientWidth,height:i.clientHeight};return i.remove(),n},bb=async(t,s)=>{if(!Kl(t))return t;if(!Jl()&&!s.legacyMathML)return t.replace(Ba,"MathML is unsupported in this environment.");const{default:i}=await Ie(async()=>{const{default:r}=await import("./katex-ChWnQ-fc.js");return{default:r}},[]);return t.split(yr).map(r=>Kl(r)?`
            <div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">
              ${r}
            </div>
          `:`<div>${r}</div>`).join("").replace(Ba,(r,n)=>i.renderToString(n,{throwOnError:!0,displayMode:!0,output:Jl()?"mathml":"htmlAndMathml"}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},wb=async(t,s)=>ji(await bb(t,s),s),xo={getRows:cb,sanitizeText:ji,sanitizeTextOrArray:mb,hasBreaks:ub,splitBreaks:xb,lineBreakRegex:yr,removeScript:gh,getUrl:fb,evaluate:jh,getMax:gb,getMin:yb},lt=(t,s)=>s?S(t,{s:-40,l:10}):S(t,{s:-40,l:-10}),Bn="#ffffff",In="#f2f2f2";let _b=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var s,i,r,n,o,a,l,d,m,c,u;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||S(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||S(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||lt(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||lt(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||lt(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||lt(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||ee(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||ee(this.tertiaryColor),this.lineColor=this.lineColor||ee(this.background),this.arrowheadColor=this.arrowheadColor||ee(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?ge(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||ge(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||ee(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||me(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||S(this.primaryColor,{h:30}),this.cScale4=this.cScale4||S(this.primaryColor,{h:60}),this.cScale5=this.cScale5||S(this.primaryColor,{h:90}),this.cScale6=this.cScale6||S(this.primaryColor,{h:120}),this.cScale7=this.cScale7||S(this.primaryColor,{h:150}),this.cScale8=this.cScale8||S(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||S(this.primaryColor,{h:270}),this.cScale10=this.cScale10||S(this.primaryColor,{h:300}),this.cScale11=this.cScale11||S(this.primaryColor,{h:330}),this.darkMode)for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=ge(this["cScale"+p],75);else for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=ge(this["cScale"+p],25);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleInv"+p]=this["cScaleInv"+p]||ee(this["cScale"+p]);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this.darkMode?this["cScalePeer"+p]=this["cScalePeer"+p]||me(this["cScale"+p],10):this["cScalePeer"+p]=this["cScalePeer"+p]||ge(this["cScale"+p],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleLabel"+p]=this["cScaleLabel"+p]||this.scaleLabelColor;const h=this.darkMode?-4:-1;for(let p=0;p<5;p++)this["surface"+p]=this["surface"+p]||S(this.mainBkg,{h:180,s:-15,l:h*(5+p*3)}),this["surfacePeer"+p]=this["surfacePeer"+p]||S(this.mainBkg,{h:180,s:-15,l:h*(8+p*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||S(this.primaryColor,{h:64}),this.fillType3=this.fillType3||S(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||S(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||S(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||S(this.primaryColor,{h:128}),this.fillType7=this.fillType7||S(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||S(this.primaryColor,{l:-10}),this.pie5=this.pie5||S(this.secondaryColor,{l:-10}),this.pie6=this.pie6||S(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||S(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||S(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||S(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||S(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||S(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||S(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||S(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||S(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||S(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||S(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||S(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||S(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||pr(this.quadrant1Fill)?me(this.quadrant1Fill):ge(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((s=this.xyChart)==null?void 0:s.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((o=this.xyChart)==null?void 0:o.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((l=this.xyChart)==null?void 0:l.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((d=this.xyChart)==null?void 0:d.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((m=this.xyChart)==null?void 0:m.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((c=this.xyChart)==null?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ge(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||S(this.primaryColor,{h:-30}),this.git4=this.git4||S(this.primaryColor,{h:-60}),this.git5=this.git5||S(this.primaryColor,{h:-90}),this.git6=this.git6||S(this.primaryColor,{h:60}),this.git7=this.git7||S(this.primaryColor,{h:120}),this.darkMode?(this.git0=me(this.git0,25),this.git1=me(this.git1,25),this.git2=me(this.git2,25),this.git3=me(this.git3,25),this.git4=me(this.git4,25),this.git5=me(this.git5,25),this.git6=me(this.git6,25),this.git7=me(this.git7,25)):(this.git0=ge(this.git0,25),this.git1=ge(this.git1,25),this.git2=ge(this.git2,25),this.git3=ge(this.git3,25),this.git4=ge(this.git4,25),this.git5=ge(this.git5,25),this.git6=ge(this.git6,25),this.git7=ge(this.git7,25)),this.gitInv0=this.gitInv0||ee(this.git0),this.gitInv1=this.gitInv1||ee(this.git1),this.gitInv2=this.gitInv2||ee(this.git2),this.gitInv3=this.gitInv3||ee(this.git3),this.gitInv4=this.gitInv4||ee(this.git4),this.gitInv5=this.gitInv5||ee(this.git5),this.gitInv6=this.gitInv6||ee(this.git6),this.gitInv7=this.gitInv7||ee(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Bn,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||In}calculate(s){if(typeof s!="object"){this.updateColors();return}const i=Object.keys(s);i.forEach(r=>{this[r]=s[r]}),this.updateColors(),i.forEach(r=>{this[r]=s[r]})}};const Nb=t=>{const s=new _b;return s.calculate(t),s};let Cb=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=me(this.primaryColor,16),this.tertiaryColor=S(this.primaryColor,{h:-160}),this.primaryBorderColor=ee(this.background),this.secondaryBorderColor=lt(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=lt(this.tertiaryColor,this.darkMode),this.primaryTextColor=ee(this.primaryColor),this.secondaryTextColor=ee(this.secondaryColor),this.tertiaryTextColor=ee(this.tertiaryColor),this.lineColor=ee(this.background),this.textColor=ee(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=me(ee("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=Xi(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=ge("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=ge(this.sectionBkgColor,10),this.taskBorderColor=Xi(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Xi(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var s,i,r,n,o,a,l,d,m,c,u;this.secondBkg=me(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=me(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=me(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=S(this.primaryColor,{h:64}),this.fillType3=S(this.secondaryColor,{h:64}),this.fillType4=S(this.primaryColor,{h:-64}),this.fillType5=S(this.secondaryColor,{h:-64}),this.fillType6=S(this.primaryColor,{h:128}),this.fillType7=S(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||S(this.primaryColor,{h:30}),this.cScale4=this.cScale4||S(this.primaryColor,{h:60}),this.cScale5=this.cScale5||S(this.primaryColor,{h:90}),this.cScale6=this.cScale6||S(this.primaryColor,{h:120}),this.cScale7=this.cScale7||S(this.primaryColor,{h:150}),this.cScale8=this.cScale8||S(this.primaryColor,{h:210}),this.cScale9=this.cScale9||S(this.primaryColor,{h:270}),this.cScale10=this.cScale10||S(this.primaryColor,{h:300}),this.cScale11=this.cScale11||S(this.primaryColor,{h:330});for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleInv"+h]=this["cScaleInv"+h]||ee(this["cScale"+h]);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScalePeer"+h]=this["cScalePeer"+h]||me(this["cScale"+h],10);for(let h=0;h<5;h++)this["surface"+h]=this["surface"+h]||S(this.mainBkg,{h:30,s:-30,l:-(-10+h*4)}),this["surfacePeer"+h]=this["surfacePeer"+h]||S(this.mainBkg,{h:30,s:-30,l:-(-7+h*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleLabel"+h]=this["cScaleLabel"+h]||this.scaleLabelColor;for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["pie"+h]=this["cScale"+h];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||S(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||S(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||S(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||S(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||S(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||S(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||pr(this.quadrant1Fill)?me(this.quadrant1Fill):ge(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((s=this.xyChart)==null?void 0:s.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((o=this.xyChart)==null?void 0:o.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((l=this.xyChart)==null?void 0:l.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((d=this.xyChart)==null?void 0:d.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((m=this.xyChart)==null?void 0:m.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((c=this.xyChart)==null?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?ge(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=me(this.secondaryColor,20),this.git1=me(this.pie2||this.secondaryColor,20),this.git2=me(this.pie3||this.tertiaryColor,20),this.git3=me(this.pie4||S(this.primaryColor,{h:-30}),20),this.git4=me(this.pie5||S(this.primaryColor,{h:-60}),20),this.git5=me(this.pie6||S(this.primaryColor,{h:-90}),10),this.git6=me(this.pie7||S(this.primaryColor,{h:60}),10),this.git7=me(this.pie8||S(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||ee(this.git0),this.gitInv1=this.gitInv1||ee(this.git1),this.gitInv2=this.gitInv2||ee(this.git2),this.gitInv3=this.gitInv3||ee(this.git3),this.gitInv4=this.gitInv4||ee(this.git4),this.gitInv5=this.gitInv5||ee(this.git5),this.gitInv6=this.gitInv6||ee(this.git6),this.gitInv7=this.gitInv7||ee(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ee(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ee(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||me(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||me(this.background,2)}calculate(s){if(typeof s!="object"){this.updateColors();return}const i=Object.keys(s);i.forEach(r=>{this[r]=s[r]}),this.updateColors(),i.forEach(r=>{this[r]=s[r]})}};const Sb=t=>{const s=new Cb;return s.calculate(t),s};let kb=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=S(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=S(this.primaryColor,{h:-160}),this.primaryBorderColor=lt(this.primaryColor,this.darkMode),this.secondaryBorderColor=lt(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=lt(this.tertiaryColor,this.darkMode),this.primaryTextColor=ee(this.primaryColor),this.secondaryTextColor=ee(this.secondaryColor),this.tertiaryTextColor=ee(this.tertiaryColor),this.lineColor=ee(this.background),this.textColor=ee(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Xi(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var s,i,r,n,o,a,l,d,m,c,u;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||S(this.primaryColor,{h:30}),this.cScale4=this.cScale4||S(this.primaryColor,{h:60}),this.cScale5=this.cScale5||S(this.primaryColor,{h:90}),this.cScale6=this.cScale6||S(this.primaryColor,{h:120}),this.cScale7=this.cScale7||S(this.primaryColor,{h:150}),this.cScale8=this.cScale8||S(this.primaryColor,{h:210}),this.cScale9=this.cScale9||S(this.primaryColor,{h:270}),this.cScale10=this.cScale10||S(this.primaryColor,{h:300}),this.cScale11=this.cScale11||S(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ge(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ge(this.tertiaryColor,40);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScale"+h]=ge(this["cScale"+h],10),this["cScalePeer"+h]=this["cScalePeer"+h]||ge(this["cScale"+h],25);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleInv"+h]=this["cScaleInv"+h]||S(this["cScale"+h],{h:180});for(let h=0;h<5;h++)this["surface"+h]=this["surface"+h]||S(this.mainBkg,{h:30,l:-(5+h*5)}),this["surfacePeer"+h]=this["surfacePeer"+h]||S(this.mainBkg,{h:30,l:-(7+h*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||ee(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||ee(this.labelTextColor);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleLabel"+h]=this["cScaleLabel"+h]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=me(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=S(this.primaryColor,{h:64}),this.fillType3=S(this.secondaryColor,{h:64}),this.fillType4=S(this.primaryColor,{h:-64}),this.fillType5=S(this.secondaryColor,{h:-64}),this.fillType6=S(this.primaryColor,{h:128}),this.fillType7=S(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||S(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||S(this.primaryColor,{l:-10}),this.pie5=this.pie5||S(this.secondaryColor,{l:-30}),this.pie6=this.pie6||S(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||S(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||S(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||S(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||S(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||S(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||S(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||S(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||S(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||S(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||S(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||S(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||S(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||pr(this.quadrant1Fill)?me(this.quadrant1Fill):ge(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((s=this.xyChart)==null?void 0:s.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((o=this.xyChart)==null?void 0:o.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((l=this.xyChart)==null?void 0:l.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((d=this.xyChart)==null?void 0:d.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((m=this.xyChart)==null?void 0:m.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((c=this.xyChart)==null?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||S(this.primaryColor,{h:-30}),this.git4=this.git4||S(this.primaryColor,{h:-60}),this.git5=this.git5||S(this.primaryColor,{h:-90}),this.git6=this.git6||S(this.primaryColor,{h:60}),this.git7=this.git7||S(this.primaryColor,{h:120}),this.darkMode?(this.git0=me(this.git0,25),this.git1=me(this.git1,25),this.git2=me(this.git2,25),this.git3=me(this.git3,25),this.git4=me(this.git4,25),this.git5=me(this.git5,25),this.git6=me(this.git6,25),this.git7=me(this.git7,25)):(this.git0=ge(this.git0,25),this.git1=ge(this.git1,25),this.git2=ge(this.git2,25),this.git3=ge(this.git3,25),this.git4=ge(this.git4,25),this.git5=ge(this.git5,25),this.git6=ge(this.git6,25),this.git7=ge(this.git7,25)),this.gitInv0=this.gitInv0||ge(ee(this.git0),25),this.gitInv1=this.gitInv1||ee(this.git1),this.gitInv2=this.gitInv2||ee(this.git2),this.gitInv3=this.gitInv3||ee(this.git3),this.gitInv4=this.gitInv4||ee(this.git4),this.gitInv5=this.gitInv5||ee(this.git5),this.gitInv6=this.gitInv6||ee(this.git6),this.gitInv7=this.gitInv7||ee(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ee(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ee(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Bn,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||In}calculate(s){if(typeof s!="object"){this.updateColors();return}const i=Object.keys(s);i.forEach(r=>{this[r]=s[r]}),this.updateColors(),i.forEach(r=>{this[r]=s[r]})}};const Tb=t=>{const s=new kb;return s.calculate(t),s};let Ab=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=me("#cde498",10),this.primaryBorderColor=lt(this.primaryColor,this.darkMode),this.secondaryBorderColor=lt(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=lt(this.tertiaryColor,this.darkMode),this.primaryTextColor=ee(this.primaryColor),this.secondaryTextColor=ee(this.secondaryColor),this.tertiaryTextColor=ee(this.primaryColor),this.lineColor=ee(this.background),this.textColor=ee(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var s,i,r,n,o,a,l,d,m,c,u;this.actorBorder=ge(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||S(this.primaryColor,{h:30}),this.cScale4=this.cScale4||S(this.primaryColor,{h:60}),this.cScale5=this.cScale5||S(this.primaryColor,{h:90}),this.cScale6=this.cScale6||S(this.primaryColor,{h:120}),this.cScale7=this.cScale7||S(this.primaryColor,{h:150}),this.cScale8=this.cScale8||S(this.primaryColor,{h:210}),this.cScale9=this.cScale9||S(this.primaryColor,{h:270}),this.cScale10=this.cScale10||S(this.primaryColor,{h:300}),this.cScale11=this.cScale11||S(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||ge(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||ge(this.tertiaryColor,40);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScale"+h]=ge(this["cScale"+h],10),this["cScalePeer"+h]=this["cScalePeer"+h]||ge(this["cScale"+h],25);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleInv"+h]=this["cScaleInv"+h]||S(this["cScale"+h],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleLabel"+h]=this["cScaleLabel"+h]||this.scaleLabelColor;for(let h=0;h<5;h++)this["surface"+h]=this["surface"+h]||S(this.mainBkg,{h:30,s:-30,l:-(5+h*5)}),this["surfacePeer"+h]=this["surfacePeer"+h]||S(this.mainBkg,{h:30,s:-30,l:-(8+h*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=S(this.primaryColor,{h:64}),this.fillType3=S(this.secondaryColor,{h:64}),this.fillType4=S(this.primaryColor,{h:-64}),this.fillType5=S(this.secondaryColor,{h:-64}),this.fillType6=S(this.primaryColor,{h:128}),this.fillType7=S(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||S(this.primaryColor,{l:-30}),this.pie5=this.pie5||S(this.secondaryColor,{l:-30}),this.pie6=this.pie6||S(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||S(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||S(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||S(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||S(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||S(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||S(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||S(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||S(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||S(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||S(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||S(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||S(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||pr(this.quadrant1Fill)?me(this.quadrant1Fill):ge(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((s=this.xyChart)==null?void 0:s.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((o=this.xyChart)==null?void 0:o.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((l=this.xyChart)==null?void 0:l.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((d=this.xyChart)==null?void 0:d.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((m=this.xyChart)==null?void 0:m.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((c=this.xyChart)==null?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||S(this.primaryColor,{h:-30}),this.git4=this.git4||S(this.primaryColor,{h:-60}),this.git5=this.git5||S(this.primaryColor,{h:-90}),this.git6=this.git6||S(this.primaryColor,{h:60}),this.git7=this.git7||S(this.primaryColor,{h:120}),this.darkMode?(this.git0=me(this.git0,25),this.git1=me(this.git1,25),this.git2=me(this.git2,25),this.git3=me(this.git3,25),this.git4=me(this.git4,25),this.git5=me(this.git5,25),this.git6=me(this.git6,25),this.git7=me(this.git7,25)):(this.git0=ge(this.git0,25),this.git1=ge(this.git1,25),this.git2=ge(this.git2,25),this.git3=ge(this.git3,25),this.git4=ge(this.git4,25),this.git5=ge(this.git5,25),this.git6=ge(this.git6,25),this.git7=ge(this.git7,25)),this.gitInv0=this.gitInv0||ee(this.git0),this.gitInv1=this.gitInv1||ee(this.git1),this.gitInv2=this.gitInv2||ee(this.git2),this.gitInv3=this.gitInv3||ee(this.git3),this.gitInv4=this.gitInv4||ee(this.git4),this.gitInv5=this.gitInv5||ee(this.git5),this.gitInv6=this.gitInv6||ee(this.git6),this.gitInv7=this.gitInv7||ee(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||ee(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||ee(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Bn,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||In}calculate(s){if(typeof s!="object"){this.updateColors();return}const i=Object.keys(s);i.forEach(r=>{this[r]=s[r]}),this.updateColors(),i.forEach(r=>{this[r]=s[r]})}};const Eb=t=>{const s=new Ab;return s.calculate(t),s};class Fb{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=me(this.contrast,55),this.background="#ffffff",this.tertiaryColor=S(this.primaryColor,{h:-160}),this.primaryBorderColor=lt(this.primaryColor,this.darkMode),this.secondaryBorderColor=lt(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=lt(this.tertiaryColor,this.darkMode),this.primaryTextColor=ee(this.primaryColor),this.secondaryTextColor=ee(this.secondaryColor),this.tertiaryTextColor=ee(this.tertiaryColor),this.lineColor=ee(this.background),this.textColor=ee(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var s,i,r,n,o,a,l,d,m,c,u;this.secondBkg=me(this.contrast,55),this.border2=this.contrast,this.actorBorder=me(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleInv"+h]=this["cScaleInv"+h]||ee(this["cScale"+h]);for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this.darkMode?this["cScalePeer"+h]=this["cScalePeer"+h]||me(this["cScale"+h],10):this["cScalePeer"+h]=this["cScalePeer"+h]||ge(this["cScale"+h],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["cScaleLabel"+h]=this["cScaleLabel"+h]||this.scaleLabelColor;for(let h=0;h<5;h++)this["surface"+h]=this["surface"+h]||S(this.mainBkg,{l:-(5+h*5)}),this["surfacePeer"+h]=this["surfacePeer"+h]||S(this.mainBkg,{l:-(8+h*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=me(this.contrast,30),this.sectionBkgColor2=me(this.contrast,30),this.taskBorderColor=ge(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=me(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=ge(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=S(this.primaryColor,{h:64}),this.fillType3=S(this.secondaryColor,{h:64}),this.fillType4=S(this.primaryColor,{h:-64}),this.fillType5=S(this.secondaryColor,{h:-64}),this.fillType6=S(this.primaryColor,{h:128}),this.fillType7=S(this.secondaryColor,{h:128});for(let h=0;h<this.THEME_COLOR_LIMIT;h++)this["pie"+h]=this["cScale"+h];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||S(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||S(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||S(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||S(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||S(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||S(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||pr(this.quadrant1Fill)?me(this.quadrant1Fill):ge(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((s=this.xyChart)==null?void 0:s.backgroundColor)||this.background,titleColor:((i=this.xyChart)==null?void 0:i.titleColor)||this.primaryTextColor,xAxisTitleColor:((r=this.xyChart)==null?void 0:r.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((o=this.xyChart)==null?void 0:o.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((l=this.xyChart)==null?void 0:l.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((d=this.xyChart)==null?void 0:d.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((m=this.xyChart)==null?void 0:m.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((c=this.xyChart)==null?void 0:c.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((u=this.xyChart)==null?void 0:u.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ge(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||S(this.primaryColor,{h:-30}),this.git4=this.pie5||S(this.primaryColor,{h:-60}),this.git5=this.pie6||S(this.primaryColor,{h:-90}),this.git6=this.pie7||S(this.primaryColor,{h:60}),this.git7=this.pie8||S(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||ee(this.git0),this.gitInv1=this.gitInv1||ee(this.git1),this.gitInv2=this.gitInv2||ee(this.git2),this.gitInv3=this.gitInv3||ee(this.git3),this.gitInv4=this.gitInv4||ee(this.git4),this.gitInv5=this.gitInv5||ee(this.git5),this.gitInv6=this.gitInv6||ee(this.git6),this.gitInv7=this.gitInv7||ee(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Bn,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||In}calculate(s){if(typeof s!="object"){this.updateColors();return}const i=Object.keys(s);i.forEach(r=>{this[r]=s[r]}),this.updateColors(),i.forEach(r=>{this[r]=s[r]})}}const Db=t=>{const s=new Fb;return s.calculate(t),s},ms={base:{getThemeVariables:Nb},dark:{getThemeVariables:Sb},default:{getThemeVariables:Tb},forest:{getThemeVariables:Eb},neutral:{getThemeVariables:Db}},cs={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},theme:"default",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","maxEdges"],legacyMathML:!1,deterministicIds:!1,fontSize:16},vh={...cs,deterministicIDSeed:void 0,themeCSS:void 0,themeVariables:ms.default.getThemeVariables(),sequence:{...cs.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...cs.gantt,tickInterval:void 0,useWidth:void 0},c4:{...cs.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...cs.pie,useWidth:984},xyChart:{...cs.xyChart,useWidth:void 0},requirement:{...cs.requirement,useWidth:void 0},gitGraph:{...cs.gitGraph,useMaxWidth:!1},sankey:{...cs.sankey,useMaxWidth:!1}},bh=(t,s="")=>Object.keys(t).reduce((i,r)=>Array.isArray(t[r])?i:typeof t[r]=="object"&&t[r]!==null?[...i,s+r,...bh(t[r],"")]:[...i,s+r],[]),Lb=new Set(bh(vh,"")),Mb=vh,dn=t=>{if(fe.debug("sanitizeDirective called with",t),!(typeof t!="object"||t==null)){if(Array.isArray(t)){t.forEach(s=>dn(s));return}for(const s of Object.keys(t)){if(fe.debug("Checking key",s),s.startsWith("__")||s.includes("proto")||s.includes("constr")||!Lb.has(s)||t[s]==null){fe.debug("sanitize deleting key: ",s),delete t[s];continue}if(typeof t[s]=="object"){fe.debug("sanitizing object",s),dn(t[s]);continue}const i=["themeCSS","fontFamily","altFontFamily"];for(const r of i)s.includes(r)&&(fe.debug("sanitizing css option",s),t[s]=Pb(t[s]))}if(t.themeVariables)for(const s of Object.keys(t.themeVariables)){const i=t.themeVariables[s];i!=null&&i.match&&!i.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[s]="")}fe.debug("After sanitization",t)}},Pb=t=>{let s=0,i=0;for(const r of t){if(s<i)return"{ /* ERROR: Unbalanced CSS */ }";r==="{"?s++:r==="}"&&i++}return s!==i?"{ /* ERROR: Unbalanced CSS */ }":t},wh=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,er=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,Bb=/\s*%%.*\n/gm;class _h extends Error{constructor(s){super(s),this.name="UnknownDiagramError"}}const vi={},$n=function(t,s){t=t.replace(wh,"").replace(er,"").replace(Bb,`
`);for(const[i,{detector:r}]of Object.entries(vi))if(r(t,s))return i;throw new _h(`No diagram type detected matching given configuration for text: ${t}`)},Nh=(...t)=>{for(const{id:s,detector:i,loader:r}of t)Ch(s,i,r)},Ch=(t,s,i)=>{vi[t]?fe.error(`Detector with key ${t} already exists`):vi[t]={detector:s,loader:i},fe.debug(`Detector with key ${t} added${i?" with loader":""}`)},Ib=t=>vi[t].loader,Ia=(t,s,{depth:i=2,clobber:r=!1}={})=>{const n={depth:i,clobber:r};return Array.isArray(s)&&!Array.isArray(t)?(s.forEach(o=>Ia(t,o,n)),t):Array.isArray(s)&&Array.isArray(t)?(s.forEach(o=>{t.includes(o)||t.push(o)}),t):t===void 0||i<=0?t!=null&&typeof t=="object"&&typeof s=="object"?Object.assign(t,s):s:(s!==void 0&&typeof t=="object"&&typeof s=="object"&&Object.keys(s).forEach(o=>{typeof s[o]=="object"&&(t[o]===void 0||typeof t[o]=="object")?(t[o]===void 0&&(t[o]=Array.isArray(s[o])?[]:{}),t[o]=Ia(t[o],s[o],{depth:i-1,clobber:r})):(r||typeof t[o]!="object"&&typeof s[o]!="object")&&(t[o]=s[o])}),t)},et=Ia,$b="​",Rb={curveBasis:py,curveBasisClosed:fy,curveBasisOpen:gy,curveBumpX:uy,curveBumpY:xy,curveBundle:yy,curveCardinalClosed:vy,curveCardinalOpen:by,curveCardinal:jy,curveCatmullRomClosed:_y,curveCatmullRomOpen:Ny,curveCatmullRom:wy,curveLinear:my,curveLinearClosed:Cy,curveMonotoneX:Sy,curveMonotoneY:ky,curveNatural:Ty,curveStep:Ay,curveStepAfter:Fy,curveStepBefore:Ey},Ob=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,zb=function(t,s){const i=Sh(t,/(?:init\b)|(?:initialize\b)/);let r={};if(Array.isArray(i)){const a=i.map(l=>l.args);dn(a),r=et(r,[...a])}else r=i.args;if(!r)return;let n=$n(t,s);const o="config";return r[o]!==void 0&&(n==="flowchart-v2"&&(n="flowchart"),r[n]=r[o],delete r[o]),r},Sh=function(t,s=null){try{const i=new RegExp(`[%]{2}(?![{]${Ob.source})(?=[}][%]{2}).*
`,"ig");t=t.trim().replace(i,"").replace(/'/gm,'"'),fe.debug(`Detecting diagram directive${s!==null?" type:"+s:""} based on the text:${t}`);let r;const n=[];for(;(r=er.exec(t))!==null;)if(r.index===er.lastIndex&&er.lastIndex++,r&&!s||s&&r[1]&&r[1].match(s)||s&&r[2]&&r[2].match(s)){const o=r[1]?r[1]:r[2],a=r[3]?r[3].trim():r[4]?JSON.parse(r[4].trim()):null;n.push({type:o,args:a})}return n.length===0?{type:t,args:null}:n.length===1?n[0]:n}catch(i){return fe.error(`ERROR: ${i.message} - Unable to parse directive type: '${s}' based on the text: '${t}'`),{type:void 0,args:null}}},qb=function(t){return t.replace(er,"")},Ub=function(t,s){for(const[i,r]of s.entries())if(r.match(t))return i;return-1};function Gb(t,s){if(!t)return s;const i=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return Rb[i]??s}function Wb(t,s){const i=t.trim();if(i)return s.securityLevel!=="loose"?Kx.sanitizeUrl(i):i}const Vb=(t,...s)=>{const i=t.split("."),r=i.length-1,n=i[r];let o=window;for(let a=0;a<r;a++)if(o=o[i[a]],!o){fe.error(`Function name: ${t} not found in window`);return}o[n](...s)};function kh(t,s){return!t||!s?0:Math.sqrt(Math.pow(s.x-t.x,2)+Math.pow(s.y-t.y,2))}function Hb(t){let s,i=0;t.forEach(n=>{i+=kh(n,s),s=n});const r=i/2;return po(t,r)}function Yb(t){return t.length===1?t[0]:Hb(t)}const Ql=(t,s=2)=>{const i=Math.pow(10,s);return Math.round(t*i)/i},po=(t,s)=>{let i,r=s;for(const n of t){if(i){const o=kh(n,i);if(o<r)r-=o;else{const a=r/o;if(a<=0)return i;if(a>=1)return{x:n.x,y:n.y};if(a>0&&a<1)return{x:Ql((1-a)*i.x+a*n.x,5),y:Ql((1-a)*i.y+a*n.y,5)}}}i=n}throw new Error("Could not find a suitable point for the given distance")},Jb=(t,s,i)=>{fe.info(`our points ${JSON.stringify(s)}`),s[0]!==i&&(s=s.reverse());const n=po(s,25),o=t?10:5,a=Math.atan2(s[0].y-n.y,s[0].x-n.x),l={x:0,y:0};return l.x=Math.sin(a)*o+(s[0].x+n.x)/2,l.y=-Math.cos(a)*o+(s[0].y+n.y)/2,l};function Kb(t,s,i){const r=structuredClone(i);fe.info("our points",r),s!=="start_left"&&s!=="start_right"&&r.reverse();const n=25+t,o=po(r,n),a=10+t*.5,l=Math.atan2(r[0].y-o.y,r[0].x-o.x),d={x:0,y:0};return s==="start_left"?(d.x=Math.sin(l+Math.PI)*a+(r[0].x+o.x)/2,d.y=-Math.cos(l+Math.PI)*a+(r[0].y+o.y)/2):s==="end_right"?(d.x=Math.sin(l-Math.PI)*a+(r[0].x+o.x)/2-5,d.y=-Math.cos(l-Math.PI)*a+(r[0].y+o.y)/2-5):s==="end_left"?(d.x=Math.sin(l)*a+(r[0].x+o.x)/2-5,d.y=-Math.cos(l)*a+(r[0].y+o.y)/2-5):(d.x=Math.sin(l)*a+(r[0].x+o.x)/2,d.y=-Math.cos(l)*a+(r[0].y+o.y)/2),d}function Qb(t){let s="",i="";for(const r of t)r!==void 0&&(r.startsWith("color:")||r.startsWith("text-align:")?i=i+r+";":s=s+r+";");return{style:s,labelStyle:i}}let Xl=0;const Xb=()=>(Xl++,"id-"+Math.random().toString(36).substr(2,12)+"-"+Xl);function Zb(t){let s="";const i="0123456789abcdef",r=i.length;for(let n=0;n<t;n++)s+=i.charAt(Math.floor(Math.random()*r));return s}const ew=t=>Zb(t.length),tw=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},sw=function(t,s){const i=s.text.replace(xo.lineBreakRegex," "),[,r]=go(s.fontSize),n=t.append("text");n.attr("x",s.x),n.attr("y",s.y),n.style("text-anchor",s.anchor),n.style("font-family",s.fontFamily),n.style("font-size",r),n.style("font-weight",s.fontWeight),n.attr("fill",s.fill),s.class!==void 0&&n.attr("class",s.class);const o=n.append("tspan");return o.attr("x",s.x+s.textMargin*2),o.attr("fill",s.fill),o.text(i),n},iw=fr((t,s,i)=>{if(!t||(i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},i),xo.lineBreakRegex.test(t)))return t;const r=t.split(" "),n=[];let o="";return r.forEach((a,l)=>{const d=hn(`${a} `,i),m=hn(o,i);if(d>s){const{hyphenatedStrings:h,remainingWord:p}=rw(a,s,"-",i);n.push(o,...h),o=p}else m+d>=s?(n.push(o),o=a):o=[o,a].filter(Boolean).join(" ");l+1===r.length&&n.push(o)}),n.filter(a=>a!=="").join(i.joinWith)},(t,s,i)=>`${t}${s}${i.fontSize}${i.fontWeight}${i.fontFamily}${i.joinWith}`),rw=fr((t,s,i="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const n=[...t],o=[];let a="";return n.forEach((l,d)=>{const m=`${a}${l}`;if(hn(m,r)>=s){const u=d+1,h=n.length===u,p=`${m}${i}`;o.push(h?m:p),a=""}else a=m}),{hyphenatedStrings:o,remainingWord:a}},(t,s,i="-",r)=>`${t}${s}${i}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function nw(t,s){return fo(t,s).height}function hn(t,s){return fo(t,s).width}const fo=fr((t,s)=>{const{fontSize:i=12,fontFamily:r="Arial",fontWeight:n=400}=s;if(!t)return{width:0,height:0};const[,o]=go(i),a=["sans-serif",r],l=t.split(xo.lineBreakRegex),d=[],m=kt("body");if(!m.remove)return{width:0,height:0,lineHeight:0};const c=m.append("svg");for(const h of a){let p=0;const b={width:0,height:0,lineHeight:0};for(const k of l){const F=tw();F.text=k||$b;const L=sw(c,F).style("font-size",o).style("font-weight",n).style("font-family",h),A=(L._groups||L)[0][0].getBBox();if(A.width===0&&A.height===0)throw new Error("svg element not in render tree");b.width=Math.round(Math.max(b.width,A.width)),p=Math.round(A.height),b.height+=p,b.lineHeight=Math.round(Math.max(b.lineHeight,p))}d.push(b)}c.remove();const u=isNaN(d[1].height)||isNaN(d[1].width)||isNaN(d[1].lineHeight)||d[0].height>d[1].height&&d[0].width>d[1].width&&d[0].lineHeight>d[1].lineHeight?0:1;return d[u]},(t,s)=>`${t}${s.fontSize}${s.fontWeight}${s.fontFamily}`);class aw{constructor(s=!1,i){this.count=0,this.count=i?i.length:0,this.next=s?()=>this.count++:()=>Date.now()}}let Lr;const ow=function(t){return Lr=Lr||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),Lr.innerHTML=t,unescape(Lr.textContent)};function Th(t){return"str"in t}const lw=(t,s,i,r)=>{var n;if(!r)return;const o=(n=t.node())==null?void 0:n.getBBox();o&&t.append("text").text(r).attr("x",o.x+o.width/2).attr("y",-i).attr("class",s)},go=t=>{if(typeof t=="number")return[t,t+"px"];const s=parseInt(t??"",10);return Number.isNaN(s)?[void 0,void 0]:t===String(s)?[s,t+"px"]:[s,t]};function Ah(t,s){return Fv({},t,s)}const tr={assignWithDepth:et,wrapLabel:iw,calculateTextHeight:nw,calculateTextWidth:hn,calculateTextDimensions:fo,cleanAndMerge:Ah,detectInit:zb,detectDirective:Sh,isSubstringInArray:Ub,interpolateToCurve:Gb,calcLabelPosition:Yb,calcCardinalityPosition:Jb,calcTerminalLabelPosition:Kb,formatUrl:Wb,getStylesFromArray:Qb,generateId:Xb,random:ew,runFunc:Vb,entityDecode:ow,insertTitle:lw,parseFontSize:go,InitIDGenerator:aw},cw=function(t){let s=t;return s=s.replace(/style.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),s=s.replace(/classDef.*:\S*#.*;/g,function(i){return i.substring(0,i.length-1)}),s=s.replace(/#\w+;/g,function(i){const r=i.substring(1,i.length-1);return/^\+?\d+$/.test(r)?"ﬂ°°"+r+"¶ß":"ﬂ°"+r+"¶ß"}),s},dw=function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},Zl="10.9.4",bi=Object.freeze(Mb);let xt=et({},bi),Eh,wi=[],sr=et({},bi);const Rn=(t,s)=>{let i=et({},t),r={};for(const n of s)Lh(n),r=et(r,n);if(i=et(i,r),r.theme&&r.theme in ms){const n=et({},Eh),o=et(n.themeVariables||{},r.themeVariables);i.theme&&i.theme in ms&&(i.themeVariables=ms[i.theme].getThemeVariables(o))}return sr=i,Mh(sr),sr},hw=t=>(xt=et({},bi),xt=et(xt,t),t.theme&&ms[t.theme]&&(xt.themeVariables=ms[t.theme].getThemeVariables(t.themeVariables)),Rn(xt,wi),xt),mw=t=>{Eh=et({},t)},uw=t=>(xt=et(xt,t),Rn(xt,wi),xt),Fh=()=>et({},xt),Dh=t=>(Mh(t),et(sr,t),ts()),ts=()=>et({},sr),Lh=t=>{t&&(["secure",...xt.secure??[]].forEach(s=>{Object.hasOwn(t,s)&&(fe.debug(`Denied attempt to modify a secure key ${s}`,t[s]),delete t[s])}),Object.keys(t).forEach(s=>{s.startsWith("__")&&delete t[s]}),Object.keys(t).forEach(s=>{typeof t[s]=="string"&&(t[s].includes("<")||t[s].includes(">")||t[s].includes("url(data:"))&&delete t[s],typeof t[s]=="object"&&Lh(t[s])}))},xw=t=>{dn(t),t.fontFamily&&(!t.themeVariables||!t.themeVariables.fontFamily)&&(t.themeVariables={fontFamily:t.fontFamily}),wi.push(t),Rn(xt,wi)},mn=(t=xt)=>{wi=[],Rn(t,wi)},pw={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},ec={},fw=t=>{ec[t]||(fe.warn(pw[t]),ec[t]=!0)},Mh=t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&fw("LAZY_LOAD_DEPRECATED")},Ph="c4",gw=t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),yw=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./c4Diagram-15b5d702-DxNYvy79.js");return{diagram:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Ph,diagram:t}},jw={id:Ph,detector:gw,loader:yw},vw=jw,Bh="flowchart",bw=(t,s)=>{var i,r;return((i=s==null?void 0:s.flowchart)==null?void 0:i.defaultRenderer)==="dagre-wrapper"||((r=s==null?void 0:s.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)},ww=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./flowDiagram-cbd28bf7-DMpnOKav.js");return{diagram:s}},__vite__mapDeps([40,41,42,43,44,45,46,47,48,49,50,51,52,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Bh,diagram:t}},_w={id:Bh,detector:bw,loader:ww},Nw=_w,Ih="flowchart-v2",Cw=(t,s)=>{var i,r,n;return((i=s==null?void 0:s.flowchart)==null?void 0:i.defaultRenderer)==="dagre-d3"||((r=s==null?void 0:s.flowchart)==null?void 0:r.defaultRenderer)==="elk"?!1:/^\s*graph/.test(t)&&((n=s==null?void 0:s.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(t)},Sw=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./flowDiagram-v2-ffc7f31a-CsOrzGPz.js");return{diagram:s}},__vite__mapDeps([53,41,44,42,45,43,46,47,48,49,50,51,52,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Ih,diagram:t}},kw={id:Ih,detector:Cw,loader:Sw},Tw=kw,$h="er",Aw=t=>/^\s*erDiagram/.test(t),Ew=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./erDiagram-880f2ed8-px2rag-q.js");return{diagram:s}},__vite__mapDeps([54,42,43,49,50,51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:$h,diagram:t}},Fw={id:$h,detector:Aw,loader:Ew},Dw=Fw,Rh="gitGraph",Lw=t=>/^\s*gitGraph/.test(t),Mw=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./gitGraphDiagram-21fc4d3e-B47v6Y4S.js");return{diagram:s}},__vite__mapDeps([55,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Rh,diagram:t}},Pw={id:Rh,detector:Lw,loader:Mw},Bw=Pw,Oh="gantt",Iw=t=>/^\s*gantt/.test(t),$w=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./ganttDiagram-04f9e578-B7dOWn5x.js");return{diagram:s}},__vite__mapDeps([56,2,3,57,58,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Oh,diagram:t}},Rw={id:Oh,detector:Iw,loader:$w},Ow=Rw,zh="info",zw=t=>/^\s*info/.test(t),qw=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./infoDiagram-4a4f5b27-D37HcCPu.js");return{diagram:s}},__vite__mapDeps([59,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:zh,diagram:t}},Uw={id:zh,detector:zw,loader:qw},qh="pie",Gw=t=>/^\s*pie/.test(t),Ww=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./pieDiagram-421022e6-BKkdzFU8.js");return{diagram:s}},__vite__mapDeps([60,61,51,62,58,50,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:qh,diagram:t}},Vw={id:qh,detector:Gw,loader:Ww},Uh="quadrantChart",Hw=t=>/^\s*quadrantChart/.test(t),Yw=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./quadrantDiagram-0957ecba-CMcYnMZ4.js");return{diagram:s}},__vite__mapDeps([63,57,58,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Uh,diagram:t}},Jw={id:Uh,detector:Hw,loader:Yw},Kw=Jw,Gh="xychart",Qw=t=>/^\s*xychart-beta/.test(t),Xw=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./xychartDiagram-b6496bcd-CgdNXWWt.js");return{diagram:s}},__vite__mapDeps([64,48,58,62,57,49,50,51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Gh,diagram:t}},Zw={id:Gh,detector:Qw,loader:Xw},e_=Zw,Wh="requirement",t_=t=>/^\s*requirement(Diagram)?/.test(t),s_=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./requirementDiagram-23d650b8-CGCqddCo.js");return{diagram:s}},__vite__mapDeps([65,42,43,49,50,51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Wh,diagram:t}},i_={id:Wh,detector:t_,loader:s_},r_=i_,Vh="sequence",n_=t=>/^\s*sequenceDiagram/.test(t),a_=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./sequenceDiagram-17ac3bff-CjnEiGwV.js");return{diagram:s}},__vite__mapDeps([66,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Vh,diagram:t}},o_={id:Vh,detector:n_,loader:a_},l_=o_,Hh="class",c_=(t,s)=>{var i;return((i=s==null?void 0:s.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(t)},d_=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./classDiagram-d40c83e7-DtcCj8sr.js");return{diagram:s}},__vite__mapDeps([67,68,42,43,49,50,51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Hh,diagram:t}},h_={id:Hh,detector:c_,loader:d_},m_=h_,Yh="classDiagram",u_=(t,s)=>{var i;return/^\s*classDiagram/.test(t)&&((i=s==null?void 0:s.class)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(t)},x_=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./classDiagram-v2-d5a6b087-BEAhKaMu.js");return{diagram:s}},__vite__mapDeps([69,68,42,45,43,46,47,48,49,50,51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Yh,diagram:t}},p_={id:Yh,detector:u_,loader:x_},f_=p_,Jh="state",g_=(t,s)=>{var i;return((i=s==null?void 0:s.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(t)},y_=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./stateDiagram-9c5f0230-Cw82C698.js");return{diagram:s}},__vite__mapDeps([70,71,42,43,49,50,51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Jh,diagram:t}},j_={id:Jh,detector:g_,loader:y_},v_=j_,Kh="stateDiagram",b_=(t,s)=>{var i;return!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&((i=s==null?void 0:s.state)==null?void 0:i.defaultRenderer)==="dagre-wrapper")},w_=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./stateDiagram-v2-51a3dcff-C0aExKiA.js");return{diagram:s}},__vite__mapDeps([72,71,42,45,43,46,47,48,49,50,51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Kh,diagram:t}},__={id:Kh,detector:b_,loader:w_},N_=__,Qh="journey",C_=t=>/^\s*journey/.test(t),S_=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./journeyDiagram-29694f62-ChFRiQBC.js");return{diagram:s}},__vite__mapDeps([73,1,61,51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:Qh,diagram:t}},k_={id:Qh,detector:C_,loader:S_},T_=k_,A_=function(t,s){for(let i of s)t.attr(i[0],i[1])},E_=function(t,s,i){let r=new Map;return i?(r.set("width","100%"),r.set("style",`max-width: ${s}px;`)):(r.set("height",t),r.set("width",s)),r},Xh=function(t,s,i,r){const n=E_(s,i,r);A_(t,n)},F_=function(t,s,i,r){const n=s.node().getBBox(),o=n.width,a=n.height;fe.info(`SVG bounds: ${o}x${a}`,n);let l=0,d=0;fe.info(`Graph bounds: ${l}x${d}`,t),l=o+i*2,d=a+i*2,fe.info(`Calculated bounds: ${l}x${d}`),Xh(s,d,l,r);const m=`${n.x-i} ${n.y-i} ${n.width+2*i} ${n.height+2*i}`;s.attr("viewBox",m)},Gr={},D_=(t,s,i)=>{let r="";return t in Gr&&Gr[t]?r=Gr[t](i):fe.warn(`No theme found for ${t}`),` & {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
    fill: ${i.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${i.errorBkgColor};
  }
  & .error-text {
    fill: ${i.errorTextColor};
    stroke: ${i.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${i.lineColor};
    stroke: ${i.lineColor};
  }
  & .marker.cross {
    stroke: ${i.lineColor};
  }

  & svg {
    font-family: ${i.fontFamily};
    font-size: ${i.fontSize};
  }

  ${r}

  ${s}
`},L_=(t,s)=>{s!==void 0&&(Gr[t]=s)},M_=D_;let yo="",jo="",vo="";const bo=t=>ji(t,ts()),P_=()=>{yo="",vo="",jo=""},B_=t=>{yo=bo(t).replace(/^\s+/g,"")},I_=()=>yo,$_=t=>{vo=bo(t).replace(/\n\s+/g,`
`)},R_=()=>vo,O_=t=>{jo=bo(t)},z_=()=>jo,q_=Object.freeze(Object.defineProperty({__proto__:null,clear:P_,getAccDescription:R_,getAccTitle:I_,getDiagramTitle:z_,setAccDescription:$_,setAccTitle:B_,setDiagramTitle:O_},Symbol.toStringTag,{value:"Module"})),U_=fe,G_=uo,wo=ts,pS=Dh,fS=bi,W_=t=>ji(t,wo()),V_=F_,H_=()=>q_,un={},xn=(t,s,i)=>{var r;if(un[t])throw new Error(`Diagram ${t} already registered.`);un[t]=s,i&&Ch(t,i),L_(t,s.styles),(r=s.injectUtils)==null||r.call(s,U_,G_,wo,W_,V_,H_(),()=>{})},_o=t=>{if(t in un)return un[t];throw new Y_(t)};class Y_ extends Error{constructor(s){super(`Diagram ${s} not found.`)}}const J_=t=>{var s;const{securityLevel:i}=wo();let r=kt("body");if(i==="sandbox"){const a=((s=kt(`#i${t}`).node())==null?void 0:s.contentDocument)??document;r=kt(a.body)}return r.select(`#${t}`)},K_=(t,s,i)=>{fe.debug(`rendering svg for syntax error
`);const r=J_(s),n=r.append("g");r.attr("viewBox","0 0 2412 512"),Xh(r,100,512,!0),n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${i}`)},Zh={draw:K_},Q_=Zh,X_={db:{},renderer:Zh,parser:{parser:{yy:{}},parse:()=>{}}},Z_=X_,em="flowchart-elk",e1=(t,s)=>{var i;return!!(/^\s*flowchart-elk/.test(t)||/^\s*flowchart|graph/.test(t)&&((i=s==null?void 0:s.flowchart)==null?void 0:i.defaultRenderer)==="elk")},t1=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./flowchart-elk-definition-36e2d292-CzG-X7sk.js");return{diagram:s}},__vite__mapDeps([74,41,47,48,49,50,51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:em,diagram:t}},s1={id:em,detector:e1,loader:t1},i1=s1,tm="timeline",r1=t=>/^\s*timeline/.test(t),n1=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./timeline-definition-7e6b55e7-CO_gbWCo.js");return{diagram:s}},__vite__mapDeps([75,61,51,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:tm,diagram:t}},a1={id:tm,detector:r1,loader:n1},o1=a1,sm="mindmap",l1=t=>/^\s*mindmap/.test(t),c1=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./mindmap-definition-ac74a2e8-DXLbrZcU.js");return{diagram:s}},__vite__mapDeps([76,2,3,48,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:sm,diagram:t}},d1={id:sm,detector:l1,loader:c1},h1=d1,im="sankey",m1=t=>/^\s*sankey-beta/.test(t),u1=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./sankeyDiagram-23345273-bhiCYELp.js");return{diagram:s}},__vite__mapDeps([77,62,58,78,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:im,diagram:t}},x1={id:im,detector:m1,loader:u1},p1=x1,rm="block",f1=t=>/^\s*block-beta/.test(t),g1=async()=>{const{diagram:t}=await Ie(async()=>{const{diagram:s}=await import("./blockDiagram-68f4deed-D5zt_28X.js");return{diagram:s}},__vite__mapDeps([79,46,42,47,48,49,50,51,52,62,58,78,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39]));return{id:rm,diagram:t}},y1={id:rm,detector:f1,loader:g1},j1=y1;let tc=!1;const No=()=>{tc||(tc=!0,xn("error",Z_,t=>t.toLowerCase().trim()==="error"),xn("---",{db:{clear:()=>{}},styles:{},renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},t=>t.toLowerCase().trimStart().startsWith("---")),Nh(vw,f_,m_,Dw,Ow,Uw,Vw,r_,l_,i1,Tw,Nw,h1,o1,Bw,N_,v_,T_,Kw,p1,e_,j1))};class nm{constructor(s,i={}){this.text=s,this.metadata=i,this.type="graph",this.text=cw(s),this.text+=`
`;const r=ts();try{this.type=$n(s,r)}catch(o){this.type="error",this.detectError=o}const n=_o(this.type);fe.debug("Type "+this.type),this.db=n.db,this.renderer=n.renderer,this.parser=n.parser,this.parser.parser.yy=this.db,this.init=n.init,this.parse()}parse(){var s,i,r,n,o;if(this.detectError)throw this.detectError;(i=(s=this.db).clear)==null||i.call(s);const a=ts();(r=this.init)==null||r.call(this,a),this.metadata.title&&((o=(n=this.db).setDiagramTitle)==null||o.call(n,this.metadata.title)),this.parser.parse(this.text)}async render(s,i){await this.renderer.draw(this.text,s,i,this)}getParser(){return this.parser}getType(){return this.type}}const v1=async(t,s={})=>{const i=$n(t,ts());try{_o(i)}catch{const n=Ib(i);if(!n)throw new _h(`Diagram ${i} not found.`);const{id:o,diagram:a}=await n();xn(o,a)}return new nm(t,s)};let sc=[];const b1=()=>{sc.forEach(t=>{t()}),sc=[]},w1="graphics-document document";function _1(t,s){t.attr("role",w1),s!==""&&t.attr("aria-roledescription",s)}function N1(t,s,i,r){if(t.insert!==void 0){if(i){const n=`chart-desc-${r}`;t.attr("aria-describedby",n),t.insert("desc",":first-child").attr("id",n).text(i)}if(s){const n=`chart-title-${r}`;t.attr("aria-labelledby",n),t.insert("title",":first-child").attr("id",n).text(s)}}}const C1=t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart();/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function am(t){return typeof t>"u"||t===null}function S1(t){return typeof t=="object"&&t!==null}function k1(t){return Array.isArray(t)?t:am(t)?[]:[t]}function T1(t,s){var i,r,n,o;if(s)for(o=Object.keys(s),i=0,r=o.length;i<r;i+=1)n=o[i],t[n]=s[n];return t}function A1(t,s){var i="",r;for(r=0;r<s;r+=1)i+=t;return i}function E1(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var F1=am,D1=S1,L1=k1,M1=A1,P1=E1,B1=T1,ot={isNothing:F1,isObject:D1,toArray:L1,repeat:M1,isNegativeZero:P1,extend:B1};function om(t,s){var i="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(i+='in "'+t.mark.name+'" '),i+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!s&&t.mark.snippet&&(i+=`

`+t.mark.snippet),r+" "+i):r}function mr(t,s){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=s,this.message=om(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}mr.prototype=Object.create(Error.prototype);mr.prototype.constructor=mr;mr.prototype.toString=function(s){return this.name+": "+om(this,s)};var ds=mr;function na(t,s,i,r,n){var o="",a="",l=Math.floor(n/2)-1;return r-s>l&&(o=" ... ",s=r-l+o.length),i-r>l&&(a=" ...",i=r+l-a.length),{str:o+t.slice(s,i).replace(/\t/g,"→")+a,pos:r-s+o.length}}function aa(t,s){return ot.repeat(" ",s-t.length)+t}function I1(t,s){if(s=Object.create(s||null),!t.buffer)return null;s.maxLength||(s.maxLength=79),typeof s.indent!="number"&&(s.indent=1),typeof s.linesBefore!="number"&&(s.linesBefore=3),typeof s.linesAfter!="number"&&(s.linesAfter=2);for(var i=/\r?\n|\r|\0/g,r=[0],n=[],o,a=-1;o=i.exec(t.buffer);)n.push(o.index),r.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var l="",d,m,c=Math.min(t.line+s.linesAfter,n.length).toString().length,u=s.maxLength-(s.indent+c+3);for(d=1;d<=s.linesBefore&&!(a-d<0);d++)m=na(t.buffer,r[a-d],n[a-d],t.position-(r[a]-r[a-d]),u),l=ot.repeat(" ",s.indent)+aa((t.line-d+1).toString(),c)+" | "+m.str+`
`+l;for(m=na(t.buffer,r[a],n[a],t.position,u),l+=ot.repeat(" ",s.indent)+aa((t.line+1).toString(),c)+" | "+m.str+`
`,l+=ot.repeat("-",s.indent+c+3+m.pos)+`^
`,d=1;d<=s.linesAfter&&!(a+d>=n.length);d++)m=na(t.buffer,r[a+d],n[a+d],t.position-(r[a]-r[a+d]),u),l+=ot.repeat(" ",s.indent)+aa((t.line+d+1).toString(),c)+" | "+m.str+`
`;return l.replace(/\n$/,"")}var $1=I1,R1=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],O1=["scalar","sequence","mapping"];function z1(t){var s={};return t!==null&&Object.keys(t).forEach(function(i){t[i].forEach(function(r){s[String(r)]=i})}),s}function q1(t,s){if(s=s||{},Object.keys(s).forEach(function(i){if(R1.indexOf(i)===-1)throw new ds('Unknown option "'+i+'" is met in definition of "'+t+'" YAML type.')}),this.options=s,this.tag=t,this.kind=s.kind||null,this.resolve=s.resolve||function(){return!0},this.construct=s.construct||function(i){return i},this.instanceOf=s.instanceOf||null,this.predicate=s.predicate||null,this.represent=s.represent||null,this.representName=s.representName||null,this.defaultStyle=s.defaultStyle||null,this.multi=s.multi||!1,this.styleAliases=z1(s.styleAliases||null),O1.indexOf(this.kind)===-1)throw new ds('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var st=q1;function ic(t,s){var i=[];return t[s].forEach(function(r){var n=i.length;i.forEach(function(o,a){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(n=a)}),i[n]=r}),i}function U1(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},s,i;function r(n){n.multi?(t.multi[n.kind].push(n),t.multi.fallback.push(n)):t[n.kind][n.tag]=t.fallback[n.tag]=n}for(s=0,i=arguments.length;s<i;s+=1)arguments[s].forEach(r);return t}function $a(t){return this.extend(t)}$a.prototype.extend=function(s){var i=[],r=[];if(s instanceof st)r.push(s);else if(Array.isArray(s))r=r.concat(s);else if(s&&(Array.isArray(s.implicit)||Array.isArray(s.explicit)))s.implicit&&(i=i.concat(s.implicit)),s.explicit&&(r=r.concat(s.explicit));else throw new ds("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(o){if(!(o instanceof st))throw new ds("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new ds("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new ds("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof st))throw new ds("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create($a.prototype);return n.implicit=(this.implicit||[]).concat(i),n.explicit=(this.explicit||[]).concat(r),n.compiledImplicit=ic(n,"implicit"),n.compiledExplicit=ic(n,"explicit"),n.compiledTypeMap=U1(n.compiledImplicit,n.compiledExplicit),n};var G1=$a,W1=new st("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),V1=new st("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),H1=new st("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Y1=new G1({explicit:[W1,V1,H1]});function J1(t){if(t===null)return!0;var s=t.length;return s===1&&t==="~"||s===4&&(t==="null"||t==="Null"||t==="NULL")}function K1(){return null}function Q1(t){return t===null}var X1=new st("tag:yaml.org,2002:null",{kind:"scalar",resolve:J1,construct:K1,predicate:Q1,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Z1(t){if(t===null)return!1;var s=t.length;return s===4&&(t==="true"||t==="True"||t==="TRUE")||s===5&&(t==="false"||t==="False"||t==="FALSE")}function eN(t){return t==="true"||t==="True"||t==="TRUE"}function tN(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var sN=new st("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Z1,construct:eN,predicate:tN,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function iN(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function rN(t){return 48<=t&&t<=55}function nN(t){return 48<=t&&t<=57}function aN(t){if(t===null)return!1;var s=t.length,i=0,r=!1,n;if(!s)return!1;if(n=t[i],(n==="-"||n==="+")&&(n=t[++i]),n==="0"){if(i+1===s)return!0;if(n=t[++i],n==="b"){for(i++;i<s;i++)if(n=t[i],n!=="_"){if(n!=="0"&&n!=="1")return!1;r=!0}return r&&n!=="_"}if(n==="x"){for(i++;i<s;i++)if(n=t[i],n!=="_"){if(!iN(t.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}if(n==="o"){for(i++;i<s;i++)if(n=t[i],n!=="_"){if(!rN(t.charCodeAt(i)))return!1;r=!0}return r&&n!=="_"}}if(n==="_")return!1;for(;i<s;i++)if(n=t[i],n!=="_"){if(!nN(t.charCodeAt(i)))return!1;r=!0}return!(!r||n==="_")}function oN(t){var s=t,i=1,r;if(s.indexOf("_")!==-1&&(s=s.replace(/_/g,"")),r=s[0],(r==="-"||r==="+")&&(r==="-"&&(i=-1),s=s.slice(1),r=s[0]),s==="0")return 0;if(r==="0"){if(s[1]==="b")return i*parseInt(s.slice(2),2);if(s[1]==="x")return i*parseInt(s.slice(2),16);if(s[1]==="o")return i*parseInt(s.slice(2),8)}return i*parseInt(s,10)}function lN(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!ot.isNegativeZero(t)}var cN=new st("tag:yaml.org,2002:int",{kind:"scalar",resolve:aN,construct:oN,predicate:lN,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),dN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function hN(t){return!(t===null||!dN.test(t)||t[t.length-1]==="_")}function mN(t){var s,i;return s=t.replace(/_/g,"").toLowerCase(),i=s[0]==="-"?-1:1,"+-".indexOf(s[0])>=0&&(s=s.slice(1)),s===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:s===".nan"?NaN:i*parseFloat(s,10)}var uN=/^[-+]?[0-9]+e/;function xN(t,s){var i;if(isNaN(t))switch(s){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(s){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(s){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ot.isNegativeZero(t))return"-0.0";return i=t.toString(10),uN.test(i)?i.replace("e",".e"):i}function pN(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||ot.isNegativeZero(t))}var fN=new st("tag:yaml.org,2002:float",{kind:"scalar",resolve:hN,construct:mN,predicate:pN,represent:xN,defaultStyle:"lowercase"}),lm=Y1.extend({implicit:[X1,sN,cN,fN]}),gN=lm,cm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),dm=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function yN(t){return t===null?!1:cm.exec(t)!==null||dm.exec(t)!==null}function jN(t){var s,i,r,n,o,a,l,d=0,m=null,c,u,h;if(s=cm.exec(t),s===null&&(s=dm.exec(t)),s===null)throw new Error("Date resolve error");if(i=+s[1],r=+s[2]-1,n=+s[3],!s[4])return new Date(Date.UTC(i,r,n));if(o=+s[4],a=+s[5],l=+s[6],s[7]){for(d=s[7].slice(0,3);d.length<3;)d+="0";d=+d}return s[9]&&(c=+s[10],u=+(s[11]||0),m=(c*60+u)*6e4,s[9]==="-"&&(m=-m)),h=new Date(Date.UTC(i,r,n,o,a,l,d)),m&&h.setTime(h.getTime()-m),h}function vN(t){return t.toISOString()}var bN=new st("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:yN,construct:jN,instanceOf:Date,represent:vN});function wN(t){return t==="<<"||t===null}var _N=new st("tag:yaml.org,2002:merge",{kind:"scalar",resolve:wN}),Co=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function NN(t){if(t===null)return!1;var s,i,r=0,n=t.length,o=Co;for(i=0;i<n;i++)if(s=o.indexOf(t.charAt(i)),!(s>64)){if(s<0)return!1;r+=6}return r%8===0}function CN(t){var s,i,r=t.replace(/[\r\n=]/g,""),n=r.length,o=Co,a=0,l=[];for(s=0;s<n;s++)s%4===0&&s&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(r.charAt(s));return i=n%4*6,i===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):i===18?(l.push(a>>10&255),l.push(a>>2&255)):i===12&&l.push(a>>4&255),new Uint8Array(l)}function SN(t){var s="",i=0,r,n,o=t.length,a=Co;for(r=0;r<o;r++)r%3===0&&r&&(s+=a[i>>18&63],s+=a[i>>12&63],s+=a[i>>6&63],s+=a[i&63]),i=(i<<8)+t[r];return n=o%3,n===0?(s+=a[i>>18&63],s+=a[i>>12&63],s+=a[i>>6&63],s+=a[i&63]):n===2?(s+=a[i>>10&63],s+=a[i>>4&63],s+=a[i<<2&63],s+=a[64]):n===1&&(s+=a[i>>2&63],s+=a[i<<4&63],s+=a[64],s+=a[64]),s}function kN(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var TN=new st("tag:yaml.org,2002:binary",{kind:"scalar",resolve:NN,construct:CN,predicate:kN,represent:SN}),AN=Object.prototype.hasOwnProperty,EN=Object.prototype.toString;function FN(t){if(t===null)return!0;var s=[],i,r,n,o,a,l=t;for(i=0,r=l.length;i<r;i+=1){if(n=l[i],a=!1,EN.call(n)!=="[object Object]")return!1;for(o in n)if(AN.call(n,o))if(!a)a=!0;else return!1;if(!a)return!1;if(s.indexOf(o)===-1)s.push(o);else return!1}return!0}function DN(t){return t!==null?t:[]}var LN=new st("tag:yaml.org,2002:omap",{kind:"sequence",resolve:FN,construct:DN}),MN=Object.prototype.toString;function PN(t){if(t===null)return!0;var s,i,r,n,o,a=t;for(o=new Array(a.length),s=0,i=a.length;s<i;s+=1){if(r=a[s],MN.call(r)!=="[object Object]"||(n=Object.keys(r),n.length!==1))return!1;o[s]=[n[0],r[n[0]]]}return!0}function BN(t){if(t===null)return[];var s,i,r,n,o,a=t;for(o=new Array(a.length),s=0,i=a.length;s<i;s+=1)r=a[s],n=Object.keys(r),o[s]=[n[0],r[n[0]]];return o}var IN=new st("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:PN,construct:BN}),$N=Object.prototype.hasOwnProperty;function RN(t){if(t===null)return!0;var s,i=t;for(s in i)if($N.call(i,s)&&i[s]!==null)return!1;return!0}function ON(t){return t!==null?t:{}}var zN=new st("tag:yaml.org,2002:set",{kind:"mapping",resolve:RN,construct:ON}),qN=gN.extend({implicit:[bN,_N],explicit:[TN,LN,IN,zN]}),Ts=Object.prototype.hasOwnProperty,pn=1,hm=2,mm=3,fn=4,oa=1,UN=2,rc=3,GN=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,WN=/[\x85\u2028\u2029]/,VN=/[,\[\]\{\}]/,um=/^(?:!|!!|![a-z\-]+!)$/i,xm=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function nc(t){return Object.prototype.toString.call(t)}function Kt(t){return t===10||t===13}function Us(t){return t===9||t===32}function ft(t){return t===9||t===32||t===10||t===13}function li(t){return t===44||t===91||t===93||t===123||t===125}function HN(t){var s;return 48<=t&&t<=57?t-48:(s=t|32,97<=s&&s<=102?s-97+10:-1)}function YN(t){return t===120?2:t===117?4:t===85?8:0}function JN(t){return 48<=t&&t<=57?t-48:-1}function ac(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"":t===95?" ":t===76?"\u2028":t===80?"\u2029":""}function KN(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var pm=new Array(256),fm=new Array(256);for(var ri=0;ri<256;ri++)pm[ri]=ac(ri)?1:0,fm[ri]=ac(ri);function QN(t,s){this.input=t,this.filename=s.filename||null,this.schema=s.schema||qN,this.onWarning=s.onWarning||null,this.legacy=s.legacy||!1,this.json=s.json||!1,this.listener=s.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function gm(t,s){var i={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return i.snippet=$1(i),new ds(s,i)}function ue(t,s){throw gm(t,s)}function gn(t,s){t.onWarning&&t.onWarning.call(null,gm(t,s))}var oc={YAML:function(s,i,r){var n,o,a;s.version!==null&&ue(s,"duplication of %YAML directive"),r.length!==1&&ue(s,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),n===null&&ue(s,"ill-formed argument of the YAML directive"),o=parseInt(n[1],10),a=parseInt(n[2],10),o!==1&&ue(s,"unacceptable YAML version of the document"),s.version=r[0],s.checkLineBreaks=a<2,a!==1&&a!==2&&gn(s,"unsupported YAML version of the document")},TAG:function(s,i,r){var n,o;r.length!==2&&ue(s,"TAG directive accepts exactly two arguments"),n=r[0],o=r[1],um.test(n)||ue(s,"ill-formed tag handle (first argument) of the TAG directive"),Ts.call(s.tagMap,n)&&ue(s,'there is a previously declared suffix for "'+n+'" tag handle'),xm.test(o)||ue(s,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ue(s,"tag prefix is malformed: "+o)}s.tagMap[n]=o}};function Cs(t,s,i,r){var n,o,a,l;if(s<i){if(l=t.input.slice(s,i),r)for(n=0,o=l.length;n<o;n+=1)a=l.charCodeAt(n),a===9||32<=a&&a<=1114111||ue(t,"expected valid JSON character");else GN.test(l)&&ue(t,"the stream contains non-printable characters");t.result+=l}}function lc(t,s,i,r){var n,o,a,l;for(ot.isObject(i)||ue(t,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(i),a=0,l=n.length;a<l;a+=1)o=n[a],Ts.call(s,o)||(s[o]=i[o],r[o]=!0)}function ci(t,s,i,r,n,o,a,l,d){var m,c;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),m=0,c=n.length;m<c;m+=1)Array.isArray(n[m])&&ue(t,"nested arrays are not supported inside keys"),typeof n=="object"&&nc(n[m])==="[object Object]"&&(n[m]="[object Object]");if(typeof n=="object"&&nc(n)==="[object Object]"&&(n="[object Object]"),n=String(n),s===null&&(s={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(m=0,c=o.length;m<c;m+=1)lc(t,s,o[m],i);else lc(t,s,o,i);else!t.json&&!Ts.call(i,n)&&Ts.call(s,n)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=d||t.position,ue(t,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(s,n,{configurable:!0,enumerable:!0,writable:!0,value:o}):s[n]=o,delete i[n];return s}function So(t){var s;s=t.input.charCodeAt(t.position),s===10?t.position++:s===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ue(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function He(t,s,i){for(var r=0,n=t.input.charCodeAt(t.position);n!==0;){for(;Us(n);)n===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(s&&n===35)do n=t.input.charCodeAt(++t.position);while(n!==10&&n!==13&&n!==0);if(Kt(n))for(So(t),n=t.input.charCodeAt(t.position),r++,t.lineIndent=0;n===32;)t.lineIndent++,n=t.input.charCodeAt(++t.position);else break}return i!==-1&&r!==0&&t.lineIndent<i&&gn(t,"deficient indentation"),r}function On(t){var s=t.position,i;return i=t.input.charCodeAt(s),!!((i===45||i===46)&&i===t.input.charCodeAt(s+1)&&i===t.input.charCodeAt(s+2)&&(s+=3,i=t.input.charCodeAt(s),i===0||ft(i)))}function ko(t,s){s===1?t.result+=" ":s>1&&(t.result+=ot.repeat(`
`,s-1))}function XN(t,s,i){var r,n,o,a,l,d,m,c,u=t.kind,h=t.result,p;if(p=t.input.charCodeAt(t.position),ft(p)||li(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(n=t.input.charCodeAt(t.position+1),ft(n)||i&&li(n)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;p!==0;){if(p===58){if(n=t.input.charCodeAt(t.position+1),ft(n)||i&&li(n))break}else if(p===35){if(r=t.input.charCodeAt(t.position-1),ft(r))break}else{if(t.position===t.lineStart&&On(t)||i&&li(p))break;if(Kt(p))if(d=t.line,m=t.lineStart,c=t.lineIndent,He(t,!1,-1),t.lineIndent>=s){l=!0,p=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=d,t.lineStart=m,t.lineIndent=c;break}}l&&(Cs(t,o,a,!1),ko(t,t.line-d),o=a=t.position,l=!1),Us(p)||(a=t.position+1),p=t.input.charCodeAt(++t.position)}return Cs(t,o,a,!1),t.result?!0:(t.kind=u,t.result=h,!1)}function ZN(t,s){var i,r,n;if(i=t.input.charCodeAt(t.position),i!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(i=t.input.charCodeAt(t.position))!==0;)if(i===39)if(Cs(t,r,t.position,!0),i=t.input.charCodeAt(++t.position),i===39)r=t.position,t.position++,n=t.position;else return!0;else Kt(i)?(Cs(t,r,n,!0),ko(t,He(t,!1,s)),r=n=t.position):t.position===t.lineStart&&On(t)?ue(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);ue(t,"unexpected end of the stream within a single quoted scalar")}function eC(t,s){var i,r,n,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Cs(t,i,t.position,!0),t.position++,!0;if(l===92){if(Cs(t,i,t.position,!0),l=t.input.charCodeAt(++t.position),Kt(l))He(t,!1,s);else if(l<256&&pm[l])t.result+=fm[l],t.position++;else if((a=YN(l))>0){for(n=a,o=0;n>0;n--)l=t.input.charCodeAt(++t.position),(a=HN(l))>=0?o=(o<<4)+a:ue(t,"expected hexadecimal character");t.result+=KN(o),t.position++}else ue(t,"unknown escape sequence");i=r=t.position}else Kt(l)?(Cs(t,i,r,!0),ko(t,He(t,!1,s)),i=r=t.position):t.position===t.lineStart&&On(t)?ue(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}ue(t,"unexpected end of the stream within a double quoted scalar")}function tC(t,s){var i=!0,r,n,o,a=t.tag,l,d=t.anchor,m,c,u,h,p,b=Object.create(null),k,F,L,A;if(A=t.input.charCodeAt(t.position),A===91)c=93,p=!1,l=[];else if(A===123)c=125,p=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),A=t.input.charCodeAt(++t.position);A!==0;){if(He(t,!0,s),A=t.input.charCodeAt(t.position),A===c)return t.position++,t.tag=a,t.anchor=d,t.kind=p?"mapping":"sequence",t.result=l,!0;i?A===44&&ue(t,"expected the node content, but found ','"):ue(t,"missed comma between flow collection entries"),F=k=L=null,u=h=!1,A===63&&(m=t.input.charCodeAt(t.position+1),ft(m)&&(u=h=!0,t.position++,He(t,!0,s))),r=t.line,n=t.lineStart,o=t.position,_i(t,s,pn,!1,!0),F=t.tag,k=t.result,He(t,!0,s),A=t.input.charCodeAt(t.position),(h||t.line===r)&&A===58&&(u=!0,A=t.input.charCodeAt(++t.position),He(t,!0,s),_i(t,s,pn,!1,!0),L=t.result),p?ci(t,l,b,F,k,L,r,n,o):u?l.push(ci(t,null,b,F,k,L,r,n,o)):l.push(k),He(t,!0,s),A=t.input.charCodeAt(t.position),A===44?(i=!0,A=t.input.charCodeAt(++t.position)):i=!1}ue(t,"unexpected end of the stream within a flow collection")}function sC(t,s){var i,r,n=oa,o=!1,a=!1,l=s,d=0,m=!1,c,u;if(u=t.input.charCodeAt(t.position),u===124)r=!1;else if(u===62)r=!0;else return!1;for(t.kind="scalar",t.result="";u!==0;)if(u=t.input.charCodeAt(++t.position),u===43||u===45)oa===n?n=u===43?rc:UN:ue(t,"repeat of a chomping mode identifier");else if((c=JN(u))>=0)c===0?ue(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?ue(t,"repeat of an indentation width identifier"):(l=s+c-1,a=!0);else break;if(Us(u)){do u=t.input.charCodeAt(++t.position);while(Us(u));if(u===35)do u=t.input.charCodeAt(++t.position);while(!Kt(u)&&u!==0)}for(;u!==0;){for(So(t),t.lineIndent=0,u=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&u===32;)t.lineIndent++,u=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),Kt(u)){d++;continue}if(t.lineIndent<l){n===rc?t.result+=ot.repeat(`
`,o?1+d:d):n===oa&&o&&(t.result+=`
`);break}for(r?Us(u)?(m=!0,t.result+=ot.repeat(`
`,o?1+d:d)):m?(m=!1,t.result+=ot.repeat(`
`,d+1)):d===0?o&&(t.result+=" "):t.result+=ot.repeat(`
`,d):t.result+=ot.repeat(`
`,o?1+d:d),o=!0,a=!0,d=0,i=t.position;!Kt(u)&&u!==0;)u=t.input.charCodeAt(++t.position);Cs(t,i,t.position,!1)}return!0}function cc(t,s){var i,r=t.tag,n=t.anchor,o=[],a,l=!1,d;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),d=t.input.charCodeAt(t.position);d!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ue(t,"tab characters must not be used in indentation")),!(d!==45||(a=t.input.charCodeAt(t.position+1),!ft(a))));){if(l=!0,t.position++,He(t,!0,-1)&&t.lineIndent<=s){o.push(null),d=t.input.charCodeAt(t.position);continue}if(i=t.line,_i(t,s,mm,!1,!0),o.push(t.result),He(t,!0,-1),d=t.input.charCodeAt(t.position),(t.line===i||t.lineIndent>s)&&d!==0)ue(t,"bad indentation of a sequence entry");else if(t.lineIndent<s)break}return l?(t.tag=r,t.anchor=n,t.kind="sequence",t.result=o,!0):!1}function iC(t,s,i){var r,n,o,a,l,d,m=t.tag,c=t.anchor,u={},h=Object.create(null),p=null,b=null,k=null,F=!1,L=!1,A;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=u),A=t.input.charCodeAt(t.position);A!==0;){if(!F&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ue(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,(A===63||A===58)&&ft(r))A===63?(F&&(ci(t,u,h,p,b,null,a,l,d),p=b=k=null),L=!0,F=!0,n=!0):F?(F=!1,n=!0):ue(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,A=r;else{if(a=t.line,l=t.lineStart,d=t.position,!_i(t,i,hm,!1,!0))break;if(t.line===o){for(A=t.input.charCodeAt(t.position);Us(A);)A=t.input.charCodeAt(++t.position);if(A===58)A=t.input.charCodeAt(++t.position),ft(A)||ue(t,"a whitespace character is expected after the key-value separator within a block mapping"),F&&(ci(t,u,h,p,b,null,a,l,d),p=b=k=null),L=!0,F=!1,n=!1,p=t.tag,b=t.result;else if(L)ue(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=m,t.anchor=c,!0}else if(L)ue(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=m,t.anchor=c,!0}if((t.line===o||t.lineIndent>s)&&(F&&(a=t.line,l=t.lineStart,d=t.position),_i(t,s,fn,!0,n)&&(F?b=t.result:k=t.result),F||(ci(t,u,h,p,b,k,a,l,d),p=b=k=null),He(t,!0,-1),A=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>s)&&A!==0)ue(t,"bad indentation of a mapping entry");else if(t.lineIndent<s)break}return F&&ci(t,u,h,p,b,null,a,l,d),L&&(t.tag=m,t.anchor=c,t.kind="mapping",t.result=u),L}function rC(t){var s,i=!1,r=!1,n,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&ue(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(i=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,n="!!",a=t.input.charCodeAt(++t.position)):n="!",s=t.position,i){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(s,t.position),a=t.input.charCodeAt(++t.position)):ue(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!ft(a);)a===33&&(r?ue(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(s-1,t.position+1),um.test(n)||ue(t,"named tag handle cannot contain such characters"),r=!0,s=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(s,t.position),VN.test(o)&&ue(t,"tag suffix cannot contain flow indicator characters")}o&&!xm.test(o)&&ue(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ue(t,"tag name is malformed: "+o)}return i?t.tag=o:Ts.call(t.tagMap,n)?t.tag=t.tagMap[n]+o:n==="!"?t.tag="!"+o:n==="!!"?t.tag="tag:yaml.org,2002:"+o:ue(t,'undeclared tag handle "'+n+'"'),!0}function nC(t){var s,i;if(i=t.input.charCodeAt(t.position),i!==38)return!1;for(t.anchor!==null&&ue(t,"duplication of an anchor property"),i=t.input.charCodeAt(++t.position),s=t.position;i!==0&&!ft(i)&&!li(i);)i=t.input.charCodeAt(++t.position);return t.position===s&&ue(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(s,t.position),!0}function aC(t){var s,i,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),s=t.position;r!==0&&!ft(r)&&!li(r);)r=t.input.charCodeAt(++t.position);return t.position===s&&ue(t,"name of an alias node must contain at least one character"),i=t.input.slice(s,t.position),Ts.call(t.anchorMap,i)||ue(t,'unidentified alias "'+i+'"'),t.result=t.anchorMap[i],He(t,!0,-1),!0}function _i(t,s,i,r,n){var o,a,l,d=1,m=!1,c=!1,u,h,p,b,k,F;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=fn===i||mm===i,r&&He(t,!0,-1)&&(m=!0,t.lineIndent>s?d=1:t.lineIndent===s?d=0:t.lineIndent<s&&(d=-1)),d===1)for(;rC(t)||nC(t);)He(t,!0,-1)?(m=!0,l=o,t.lineIndent>s?d=1:t.lineIndent===s?d=0:t.lineIndent<s&&(d=-1)):l=!1;if(l&&(l=m||n),(d===1||fn===i)&&(pn===i||hm===i?k=s:k=s+1,F=t.position-t.lineStart,d===1?l&&(cc(t,F)||iC(t,F,k))||tC(t,k)?c=!0:(a&&sC(t,k)||ZN(t,k)||eC(t,k)?c=!0:aC(t)?(c=!0,(t.tag!==null||t.anchor!==null)&&ue(t,"alias node should not have any properties")):XN(t,k,pn===i)&&(c=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):d===0&&(c=l&&cc(t,F))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ue(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),u=0,h=t.implicitTypes.length;u<h;u+=1)if(b=t.implicitTypes[u],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Ts.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,p=t.typeMap.multi[t.kind||"fallback"],u=0,h=p.length;u<h;u+=1)if(t.tag.slice(0,p[u].tag.length)===p[u].tag){b=p[u];break}b||ue(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&ue(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ue(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||c}function oC(t){var s=t.position,i,r,n,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(He(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),i=t.position;a!==0&&!ft(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(i,t.position),n=[],r.length<1&&ue(t,"directive name must not be less than one character in length");a!==0;){for(;Us(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!Kt(a));break}if(Kt(a))break;for(i=t.position;a!==0&&!ft(a);)a=t.input.charCodeAt(++t.position);n.push(t.input.slice(i,t.position))}a!==0&&So(t),Ts.call(oc,r)?oc[r](t,r,n):gn(t,'unknown document directive "'+r+'"')}if(He(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,He(t,!0,-1)):o&&ue(t,"directives end mark is expected"),_i(t,t.lineIndent-1,fn,!1,!0),He(t,!0,-1),t.checkLineBreaks&&WN.test(t.input.slice(s,t.position))&&gn(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&On(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,He(t,!0,-1));return}if(t.position<t.length-1)ue(t,"end of the stream or a document separator is expected");else return}function lC(t,s){t=String(t),s=s||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var i=new QN(t,s),r=t.indexOf("\0");for(r!==-1&&(i.position=r,ue(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)oC(i);return i.documents}function cC(t,s){var i=lC(t,s);if(i.length!==0){if(i.length===1)return i[0];throw new ds("expected a single document in the stream, but found more")}}var dC=cC,hC={load:dC},mC=lm,uC=hC.load;function xC(t){const s=t.match(wh);if(!s)return{text:t,metadata:{}};let i=uC(s[1],{schema:mC})??{};i=typeof i=="object"&&!Array.isArray(i)?i:{};const r={};return i.displayMode&&(r.displayMode=i.displayMode.toString()),i.title&&(r.title=i.title.toString()),i.config&&(r.config=i.config),{text:t.slice(s[0].length),metadata:r}}const pC=t=>t.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(s,i,r)=>"<"+i+r.replace(/="([^"]*)"/g,"='$1'")+">"),fC=t=>{const{text:s,metadata:i}=xC(t),{displayMode:r,title:n,config:o={}}=i;return r&&(o.gantt||(o.gantt={}),o.gantt.displayMode=r),{title:n,config:o,text:s}},gC=t=>{const s=tr.detectInit(t)??{},i=tr.detectDirective(t,"wrap");return Array.isArray(i)?s.wrap=i.some(({type:r})=>{}):(i==null?void 0:i.type)==="wrap"&&(s.wrap=!0),{text:qb(t),directive:s}};function ym(t){const s=pC(t),i=fC(s),r=gC(i.text),n=Ah(i.config,r.directive);return t=C1(r.text),{code:t,title:i.title,config:n}}const yC=5e4,jC="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",vC="sandbox",bC="loose",wC="http://www.w3.org/2000/svg",_C="http://www.w3.org/1999/xlink",NC="http://www.w3.org/1999/xhtml",CC="100%",SC="100%",kC="border:0;margin:0;",TC="margin:0",AC="allow-top-navigation-by-user-activation allow-popups",EC='The "iframe" tag is not supported by your browser.',FC=["foreignobject"],DC=["dominant-baseline"];function jm(t){const s=ym(t);return mn(),xw(s.config??{}),s}async function LC(t,s){No(),t=jm(t).code;try{await To(t)}catch(i){if(s!=null&&s.suppressErrors)return!1;throw i}return!0}const dc=(t,s,i=[])=>`
.${t} ${s} { ${i.join(" !important; ")} !important; }`,MC=(t,s={})=>{var i;let r="";if(t.themeCSS!==void 0&&(r+=`
${t.themeCSS}`),t.fontFamily!==void 0&&(r+=`
:root { --mermaid-font-family: ${t.fontFamily}}`),t.altFontFamily!==void 0&&(r+=`
:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),!ra(s)){const l=t.htmlLabels||((i=t.flowchart)==null?void 0:i.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const d in s){const m=s[d];ra(m.styles)||l.forEach(c=>{r+=dc(m.id,c,m.styles)}),ra(m.textStyles)||(r+=dc(m.id,"tspan",m.textStyles))}}return r},PC=(t,s,i,r)=>{const n=MC(t,i),o=M_(s,n,t.themeVariables);return Ea(Vv(`${r}{${o}}`),Yv)},BC=(t="",s,i)=>{let r=t;return!i&&!s&&(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=dw(r),r=r.replace(/<br>/g,"<br/>"),r},IC=(t="",s)=>{var i,r;const n=(r=(i=s==null?void 0:s.viewBox)==null?void 0:i.baseVal)!=null&&r.height?s.viewBox.baseVal.height+"px":SC,o=btoa('<body style="'+TC+'">'+t+"</body>");return`<iframe style="width:${CC};height:${n};${kC}" src="data:text/html;base64,${o}" sandbox="${AC}">
  ${EC}
</iframe>`},hc=(t,s,i,r,n)=>{const o=t.append("div");o.attr("id",i),r&&o.attr("style",r);const a=o.append("svg").attr("id",s).attr("width","100%").attr("xmlns",wC);return n&&a.attr("xmlns:xlink",n),a.append("g"),t};function mc(t,s){return t.append("iframe").attr("id",s).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const $C=(t,s,i,r)=>{var n,o,a;(n=t.getElementById(s))==null||n.remove(),(o=t.getElementById(i))==null||o.remove(),(a=t.getElementById(r))==null||a.remove()},RC=async function(t,s,i){var r,n,o,a,l,d;No();const m=jm(s);s=m.code;const c=ts();fe.debug(c),s.length>((c==null?void 0:c.maxTextSize)??yC)&&(s=jC);const u="#"+t,h="i"+t,p="#"+h,b="d"+t,k="#"+b;let F=kt("body");const L=c.securityLevel===vC,A=c.securityLevel===bC,U=c.fontFamily;if(i!==void 0){if(i&&(i.innerHTML=""),L){const T=mc(kt(i),h);F=kt(T.nodes()[0].contentDocument.body),F.node().style.margin=0}else F=kt(i);hc(F,t,b,`font-family: ${U}`,_C)}else{if($C(document,t,b,h),L){const T=mc(kt("body"),h);F=kt(T.nodes()[0].contentDocument.body),F.node().style.margin=0}else F=kt("body");hc(F,t,b)}let B,C;try{B=await To(s,{title:m.title})}catch(T){B=new nm("error"),C=T}const E=F.select(k).node(),j=B.type,M=E.firstChild,q=M.firstChild,H=(n=(r=B.renderer).getClasses)==null?void 0:n.call(r,s,B),z=PC(c,j,H,u),V=document.createElement("style");V.innerHTML=z,M.insertBefore(V,q);try{await B.renderer.draw(s,t,Zl,B)}catch(T){throw Q_.draw(s,t,Zl),T}const te=F.select(`${k} svg`),Y=(a=(o=B.db).getAccTitle)==null?void 0:a.call(o),x=(d=(l=B.db).getAccDescription)==null?void 0:d.call(l);zC(j,te,Y,x),F.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns",NC);let f=F.select(k).node().innerHTML;if(fe.debug("config.arrowMarkerAbsolute",c.arrowMarkerAbsolute),f=BC(f,L,jh(c.arrowMarkerAbsolute)),L){const T=F.select(k+" svg").node();f=IC(f,T)}else A||(f=fi.sanitize(f,{ADD_TAGS:FC,ADD_ATTR:DC}));if(b1(),C)throw C;const D=kt(L?p:k).node();return D&&"remove"in D&&D.remove(),{svg:f,bindFunctions:B.db.bindFunctions}};function OC(t={}){var s;t!=null&&t.fontFamily&&!((s=t.themeVariables)!=null&&s.fontFamily)&&(t.themeVariables||(t.themeVariables={}),t.themeVariables.fontFamily=t.fontFamily),mw(t),t!=null&&t.theme&&t.theme in ms?t.themeVariables=ms[t.theme].getThemeVariables(t.themeVariables):t&&(t.themeVariables=ms.default.getThemeVariables(t.themeVariables));const i=typeof t=="object"?hw(t):Fh();uo(i.logLevel),No()}const To=(t,s={})=>{const{code:i}=ym(t);return v1(i,s)};function zC(t,s,i,r){_1(s,t),N1(s,i,r,s.attr("id"))}const Ys=Object.freeze({render:RC,parse:LC,getDiagramFromText:To,initialize:OC,getConfig:ts,setConfig:Dh,getSiteConfig:Fh,updateSiteConfig:uw,reset:()=>{mn()},globalReset:()=>{mn(bi)},defaultConfig:bi});uo(ts().logLevel);mn(ts());const qC=async()=>{fe.debug("Loading registered diagrams");const s=(await Promise.allSettled(Object.entries(vi).map(async([i,{detector:r,loader:n}])=>{if(n)try{_o(i)}catch{try{const{diagram:a,id:l}=await n();xn(l,a,r)}catch(a){throw fe.error(`Failed to load external diagram with key ${i}. Removing from detectors.`),delete vi[i],a}}}))).filter(i=>i.status==="rejected");if(s.length>0){fe.error(`Failed to load ${s.length} external diagrams`);for(const i of s)fe.error(i);throw new Error(`Failed to load ${s.length} external diagrams`)}},UC=(t,s,i)=>{fe.warn(t),Th(t)?(i&&i(t.str,t.hash),s.push({...t,message:t.str,error:t})):(i&&i(t),t instanceof Error&&s.push({str:t.message,message:t.message,hash:t.name,error:t}))},vm=async function(t={querySelector:".mermaid"}){try{await GC(t)}catch(s){if(Th(s)&&fe.error(s.str),Ut.parseError&&Ut.parseError(s),!t.suppressErrors)throw fe.error("Use the suppressErrors option to suppress these errors"),s}},GC=async function({postRenderCallback:t,querySelector:s,nodes:i}={querySelector:".mermaid"}){const r=Ys.getConfig();fe.debug(`${t?"":"No "}Callback function found`);let n;if(i)n=i;else if(s)n=document.querySelectorAll(s);else throw new Error("Nodes and querySelector are both undefined");fe.debug(`Found ${n.length} diagrams`),(r==null?void 0:r.startOnLoad)!==void 0&&(fe.debug("Start On Load: "+(r==null?void 0:r.startOnLoad)),Ys.updateSiteConfig({startOnLoad:r==null?void 0:r.startOnLoad}));const o=new tr.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let a;const l=[];for(const d of Array.from(n)){fe.info("Rendering diagram: "+d.id);/*! Check if previously processed */if(d.getAttribute("data-processed"))continue;d.setAttribute("data-processed","true");const m=`mermaid-${o.next()}`;a=d.innerHTML,a=Gx(tr.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const c=tr.detectInit(a);c&&fe.debug("Detected early reinit: ",c);try{const{svg:u,bindFunctions:h}=await Nm(m,a,d);d.innerHTML=u,t&&await t(m),h&&h(d)}catch(u){UC(u,l,Ut.parseError)}}if(l.length>0)throw l[0]},bm=function(t){Ys.initialize(t)},WC=async function(t,s,i){fe.warn("mermaid.init is deprecated. Please use run instead."),t&&bm(t);const r={postRenderCallback:i,querySelector:".mermaid"};typeof s=="string"?r.querySelector=s:s&&(s instanceof HTMLElement?r.nodes=[s]:r.nodes=s),await vm(r)},VC=async(t,{lazyLoad:s=!0}={})=>{Nh(...t),s===!1&&await qC()},wm=function(){if(Ut.startOnLoad){const{startOnLoad:t}=Ys.getConfig();t&&Ut.run().catch(s=>fe.error("Mermaid failed to initialize",s))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",wm,!1)}const HC=function(t){Ut.parseError=t},yn=[];let la=!1;const _m=async()=>{if(!la){for(la=!0;yn.length>0;){const t=yn.shift();if(t)try{await t()}catch(s){fe.error("Error executing queue",s)}}la=!1}},YC=async(t,s)=>new Promise((i,r)=>{const n=()=>new Promise((o,a)=>{Ys.parse(t,s).then(l=>{o(l),i(l)},l=>{var d;fe.error("Error parsing",l),(d=Ut.parseError)==null||d.call(Ut,l),a(l),r(l)})});yn.push(n),_m().catch(r)}),Nm=(t,s,i)=>new Promise((r,n)=>{const o=()=>new Promise((a,l)=>{Ys.render(t,s,i).then(d=>{a(d),r(d)},d=>{var m;fe.error("Error parsing",d),(m=Ut.parseError)==null||m.call(Ut,d),l(d),n(d)})});yn.push(o),_m().catch(n)}),Ut={startOnLoad:!0,mermaidAPI:Ys,parse:YC,render:Nm,init:WC,run:vm,registerExternalDiagrams:VC,initialize:bm,parseError:void 0,contentLoaded:wm,setParseErrorHandler:HC,detectType:$n},JC=({project:t,documents:s,diagrams:i,isOpen:r,onClose:n})=>{var ys,wr,_r,Ue,ns,Nr,Fi;const{toast:o}=Gt(),[a,l]=y.useState(0),[d,m]=y.useState(!1),[c,u]=y.useState(!1),[h,p]=y.useState(!1),[b,k]=y.useState([8]),[F,L]=y.useState("executive"),[A,U]=y.useState("view"),[B,C]=y.useState(!1),[E,j]=y.useState(!1),[M,q]=y.useState(!1),[H,z]=y.useState("standard"),[V,te]=y.useState({}),[Y,x]=y.useState(null),[f,g]=y.useState(!1),[D,T]=y.useState([]),[O,w]=y.useState({slideViews:{},timeSpent:{},interactions:[]}),[Z,ie]=y.useState({x:0,y:0}),le=y.useRef(null),pe=y.useRef(null),Ee=y.useRef(null),G=y.useRef(new Date);y.useEffect(()=>{Ut.initialize({startOnLoad:!0,theme:"default",securityLevel:"loose"})},[]);const oe=()=>{const W=[];return W.push({id:"cover",type:"cover",title:t.name,content:{title:t.name,subtitle:"Strategic Document Portfolio",organization:"KAIROS Platform",date:new Date().toLocaleDateString(),presenter:"Strategic Planning Team",stats:{documents:s.length,diagrams:i.length,completion:Math.round(s.length/10*100)}},duration:b[0],animation:"fade",interactiveElements:[],allowInteraction:!0,template:H}),W.push({id:"dashboard",type:"overview",title:"Executive Dashboard",content:{description:t.problem_statement,kpis:J(),charts:re(),heatmap:Te(),timeline:it()},duration:b[0]+3,animation:"slide",interactiveElements:[],allowInteraction:!0,template:"dashboard"}),s.length>1&&W.push({id:"comparison",type:"comparison",title:"Document Analysis & Comparison",content:{documents:s.slice(0,3),comparison:Bt(),relationships:Ds(),insights:Vt()},duration:b[0]+2,animation:"flip",interactiveElements:[],allowInteraction:!0,template:"infographic"}),i.forEach((we,Pe)=>{W.push({id:`interactive-diagram-${we._id}`,type:"diagram",title:`Interactive: ${we.title}`,content:{diagram:we,mermaidCode:we.mermaid_code,analysis:ps(we),interactiveNodes:fs(we),flowAnalysis:Xs(we)},duration:b[0]+4,animation:"zoom",interactiveElements:[],allowInteraction:!0,template:"standard"})}),F==="workshop"&&W.push({id:"workshop",type:"interactive",title:"Workshop: Strategic Planning Session",content:{activities:Ls(),tools:["Brainstorming","Prioritization","Action Planning"],outcomes:Ti(),resources:ne()},duration:b[0]*3,animation:"slide",interactiveElements:[],allowInteraction:!0,template:"minimal"}),W.push({id:"action-summary",type:"summary",title:"Strategic Action Plan",content:{keyAchievements:jr(),actionItems:_e(),timeline:Je(),responsibilities:It(),successMetrics:Zs(),callToAction:vr()},duration:b[0]+3,animation:"fade",interactiveElements:[],allowInteraction:!0,template:"standard"}),W},[de,P]=y.useState([]);y.useEffect(()=>{P(oe())},[F,H,s,i]);const J=()=>[{metric:"Strategic Alignment",value:"94%",trend:"up",target:"95%"},{metric:"Completion Rate",value:"87%",trend:"up",target:"90%"},{metric:"Stakeholder Satisfaction",value:"92%",trend:"stable",target:"90%"},{metric:"Risk Mitigation",value:"85%",trend:"up",target:"80%"}],re=()=>({progress:[{phase:"Planning",completion:100},{phase:"Analysis",completion:85},{phase:"Design",completion:60},{phase:"Implementation",completion:20}],budget:[{category:"Personnel",allocated:45e4,spent:123e3},{category:"Technology",allocated:2e5,spent:45e3},{category:"Operations",allocated:15e4,spent:28e3}]}),Te=()=>({riskAreas:[{area:"Technical Complexity",severity:"high",likelihood:"medium"},{area:"Resource Availability",severity:"medium",likelihood:"high"},{area:"Stakeholder Alignment",severity:"low",likelihood:"low"},{area:"Timeline Pressure",severity:"medium",likelihood:"medium"}]}),it=()=>[{milestone:"Project Charter",date:"2024-01-15",status:"completed"},{milestone:"Requirements Analysis",date:"2024-02-28",status:"completed"},{milestone:"System Design",date:"2024-04-15",status:"in-progress"},{milestone:"Implementation",date:"2024-06-30",status:"pending"}],Bt=()=>({similarities:["Strategic alignment","Risk assessment approach","Success metrics"],differences:["Implementation timeline","Resource requirements","Stakeholder involvement"],gaps:["Integration planning","Change management","Training requirements"]}),Ds=()=>[{from:"Business Case",to:"Project Charter",relationship:"justifies"},{from:"Project Charter",to:"Scope Statement",relationship:"defines"},{from:"Scope Statement",to:"RFP Document",relationship:"specifies"}],Vt=()=>["All documents align on strategic objectives","Timeline consistency across planning documents","Resource allocation matches budget projections","Risk mitigation strategies are comprehensive"],ps=W=>({complexity:W.mermaid_code.split(`
`).length>10?"Complex":"Simple",elements:(W.mermaid_code.match(/-->/g)||[]).length,type:W.diagram_type}),fs=W=>(W.mermaid_code.match(/(\w+)\[(.*?)\]/g)||[]).map((Pe,K)=>({id:`node-${K}`,label:Pe.replace(/\w+\[(.*?)\]/,"$1"),x:Math.random()*80+10,y:Math.random()*60+20,description:`Interactive node: ${Pe}`})),Xs=W=>{const we=(W.mermaid_code.match(/-->/g)||[]).length,Pe=(W.mermaid_code.match(/\w+\[/g)||[]).length;return{complexity:we>10?"High":we>5?"Medium":"Low",nodes:Pe,connections:we,density:Pe>0?(we/Pe).toFixed(2):"0"}},Ls=()=>[{name:"Strategic Visioning",duration:30,participants:"All"},{name:"Gap Analysis",duration:45,participants:"Teams"},{name:"Action Planning",duration:60,participants:"All"}],Ti=()=>["Aligned strategic vision","Prioritized action items","Clear responsibilities","Defined success metrics"],ne=()=>["Digital whiteboard access","Strategy templates","Action planning worksheets","Follow-up task assignments"],_e=()=>[{action:"Finalize project charter",owner:"Project Manager",due:"2024-05-15",priority:"High"},{action:"Secure budget approval",owner:"Finance Director",due:"2024-05-20",priority:"High"},{action:"Begin vendor selection",owner:"Procurement Lead",due:"2024-06-01",priority:"Medium"},{action:"Setup governance structure",owner:"Program Director",due:"2024-05-25",priority:"Medium"}],Je=()=>[{phase:"Immediate (Next 2 weeks)",actions:2},{phase:"Short-term (1 month)",actions:3},{phase:"Medium-term (3 months)",actions:4},{phase:"Long-term (6+ months)",actions:2}],It=()=>[{role:"Project Manager",responsibilities:["Timeline management","Risk tracking","Stakeholder communication"]},{role:"Technical Lead",responsibilities:["Architecture decisions","Quality assurance","Team coordination"]},{role:"Business Analyst",responsibilities:["Requirements validation","Process design","User acceptance"]}],Zs=()=>[{metric:"On-time delivery",target:"95%",current:"87%"},{metric:"Budget adherence",target:"≤ 5% variance",current:"2.3% under"},{metric:"Quality score",target:"4.5/5",current:"4.2/5"},{metric:"Stakeholder satisfaction",target:"90%+",current:"92%"}],jr=()=>[`${s.length} strategic documents completed`,`${i.length} process diagrams validated`,"Comprehensive risk assessment finalized","Stakeholder alignment achieved across all workstreams"],vr=()=>({primary:"Approve Strategic Implementation Plan",secondary:"Authorize Phase 2 Budget Release",timeline:"Decision Required: Next Board Meeting",impact:"$2.3M strategic investment opportunity"}),Ai=y.useCallback(W=>{var Ms,si;if(A==="view"||!((Ms=de[a])!=null&&Ms.allowInteraction))return;const we=(si=pe.current)==null?void 0:si.getBoundingClientRect();if(!we)return;const Pe=(W.clientX-we.left)/we.width*100,K=(W.clientY-we.top)/we.height*100,be={id:`element-${Date.now()}`,type:A,x:Pe,y:K,content:A==="comment"?"New comment...":"Annotation",timestamp:new Date,color:br(A)};te(Qe=>({...Qe,[de[a].id]:[...Qe[de[a].id]||[],be]})),w(Qe=>({...Qe,interactions:[...Qe.interactions,{slide:a,type:A,timestamp:new Date}]})),o({title:"Interactive Element Added",description:`${A} added to slide`})},[A,a,de]),br=W=>({annotate:"#3b82f6",highlight:"#eab308",comment:"#10b981",hotspot:"#ef4444"})[W]||"#6b7280",ei=y.useCallback(W=>{if(M&&pe.current){const we=pe.current.getBoundingClientRect();ie({x:W.clientX-we.left,y:W.clientY-we.top})}},[M]),gs=W=>{const we=Date.now()-G.current.getTime();w(Pe=>({...Pe,slideViews:{...Pe.slideViews,[a]:(Pe.slideViews[a]||0)+1},timeSpent:{...Pe.timeSpent,[a]:(Pe.timeSpent[a]||0)+we}})),l(W),G.current=new Date},jt=()=>{gs((a+1)%de.length)},rs=()=>{gs(a===0?de.length-1:a-1)};y.useEffect(()=>{var W;return d&&h?Ee.current=setTimeout(()=>{jt()},((W=de[a])==null?void 0:W.duration)*1e3||8e3):Ee.current&&clearTimeout(Ee.current),()=>{Ee.current&&clearTimeout(Ee.current)}},[d,h,a,de]),y.useEffect(()=>{const W=we=>{if(r)switch(we.key){case"ArrowRight":case" ":we.preventDefault(),jt();break;case"ArrowLeft":we.preventDefault(),rs();break;case"Escape":n();break;case"f":case"F":ti();break;case"l":case"L":q(!M);break;case"g":case"G":C(!B);break;case"n":case"N":j(!E);break;case"a":case"A":U("annotate");break;case"h":case"H":U("highlight");break;case"c":case"C":U("comment");break}};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[r,M,B,E]);const ti=()=>{!c&&le.current?(le.current.requestFullscreen(),u(!0)):document.fullscreenElement&&(document.exitFullscreen(),u(!1))},Ei=()=>{const W={presentation:{project:t.name,slides:de.length,mode:F,template:H},analytics:O,interactions:V,timestamp:new Date().toISOString()},we=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),Pe=URL.createObjectURL(we),K=document.createElement("a");K.href=Pe,K.download=`${t.name}-presentation-data.json`,K.click(),URL.revokeObjectURL(Pe),o({title:"Presentation Data Exported",description:"Analytics and interaction data downloaded"})},zn=W=>{const we=V[W.id]||[],Pe=()=>{switch(W.type){case"cover":return e.jsxs("div",{className:`h-full relative ${W.template==="infographic"?"bg-gradient-to-br from-primary via-primary/80 to-primary/60":W.template==="minimal"?"bg-white":"bg-gradient-to-br from-primary/20 to-primary/5"} rounded-lg overflow-hidden`,children:[W.template==="infographic"&&e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-white rounded-full"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-24 h-24 bg-white rounded-full"}),e.jsx("div",{className:"absolute top-1/2 right-10 w-16 h-16 bg-white rounded-full"})]}),e.jsx("div",{className:"relative h-full flex flex-col items-center justify-center text-center p-12",children:e.jsxs("div",{className:"space-y-8 max-w-4xl",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:`font-bold ${W.template==="infographic"?"text-6xl text-white":W.template==="minimal"?"text-5xl text-gray-900":"text-6xl text-primary"}`,children:W.content.title}),e.jsx("p",{className:`text-2xl ${W.template==="infographic"?"text-white/90":W.template==="minimal"?"text-gray-600":"text-muted-foreground"}`,children:W.content.subtitle})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 mt-12",children:[e.jsx(_,{className:`${W.template==="infographic"?"bg-white/20 border-white/30":""}`,children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-4xl font-bold ${W.template==="infographic"?"text-white":"text-primary"}`,children:W.content.stats.documents}),e.jsx("p",{className:`text-sm ${W.template==="infographic"?"text-white/80":"text-muted-foreground"}`,children:"Strategic Documents"})]})})}),e.jsx(_,{className:`${W.template==="infographic"?"bg-white/20 border-white/30":""}`,children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-4xl font-bold ${W.template==="infographic"?"text-white":"text-primary"}`,children:W.content.stats.diagrams}),e.jsx("p",{className:`text-sm ${W.template==="infographic"?"text-white/80":"text-muted-foreground"}`,children:"Process Diagrams"})]})})}),e.jsx(_,{className:`${W.template==="infographic"?"bg-white/20 border-white/30":""}`,children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:`text-4xl font-bold ${W.template==="infographic"?"text-white":"text-primary"}`,children:[W.content.stats.completion,"%"]}),e.jsx("p",{className:`text-sm ${W.template==="infographic"?"text-white/80":"text-muted-foreground"}`,children:"Project Completion"})]})})})]}),e.jsxs("div",{className:`space-y-3 text-lg ${W.template==="infographic"?"text-white/90":W.template==="minimal"?"text-gray-700":"text-muted-foreground"}`,children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Organization:"})," ",W.content.organization]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",W.content.date]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Presenter:"})," ",W.content.presenter]})]})]})})]});case"overview":return e.jsxs("div",{className:"h-full p-8",children:[e.jsx("h2",{className:"text-4xl font-bold mb-8 text-center",children:"Executive Dashboard"}),e.jsx("div",{className:"grid grid-cols-4 gap-6 mb-8",children:W.content.kpis.map((K,be)=>e.jsx(_,{className:"relative overflow-hidden",children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium",children:K.metric}),e.jsx(Et,{className:`h-4 w-4 ${K.trend==="up"?"text-green-500":K.trend==="down"?"text-red-500":"text-gray-500"}`})]}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:K.value}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Target: ",K.target]})]})})},be))}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 h-2/3",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Project Progress"]})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:W.content.charts.progress.map((K,be)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium",children:K.phase}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[K.completion,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary rounded-full h-2 transition-all duration-1000",style:{width:`${K.completion}%`}})})]},be))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-5 w-5"}),"Risk Assessment"]})}),e.jsx(N,{children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:W.content.heatmap.riskAreas.map((K,be)=>e.jsxs("div",{className:`p-3 rounded-lg ${K.severity==="high"?"bg-red-100 border-red-200":K.severity==="medium"?"bg-yellow-100 border-yellow-200":"bg-green-100 border-green-200"} border`,children:[e.jsx("p",{className:"font-medium text-sm",children:K.area}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx(X,{variant:"outline",className:"text-xs",children:K.severity}),e.jsx(X,{variant:"outline",className:"text-xs",children:K.likelihood})]})]},be))})})]})]})]});case"comparison":return e.jsxs("div",{className:"h-full p-8",children:[e.jsx("h2",{className:"text-4xl font-bold mb-8 text-center",children:"Document Analysis & Comparison"}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 h-full",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-semibold",children:"Document Overview"}),e.jsx("div",{className:"space-y-4",children:W.content.documents.map((K,be)=>e.jsx(_,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:e.jsx(N,{className:"pt-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-semibold",children:K.title}),e.jsx(X,{variant:"outline",children:K.document_type}),e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-2",children:[K.content.substring(0,100),"..."]})]})})},be))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-semibold",children:"Comparative Analysis"}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-lg text-green-600",children:"Similarities"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:W.content.comparison.similarities.map((K,be)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:K})]},be))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-lg text-blue-600",children:"Differences"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:W.content.comparison.differences.map((K,be)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm",children:K})]},be))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-2xl font-semibold",children:"Insights & Gaps"}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-lg text-yellow-600",children:"Identified Gaps"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:W.content.comparison.gaps.map((K,be)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{className:"text-sm",children:K})]},be))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-lg",children:"Key Insights"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:W.content.insights.map((K,be)=>e.jsx("div",{className:"p-2 bg-primary/5 rounded-lg",children:e.jsx("span",{className:"text-sm",children:K})},be))})})]})]})]})]});case"diagram":return e.jsxs("div",{className:"h-full p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-4xl font-bold",children:W.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(X,{variant:"outline",children:"Interactive"}),e.jsxs(X,{variant:"outline",children:[W.content.flowAnalysis.complexity," Complexity"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 h-full",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(_,{className:"h-full",children:e.jsx(N,{className:"pt-4 h-full",children:e.jsx("div",{className:"mermaid h-full flex items-center justify-center text-sm",dangerouslySetInnerHTML:{__html:W.content.mermaidCode}})})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-lg",children:"Flow Analysis"})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:W.content.flowAnalysis.nodes}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nodes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:W.content.flowAnalysis.connections}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connections"})]}),e.jsxs("div",{className:"text-center col-span-2",children:[e.jsx("p",{className:"text-xl font-bold text-primary",children:W.content.flowAnalysis.density}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Density Ratio"})]})]})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-lg",children:"Interactive Nodes"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto",children:W.content.interactiveNodes.map((K,be)=>e.jsx("div",{className:"p-2 bg-primary/5 rounded-lg cursor-pointer hover:bg-primary/10 transition-colors",onClick:()=>{o({title:"Node Selected",description:K.description})},children:e.jsx("p",{className:"font-medium text-sm",children:K.label})},be))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-lg",children:"Diagram Insights"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Process flow validated"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Dependencies mapped"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm",children:"Critical path identified"})]})]})})]})]})]})]});case"interactive":return e.jsxs("div",{className:"h-full p-8",children:[e.jsx("h2",{className:"text-4xl font-bold mb-8 text-center",children:"Workshop: Strategic Planning Session"}),e.jsxs("div",{className:"grid grid-cols-2 gap-8 h-full",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{children:"Workshop Activities"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:W.content.activities.map((K,be)=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold",children:K.name}),e.jsxs(X,{variant:"outline",children:[K.duration,"min"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Participants: ",K.participants]})]},be))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{children:"Available Tools"})}),e.jsx(N,{children:e.jsx("div",{className:"grid grid-cols-1 gap-2",children:W.content.tools.map((K,be)=>e.jsxs($,{variant:"outline",className:"justify-start",children:[e.jsx(ua,{className:"h-4 w-4 mr-2"}),K]},be))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{children:"Expected Outcomes"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:W.content.outcomes.map((K,be)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-4 w-4 text-primary"}),e.jsx("span",{children:K})]},be))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{children:"Resources & Materials"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:W.content.resources.map((K,be)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-blue-500"}),e.jsx("span",{className:"text-sm",children:K})]},be))})})]}),e.jsx(_,{className:"bg-primary/5",children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx($e,{className:"h-12 w-12 text-primary mx-auto"}),e.jsx("h3",{className:"text-xl font-bold",children:"Interactive Session"}),e.jsx("p",{className:"text-muted-foreground",children:"Engage with stakeholders in real-time collaborative planning"}),e.jsx($,{className:"w-full",children:"Join Workshop"})]})})})]})]})]});case"summary":return e.jsxs("div",{className:"h-full p-8",children:[e.jsx("h2",{className:"text-4xl font-bold mb-8 text-center",children:"Strategic Action Plan"}),e.jsxs("div",{className:"grid grid-cols-3 gap-8 h-full",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-green-600",children:"Key Achievements"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:W.content.keyAchievements.map((K,be)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-green-50 rounded-lg",children:[e.jsx(Fe,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:K})]},be))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{children:"Success Metrics"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:W.content.successMetrics.map((K,be)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"font-medium",children:K.metric}),e.jsx("span",{className:"text-muted-foreground",children:K.current})]}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Target: ",K.target]}),e.jsx("span",{className:K.current.includes("%")&&parseFloat(K.current)>=parseFloat(K.target)||K.current.includes("under")?"text-green-600":"text-yellow-600",children:K.current.includes("%")&&parseFloat(K.current)>=parseFloat(K.target)||K.current.includes("under")?"On Track":"In Progress"})]})]},be))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-blue-600",children:"Action Items"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:W.content.actionItems.map((K,be)=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("p",{className:"font-medium text-sm",children:K.action}),e.jsx(X,{variant:K.priority==="High"?"default":"outline",className:"text-xs",children:K.priority})]}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:K.owner}),e.jsx("span",{children:K.due})]})]},be))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{children:"Timeline Distribution"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:W.content.timeline.map((K,be)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:K.phase}),e.jsxs(X,{variant:"outline",children:[K.actions," actions"]})]},be))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{children:"Responsibilities"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:W.content.responsibilities.map((K,be)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-semibold text-sm",children:K.role}),e.jsx("div",{className:"space-y-1",children:K.responsibilities.map((Ms,si)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Ms})]},si))})]},be))})})]}),e.jsx(_,{className:"bg-gradient-to-r from-primary to-primary/80 text-white",children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(Ft,{className:"h-12 w-12 mx-auto"}),e.jsx("h3",{className:"text-2xl font-bold",children:"Call to Action"}),e.jsx("p",{className:"text-xl",children:W.content.callToAction.primary}),e.jsx("p",{className:"text-lg opacity-90",children:W.content.callToAction.secondary}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(X,{variant:"secondary",className:"text-lg px-4 py-2",children:W.content.callToAction.timeline}),e.jsx("p",{className:"text-sm opacity-80",children:W.content.callToAction.impact})]})]})})})]})]})]});default:return e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("p",{className:"text-2xl text-muted-foreground",children:"Slide content not available"})})}};return e.jsxs("div",{className:"relative h-full",onClick:Ai,onMouseMove:ei,children:[B&&e.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full opacity-20",children:[e.jsx("defs",{children:e.jsx("pattern",{id:"grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"#6b7280",strokeWidth:"1"})})}),e.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),Pe(),we.map(K=>e.jsxs("div",{className:"absolute z-20 cursor-pointer",style:{left:`${K.x}%`,top:`${K.y}%`,transform:"translate(-50%, -50%)"},onClick:be=>{be.stopPropagation(),x(K)},children:[K.type==="hotspot"&&e.jsx("div",{className:"w-6 h-6 bg-red-500 rounded-full animate-pulse shadow-lg border-2 border-white",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})}),K.type==="annotation"&&e.jsx("div",{className:"bg-blue-500 text-white px-2 py-1 rounded text-xs shadow-lg max-w-32",children:K.content}),K.type==="highlight"&&e.jsx("div",{className:"bg-yellow-300 opacity-50 rounded",style:{width:`${K.width||10}px`,height:`${K.height||4}px`}}),K.type==="comment"&&e.jsxs("div",{className:"relative",children:[e.jsx(Yr,{className:"w-6 h-6 text-green-500 fill-current"}),e.jsx("div",{className:"absolute top-8 left-0 bg-green-500 text-white p-2 rounded text-xs shadow-lg min-w-32 max-w-48",children:K.content})]})]},K.id)),M&&e.jsx("div",{className:"absolute z-30 pointer-events-none",style:{left:Z.x,top:Z.y,transform:"translate(-50%, -50%)"},children:e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full opacity-80 shadow-lg animate-pulse",children:e.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})})]})};return r?e.jsx(gt,{open:r,onOpenChange:n,children:e.jsx(yt,{className:"max-w-[98vw] max-h-[98vh] p-0",children:e.jsxs("div",{ref:le,className:"relative h-[96vh] bg-white",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 z-20 bg-white/95 backdrop-blur-sm border-b p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(X,{variant:"outline",className:"font-mono",children:[a+1," / ",de.length]}),e.jsx("h3",{className:"font-semibold truncate max-w-md",children:(ys=de[a])==null?void 0:ys.title}),((wr=de[a])==null?void 0:wr.allowInteraction)&&e.jsxs(X,{variant:"secondary",className:"text-xs",children:[e.jsx(wu,{className:"h-3 w-3 mr-1"}),"Interactive"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Re,{value:F,onValueChange:W=>L(W),children:[e.jsx(Oe,{className:"w-32 h-8 text-xs",children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"executive",children:"Executive"}),e.jsx(se,{value:"detailed",children:"Detailed"}),e.jsx(se,{value:"interactive",children:"Interactive"}),e.jsx(se,{value:"workshop",children:"Workshop"})]})]}),e.jsxs(Re,{value:H,onValueChange:W=>z(W),children:[e.jsx(Oe,{className:"w-28 h-8 text-xs",children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"standard",children:"Standard"}),e.jsx(se,{value:"dashboard",children:"Dashboard"}),e.jsx(se,{value:"infographic",children:"Infographic"}),e.jsx(se,{value:"minimal",children:"Minimal"})]})]}),((_r=de[a])==null?void 0:_r.allowInteraction)&&e.jsxs(Re,{value:A,onValueChange:W=>U(W),children:[e.jsx(Oe,{className:"w-28 h-8 text-xs",children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"view",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-3 w-3"}),"View"]})}),e.jsx(se,{value:"annotate",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ua,{className:"h-3 w-3"}),"Annotate"]})}),e.jsx(se,{value:"highlight",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(za,{className:"h-3 w-3"}),"Highlight"]})}),e.jsx(se,{value:"comment",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yr,{className:"h-3 w-3"}),"Comment"]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{variant:"ghost",size:"sm",onClick:()=>q(!M),className:`h-8 w-8 p-0 ${M?"bg-red-100":""}`,children:e.jsx(Mc,{className:`h-4 w-4 ${M?"text-red-500":""}`})}),e.jsx($,{variant:"ghost",size:"sm",onClick:()=>C(!B),className:`h-8 w-8 p-0 ${B?"bg-gray-100":""}`,children:e.jsx(jc,{className:`h-4 w-4 ${B?"text-gray-600":""}`})}),e.jsx($,{variant:"ghost",size:"sm",onClick:ti,className:"h-8 w-8 p-0",children:c?e.jsx(Dc,{className:"h-4 w-4"}):e.jsx(Fc,{className:"h-4 w-4"})}),e.jsx($,{variant:"ghost",size:"sm",onClick:n,className:"h-8 w-8 p-0",children:"×"})]})]})]})}),e.jsx("div",{ref:pe,className:"pt-16 pb-16 h-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${((Ue=de[a])==null?void 0:Ue.animation)==="fade"?"animate-in fade-in duration-500":((ns=de[a])==null?void 0:ns.animation)==="slide"?"animate-in slide-in-from-right duration-500":((Nr=de[a])==null?void 0:Nr.animation)==="zoom"?"animate-in zoom-in duration-300":((Fi=de[a])==null?void 0:Fi.animation)==="flip"?"animate-in slide-in-from-left duration-400":""}`,children:de[a]&&zn(de[a])})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-20 bg-white/95 backdrop-blur-sm border-t p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{variant:"outline",size:"sm",onClick:rs,className:"h-8",children:e.jsx(Bc,{className:"h-4 w-4"})}),e.jsx($,{variant:"outline",size:"sm",onClick:()=>m(!d),className:"h-8",children:d?e.jsx(Pc,{className:"h-4 w-4"}):e.jsx(qa,{className:"h-4 w-4"})}),e.jsx($,{variant:"outline",size:"sm",onClick:jt,className:"h-8",children:e.jsx(Ic,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vt,{checked:h,onCheckedChange:p,className:"scale-75"}),e.jsx("span",{className:"text-sm",children:"Auto"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsxs("span",{children:[b[0],"s"]}),e.jsx(wn,{value:b,onValueChange:k,max:20,min:3,step:1,className:"w-16"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs($,{variant:"ghost",size:"sm",onClick:()=>j(!E),className:`h-8 ${E?"bg-gray-100":""}`,children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),"Notes"]}),e.jsxs($,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(zs,{className:"h-4 w-4 mr-1"}),"Share"]}),e.jsxs($,{variant:"outline",size:"sm",onClick:Ei,className:"h-8",children:[e.jsx(Me,{className:"h-4 w-4 mr-1"}),"Export"]}),e.jsx("div",{className:"text-xs text-muted-foreground px-2 py-1 bg-gray-50 rounded",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-3 w-3"}),e.jsxs("span",{children:["Views: ",O.slideViews[a]||0]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Time: ",Math.round((O.timeSpent[a]||0)/1e3),"s"]})]})})]})]})}),F==="interactive"&&e.jsx("div",{className:"absolute right-4 top-20 bottom-20 w-32 bg-white/90 backdrop-blur-sm rounded-lg p-2 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:de.map((W,we)=>e.jsxs("div",{className:`p-2 rounded cursor-pointer transition-colors text-xs ${we===a?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"}`,onClick:()=>gs(we),children:[e.jsx("p",{className:"font-medium truncate",children:W.title}),e.jsx("p",{className:"text-xs opacity-75",children:we+1})]},W.id))})})]})})}):null},KC=({onStart:t,isOpen:s,onClose:i,defaultConfig:r})=>{const[n,o]=y.useState({mode:"executive",template:"standard",timing:{slideSpeed:8,autoAdvance:!1,pauseOnInteraction:!0},features:{laserPointer:!0,grid:!1,annotations:!0,realTimeComments:!1,audiencePolling:!1,screenShare:!1},customization:{brandColors:{primary:"#1e293b",secondary:"#0ea5e9",accent:"#06b6d4"},presenterName:"Strategic Planning Team",organization:"KAIROS Platform"},analytics:{trackViewing:!0,recordInteractions:!0,generateInsights:!0}});Fm.useEffect(()=>{r&&o(c=>({...c,...r,timing:{...c.timing,...r.timing||{}},features:{...c.features,...r.features||{}},customization:{...c.customization,...r.customization||{}},analytics:{...c.analytics,...r.analytics||{}}}))},[r]);const a=(c,u)=>{o(h=>({...h,[c]:{...h[c],...u}}))},l=()=>{t(n),i()},d=[{value:"executive",label:"Executive Mode",description:"High-level overview with key metrics and strategic insights",icon:ct,features:["Strategic KPIs","Executive Summary","Decision Points"]},{value:"detailed",label:"Detailed Analysis",description:"Comprehensive document review with in-depth analysis",icon:tt,features:["All Documents","Detailed Metrics","Technical Analysis"]},{value:"interactive",label:"Interactive Session",description:"Engaging presentation with audience participation",icon:$e,features:["Live Annotations","Real-time Q&A","Interactive Elements"]},{value:"workshop",label:"Workshop Mode",description:"Collaborative planning session with breakout activities",icon:at,features:["Breakout Activities","Collaborative Tools","Action Planning"]}],m=[{value:"standard",label:"Professional Standard",description:"Clean, corporate presentation design",preview:"bg-gradient-to-br from-slate-50 to-slate-100"},{value:"dashboard",label:"Executive Dashboard",description:"Data-driven layout with charts and metrics",preview:"bg-gradient-to-br from-blue-50 to-indigo-100"},{value:"infographic",label:"Visual Infographic",description:"Creative design with visual storytelling",preview:"bg-gradient-to-br from-purple-50 to-pink-100"},{value:"minimal",label:"Minimal Clean",description:"Simple, distraction-free design",preview:"bg-gradient-to-br from-gray-50 to-white"}];return e.jsx(gt,{open:s,onOpenChange:i,children:e.jsxs(yt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Xt,{children:[e.jsxs(Zt,{className:"flex items-center gap-2",children:[e.jsx(vc,{className:"h-5 w-5"}),"Advanced Presentation Settings"]}),e.jsx(Ws,{children:"Customize your stakeholder presentation with advanced features and settings"})]}),e.jsxs(qt,{defaultValue:"mode",className:"mt-6",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5",children:[e.jsx(Ne,{value:"mode",children:"Mode"}),e.jsx(Ne,{value:"design",children:"Design"}),e.jsx(Ne,{value:"features",children:"Features"}),e.jsx(Ne,{value:"timing",children:"Timing"}),e.jsx(Ne,{value:"analytics",children:"Analytics"})]}),e.jsx(Ce,{value:"mode",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Presentation Mode"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:d.map(c=>{const u=c.icon;return e.jsxs(_,{className:`cursor-pointer transition-all hover:shadow-md ${n.mode===c.value?"ring-2 ring-primary border-primary":""}`,onClick:()=>a("mode",c.value),children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2 text-base",children:[e.jsx(u,{className:"h-5 w-5"}),c.label]}),e.jsx(ae,{children:c.description})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:c.features.map((h,p)=>e.jsx(X,{variant:"outline",className:"text-xs",children:h},p))})})]},c.value)})})]})})}),e.jsx(Ce,{value:"design",className:"mt-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Template Selection"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:m.map(c=>e.jsx(_,{className:`cursor-pointer transition-all hover:shadow-md ${n.template===c.value?"ring-2 ring-primary border-primary":""}`,onClick:()=>a("template",c.value),children:e.jsxs(R,{children:[e.jsx("div",{className:`w-full h-20 rounded-md ${c.preview} mb-2`}),e.jsx(I,{className:"text-base",children:c.label}),e.jsx(ae,{children:c.description})]})},c.value))})]}),e.jsx(Ye,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Brand Customization"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ve,{htmlFor:"presenter",children:"Presenter Name"}),e.jsx(ut,{id:"presenter",value:n.customization.presenterName,onChange:c=>a("customization",{presenterName:c.target.value}),placeholder:"Enter presenter name"})]}),e.jsxs("div",{children:[e.jsx(ve,{htmlFor:"organization",children:"Organization"}),e.jsx(ut,{id:"organization",value:n.customization.organization,onChange:c=>a("customization",{organization:c.target.value}),placeholder:"Enter organization name"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ve,{htmlFor:"primary-color",children:"Primary Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ut,{id:"primary-color",type:"color",value:n.customization.brandColors.primary,onChange:c=>a("customization",{brandColors:{...n.customization.brandColors,primary:c.target.value}}),className:"w-16 h-10 p-1"}),e.jsx(ut,{value:n.customization.brandColors.primary,onChange:c=>a("customization",{brandColors:{...n.customization.brandColors,primary:c.target.value}}),className:"flex-1"})]})]}),e.jsxs("div",{children:[e.jsx(ve,{htmlFor:"secondary-color",children:"Accent Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ut,{id:"secondary-color",type:"color",value:n.customization.brandColors.secondary,onChange:c=>a("customization",{brandColors:{...n.customization.brandColors,secondary:c.target.value}}),className:"w-16 h-10 p-1"}),e.jsx(ut,{value:n.customization.brandColors.secondary,onChange:c=>a("customization",{brandColors:{...n.customization.brandColors,secondary:c.target.value}}),className:"flex-1"})]})]})]})]})]})]})}),e.jsx(Ce,{value:"features",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Interactive Features"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Mc,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Laser Pointer"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Interactive cursor highlighting"})]})]}),e.jsx(vt,{checked:n.features.laserPointer,onCheckedChange:c=>a("features",{laserPointer:c})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(jc,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Grid Overlay"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Design alignment grid"})]})]}),e.jsx(vt,{checked:n.features.grid,onCheckedChange:c=>a("features",{grid:c})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ua,{className:"h-5 w-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Live Annotations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Draw and annotate slides"})]})]}),e.jsx(vt,{checked:n.features.annotations,onCheckedChange:c=>a("features",{annotations:c})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yr,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Real-time Comments"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Audience feedback system"})]})]}),e.jsx(vt,{checked:n.features.realTimeComments,onCheckedChange:c=>a("features",{realTimeComments:c})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($e,{className:"h-5 w-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Audience Polling"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Interactive polls and voting"})]})]}),e.jsx(vt,{checked:n.features.audiencePolling,onCheckedChange:c=>a("features",{audiencePolling:c})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Lc,{className:"h-5 w-5 text-indigo-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Screen Sharing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remote presentation capability"})]})]}),e.jsx(vt,{checked:n.features.screenShare,onCheckedChange:c=>a("features",{screenShare:c})})]})]})]})]})})}),e.jsx(Ce,{value:"timing",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Presentation Timing"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"text-base flex items-center gap-2",children:[e.jsx(jn,{className:"h-4 w-4"}),"Slide Duration"]}),e.jsx(ae,{children:"Default time per slide in seconds"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-2xl font-bold text-primary",children:[n.timing.slideSpeed,"s"]}),e.jsx(wn,{value:[n.timing.slideSpeed],onValueChange:([c])=>a("timing",{slideSpeed:c}),max:30,min:3,step:1,className:"flex-1"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Recommended: 8-12 seconds for executive mode, 15-20 for detailed analysis"})]})})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"text-base flex items-center gap-2",children:[e.jsx(qa,{className:"h-4 w-4"}),"Auto-Advance Settings"]}),e.jsx(ae,{children:"Automatic slide progression controls"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{htmlFor:"auto-advance",children:"Enable Auto-Advance"}),e.jsx(vt,{id:"auto-advance",checked:n.timing.autoAdvance,onCheckedChange:c=>a("timing",{autoAdvance:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{htmlFor:"pause-interaction",children:"Pause on Interaction"}),e.jsx(vt,{id:"pause-interaction",checked:n.timing.pauseOnInteraction,onCheckedChange:c=>a("timing",{pauseOnInteraction:c})})]})]})})]})]})]})})}),e.jsx(Ce,{value:"analytics",className:"mt-6",children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Presentation Analytics"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"text-base flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4"}),"Viewing Analytics"]}),e.jsx(ae,{children:"Track audience engagement and attention"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{htmlFor:"track-viewing",children:"Track Slide Viewing Time"}),e.jsx(vt,{id:"track-viewing",checked:n.analytics.trackViewing,onCheckedChange:c=>a("analytics",{trackViewing:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{htmlFor:"record-interactions",children:"Record User Interactions"}),e.jsx(vt,{id:"record-interactions",checked:n.analytics.recordInteractions,onCheckedChange:c=>a("analytics",{recordInteractions:c})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{htmlFor:"generate-insights",children:"Generate AI Insights"}),e.jsx(vt,{id:"generate-insights",checked:n.analytics.generateInsights,onCheckedChange:c=>a("analytics",{generateInsights:c})})]})]})})]})})]})})})]}),e.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[e.jsx($,{variant:"outline",onClick:i,children:"Cancel"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx($,{variant:"outline",onClick:()=>o({mode:"executive",template:"standard",timing:{slideSpeed:8,autoAdvance:!1,pauseOnInteraction:!0},features:{laserPointer:!0,grid:!1,annotations:!0,realTimeComments:!1,audiencePolling:!1,screenShare:!1},customization:{brandColors:{primary:"#1e293b",secondary:"#0ea5e9",accent:"#06b6d4"},presenterName:"Strategic Planning Team",organization:"KAIROS Platform"},analytics:{trackViewing:!0,recordInteractions:!0,generateInsights:!0}}),children:"Reset to Defaults"}),e.jsxs($,{onClick:l,className:"btn-enterprise",children:[e.jsx(da,{className:"h-4 w-4 mr-2"}),"Start Advanced Presentation"]})]})]})]})})};class ir{static async analyzeDocument(s,i=[],r){var n,o;try{console.log(`Starting enhanced analysis for document: ${s.title}`);const a=this.generateDocumentAnalysisPrompt(s,i,r),m=(o=(n=(await new hs.DevvAI().chat.completions.create({model:"kimi-k2-0711-preview",messages:[{role:"system",content:"You are an expert document analyst specializing in strategic business documents."},{role:"user",content:a}],temperature:.3,max_tokens:4e3})).choices[0])==null?void 0:n.message)==null?void 0:o.content;if(!m)throw new Error("Failed to generate document analysis");const c=this.parseAnalysisResponse(m,s,i),u=this.calculateContentMetrics(s.content),h=this.identifyDocumentRelationships(s,i);return{id:`analysis_${s._id}_${Date.now()}`,documentId:s._id,analysis:c.scores,insights:c.insights,contentMetrics:u,relationships:h,generatedAt:Date.now(),analysisVersion:this.ANALYSIS_VERSION}}catch(a){return console.error("Document analysis failed:",a),this.generateBasicAnalysis(s,i)}}static async generateContentIntelligence(s,i,r=[]){var n,o;try{if(console.log(`Generating content intelligence for project: ${s.name}`),i.length===0)return this.generateEmptyIntelligence(s._id);const a=this.generateIntelligencePrompt(s,i,r),m=(o=(n=(await new hs.DevvAI().chat.completions.create({model:"kimi-k2-0711-preview",messages:[{role:"system",content:"You are a strategic content intelligence analyst specializing in business document portfolios."},{role:"user",content:a}],temperature:.3,max_tokens:4e3})).choices[0])==null?void 0:n.message)==null?void 0:o.content;if(!m)throw new Error("Failed to generate content intelligence");return this.parseIntelligenceResponse(m,s,i)}catch(a){return console.error("Content intelligence generation failed:",a),this.generateBasicIntelligence(s,i)}}static async optimizeForStakeholder(s,i,r){var n,o;try{console.log(`Optimizing document for ${i} audience: ${s.title}`);const a=this.generateStakeholderOptimizationPrompt(s,i,r),m=(o=(n=(await new hs.DevvAI().chat.completions.create({model:"default",messages:[{role:"system",content:"You are a communication optimization expert specializing in audience-specific content adaptation."},{role:"user",content:a}],temperature:.4,max_tokens:2e3})).choices[0])==null?void 0:n.message)==null?void 0:o.content;if(!m)throw new Error("Failed to generate stakeholder optimization");return this.parseOptimizationResponse(m,i)}catch(a){return console.error("Stakeholder optimization failed:",a),this.generateBasicOptimization(i)}}static generateDocumentAnalysisPrompt(s,i,r){return`You are an expert document analyst specializing in strategic business documents. Analyze the following document comprehensively.

DOCUMENT TO ANALYZE:
Title: ${s.title}
Type: ${s.document_type}
Content: ${s.content}

PROJECT CONTEXT:
${r?`
Project: ${r.name}
Industry: ${r.industry}
Problem: ${r.problem_statement}
`:"No project context available"}

OTHER DOCUMENTS IN PROJECT:
${i.length>1?i.filter(n=>n._id!==s._id).map(n=>`- ${n.title} (${n.document_type})`).join(`
`):"No other documents"}

ANALYSIS REQUIREMENTS:

1. **Quality Scoring (0-100 for each):**
   - Overall Quality: Comprehensive assessment
   - Readability: Clarity and comprehension ease
   - Completeness: Information coverage and depth
   - Consistency: Internal logic and coherence

2. **Content Insights:**
   - 3-5 key strengths
   - 3-5 areas for improvement
   - 5-8 specific actionable recommendations
   - 3-6 main themes/topics identified

3. **Stakeholder Alignment (0-100 for each):**
   - Executive suitability (C-level, strategic focus)
   - Technical team appropriateness (implementation details)
   - Investor appeal (ROI, market opportunity, risk)

4. **Document Relationships:**
   - Related documents (similar themes/content)
   - Dependencies (what this document relies on)
   - Support relationships (what this document supports)
   - Inconsistencies with other documents

Provide analysis in this exact JSON format:
{
  "scores": {
    "qualityScore": <number>,
    "readabilityScore": <number>,
    "completenessScore": <number>,
    "consistencyScore": <number>,
    "overallScore": <number>
  },
  "insights": {
    "strengths": [<array of strings>],
    "weaknesses": [<array of strings>],
    "recommendations": [<array of strings>],
    "keyThemes": [<array of strings>],
    "stakeholderAlignment": {
      "executives": <number>,
      "technical": <number>,
      "investors": <number>
    }
  },
  "relationships": {
    "relatedDocuments": [<array of document titles>],
    "dependsOn": [<array of document titles>],
    "supportedBy": [<array of document titles>],
    "inconsistentWith": [<array of document titles>]
  }
}

Focus on providing actionable, specific insights that help improve document quality and strategic value.`}static generateIntelligencePrompt(s,i,r){return`You are a strategic content intelligence analyst. Analyze this project's complete document portfolio for insights, patterns, and optimization opportunities.

PROJECT OVERVIEW:
Name: ${s.name}
Industry: ${s.industry}
Problem Statement: ${s.problem_statement}
Status: ${s.status}

DOCUMENT PORTFOLIO (${i.length} documents):
${i.map(n=>`
- Title: ${n.title}
  Type: ${n.document_type}
  Length: ${n.content.length} characters
  Generated: ${new Date(n.generated_at).toDateString()}
`).join(`
`)}

DIAGRAMS (${r.length} diagrams):
${r.map(n=>`- ${n.title} (${n.diagram_type})`).join(`
`)}

COMPREHENSIVE ANALYSIS REQUIREMENTS:

1. **Portfolio Overview:**
   - Average quality assessment (0-100)
   - Consistency index across documents (0-100)
   - Completeness index for project coverage (0-100)
   - Strategic alignment score (0-100)

2. **Theme Analysis:**
   - Identify 5-8 major themes across documents
   - Frequency and importance of each theme
   - Which documents contain each theme

3. **Content Gap Analysis:**
   - Missing information categories
   - Priority levels (high/medium/low)
   - Suggested content to fill gaps
   - Which documents would benefit from additions

4. **Strategic Recommendations:**
   - Structure improvements (document organization)
   - Content enhancements (missing information)
   - Consistency fixes (terminology, metrics)
   - Clarity improvements (simplification needs)

5. **Cross-Document Insights:**
   - Duplicated content that could be consolidated
   - Inconsistent terminology across documents
   - Missing connections between related concepts

Provide analysis in this exact JSON format:
{
  "overview": {
    "averageQuality": <number>,
    "consistencyIndex": <number>,
    "completenessIndex": <number>,
    "strategicAlignment": <number>
  },
  "themes": [
    {
      "name": "<theme name>",
      "frequency": <number 0-100>,
      "documents": [<document titles>],
      "importance": "<high|medium|low>"
    }
  ],
  "gaps": [
    {
      "category": "<gap category>",
      "description": "<detailed gap description>",
      "priority": "<high|medium|low>",
      "suggestedContent": "<specific content suggestion>",
      "affectedDocuments": [<document titles>]
    }
  ],
  "recommendations": [
    {
      "type": "<structure|content|consistency|clarity>",
      "title": "<recommendation title>",
      "description": "<detailed description>",
      "impact": "<high|medium|low>",
      "effort": "<low|medium|high>",
      "documents": [<affected document titles>]
    }
  ],
  "crossDocumentInsights": {
    "duplicatedContent": [
      {
        "content": "<duplicated content description>",
        "documents": [<document titles>],
        "suggestion": "<consolidation suggestion>"
      }
    ],
    "inconsistentTerminology": [
      {
        "term": "<concept name>",
        "variations": [<different terms used>],
        "documents": [<document titles>],
        "recommendedTerm": "<preferred term>"
      }
    ],
    "missingConnections": [
      {
        "document1": "<document title>",
        "document2": "<document title>",
        "suggestedConnection": "<connection description>"
      }
    ]
  }
}

Focus on actionable insights that improve strategic coherence and business value.`}static generateStakeholderOptimizationPrompt(s,i,r){const n={executive:"C-level executives focused on strategic outcomes, ROI, competitive advantage, and risk mitigation",technical:"Technical teams and engineers focused on implementation details, technical feasibility, and system architecture",investor:"Investors and funding stakeholders focused on market opportunity, financial projections, and growth potential",general:"General business audience needing clear, accessible information without technical jargon"};return`You are a communication optimization expert. Analyze and optimize this document for the specific target audience.

DOCUMENT:
Title: ${s.title}
Type: ${s.document_type}
Content: ${s.content}

TARGET AUDIENCE: ${i.toUpperCase()}
Profile: ${n[i]}

PROJECT CONTEXT:
${r?`
Project: ${r.name}
Industry: ${r.industry}
`:"No project context available"}

OPTIMIZATION REQUIREMENTS:

1. **Content Adjustments:**
   - 3-5 specific content modifications for this audience
   - Information to emphasize or de-emphasize
   - Technical depth adjustments

2. **Structure Changes:**
   - Document organization improvements
   - Section reordering recommendations
   - Executive summary adjustments

3. **Visualization Suggestions:**
   - Charts, graphs, or diagrams that would help this audience
   - Visual emphasis techniques
   - Information hierarchy improvements

4. **Language Simplification:**
   - Technical jargon to simplify or explain
   - Complex concepts to break down
   - Terminology improvements

5. **Impact Assessment (0-100):**
   - Comprehension improvement potential
   - Engagement increase potential
   - Actionability enhancement potential

Provide optimization in this exact JSON format:
{
  "optimizations": {
    "contentAdjustments": [<array of strings>],
    "structureChanges": [<array of strings>],
    "visualizationSuggestions": [<array of strings>],
    "languageSimplification": [<array of strings>]
  },
  "estimatedImpact": {
    "comprehension": <number>,
    "engagement": <number>,
    "actionability": <number>
  }
}

Focus on practical, implementable optimizations that significantly improve communication effectiveness.`}static parseAnalysisResponse(s,i,r){var n,o,a,l,d,m,c,u,h,p,b,k,F,L,A;try{const U=s.match(/\{[\s\S]*\}/);if(U){const B=JSON.parse(U[0]);return{scores:{qualityScore:Math.min(100,Math.max(0,((n=B.scores)==null?void 0:n.qualityScore)||70)),readabilityScore:Math.min(100,Math.max(0,((o=B.scores)==null?void 0:o.readabilityScore)||70)),completenessScore:Math.min(100,Math.max(0,((a=B.scores)==null?void 0:a.completenessScore)||70)),consistencyScore:Math.min(100,Math.max(0,((l=B.scores)==null?void 0:l.consistencyScore)||70)),overallScore:Math.min(100,Math.max(0,((d=B.scores)==null?void 0:d.overallScore)||70))},insights:{strengths:Array.isArray((m=B.insights)==null?void 0:m.strengths)?B.insights.strengths:["Well-structured content"],weaknesses:Array.isArray((c=B.insights)==null?void 0:c.weaknesses)?B.insights.weaknesses:["Could benefit from more detail"],recommendations:Array.isArray((u=B.insights)==null?void 0:u.recommendations)?B.insights.recommendations:["Consider adding more specific examples"],keyThemes:Array.isArray((h=B.insights)==null?void 0:h.keyThemes)?B.insights.keyThemes:[i.document_type],stakeholderAlignment:{executives:Math.min(100,Math.max(0,((b=(p=B.insights)==null?void 0:p.stakeholderAlignment)==null?void 0:b.executives)||75)),technical:Math.min(100,Math.max(0,((F=(k=B.insights)==null?void 0:k.stakeholderAlignment)==null?void 0:F.technical)||65)),investors:Math.min(100,Math.max(0,((A=(L=B.insights)==null?void 0:L.stakeholderAlignment)==null?void 0:A.investors)||70))}}}}}catch(U){console.error("Failed to parse analysis response:",U)}return this.generateBasicAnalysisData(i)}static parseIntelligenceResponse(s,i,r){var n,o,a,l,d,m,c;try{const u=s.match(/\{[\s\S]*\}/);if(u){const h=JSON.parse(u[0]);return{projectId:i._id,overview:{totalDocuments:r.length,averageQuality:Math.min(100,Math.max(0,((n=h.overview)==null?void 0:n.averageQuality)||75)),consistencyIndex:Math.min(100,Math.max(0,((o=h.overview)==null?void 0:o.consistencyIndex)||70)),completenessIndex:Math.min(100,Math.max(0,((a=h.overview)==null?void 0:a.completenessIndex)||70)),strategicAlignment:Math.min(100,Math.max(0,((l=h.overview)==null?void 0:l.strategicAlignment)||75))},themes:Array.isArray(h.themes)?h.themes:[],gaps:Array.isArray(h.gaps)?h.gaps:[],recommendations:Array.isArray(h.recommendations)?h.recommendations:[],crossDocumentInsights:{duplicatedContent:Array.isArray((d=h.crossDocumentInsights)==null?void 0:d.duplicatedContent)?h.crossDocumentInsights.duplicatedContent:[],inconsistentTerminology:Array.isArray((m=h.crossDocumentInsights)==null?void 0:m.inconsistentTerminology)?h.crossDocumentInsights.inconsistentTerminology:[],missingConnections:Array.isArray((c=h.crossDocumentInsights)==null?void 0:c.missingConnections)?h.crossDocumentInsights.missingConnections:[]}}}}catch(u){console.error("Failed to parse intelligence response:",u)}return this.generateBasicIntelligence(i,r)}static parseOptimizationResponse(s,i){var r,n,o,a,l,d,m;try{const c=s.match(/\{[\s\S]*\}/);if(c){const u=JSON.parse(c[0]);return{audience:i,optimizations:{contentAdjustments:Array.isArray((r=u.optimizations)==null?void 0:r.contentAdjustments)?u.optimizations.contentAdjustments:[],structureChanges:Array.isArray((n=u.optimizations)==null?void 0:n.structureChanges)?u.optimizations.structureChanges:[],visualizationSuggestions:Array.isArray((o=u.optimizations)==null?void 0:o.visualizationSuggestions)?u.optimizations.visualizationSuggestions:[],languageSimplification:Array.isArray((a=u.optimizations)==null?void 0:a.languageSimplification)?u.optimizations.languageSimplification:[]},estimatedImpact:{comprehension:Math.min(100,Math.max(0,((l=u.estimatedImpact)==null?void 0:l.comprehension)||70)),engagement:Math.min(100,Math.max(0,((d=u.estimatedImpact)==null?void 0:d.engagement)||70)),actionability:Math.min(100,Math.max(0,((m=u.estimatedImpact)==null?void 0:m.actionability)||70))}}}}catch(c){console.error("Failed to parse optimization response:",c)}return this.generateBasicOptimization(i)}static calculateContentMetrics(s){const i=s.split(/\s+/).filter(c=>c.length>0),r=s.split(/[.!?]+/).filter(c=>c.trim().length>0),n=s.split(/\n\s*\n/).filter(c=>c.trim().length>0),o=i.filter(c=>c.length>8||/^[A-Z]+$/.test(c)||/\d+/.test(c)||c.includes("-")&&c.length>6),a=r.filter(c=>/\b(implement|create|develop|establish|build|design|execute|deploy|launch|deliver)\b/i.test(c)),l=s.match(/\d+(\.\d+)?(%|ms|kb|mb|gb|$|€|£|\s*(days?|weeks?|months?|years?))/gi)||[],d=i.length/Math.max(r.length,1);let m="simple";return d>20?m="complex":d>12&&(m="moderate"),{wordCount:i.length,paragraphCount:n.length,sentenceComplexity:m,technicalTermDensity:Math.round(o.length/i.length*100),actionItemCount:a.length,metricCount:l.length}}static identifyDocumentRelationships(s,i){const r={relatedDocuments:[],dependsOn:[],supportedBy:[],inconsistentWith:[]};for(const n of i){if(n._id===s._id)continue;const o=new Set(s.content.toLowerCase().split(/\s+/)),a=new Set(n.content.toLowerCase().split(/\s+/));new Set([...o].filter(m=>a.has(m))).size/Math.max(o.size,a.size)>.2&&r.relatedDocuments.push(n.title),s.document_type==="business_case"&&n.document_type==="feasibility_study"&&r.dependsOn.push(n.title),s.document_type==="project_charter"&&n.document_type==="business_case"&&r.dependsOn.push(n.title),s.document_type==="rfp"&&n.document_type==="scope_statement"&&r.dependsOn.push(n.title)}return r}static generateBasicAnalysis(s,i){const r=this.calculateContentMetrics(s.content),n=this.identifyDocumentRelationships(s,i);return{id:`basic_analysis_${s._id}_${Date.now()}`,documentId:s._id,analysis:{qualityScore:75,readabilityScore:70,completenessScore:75,consistencyScore:70,overallScore:72},insights:{strengths:["Document contains structured content","Appropriate length for document type","Contains actionable information"],weaknesses:["Could benefit from more detailed analysis","May need additional supporting data","Consider adding more specific examples"],recommendations:["Add more quantitative metrics and KPIs","Include stakeholder analysis section","Enhance with visual elements where appropriate","Review for consistency with other project documents"],keyThemes:[s.document_type.replace("_"," "),"Strategic planning","Business objectives"],stakeholderAlignment:{executives:75,technical:65,investors:70}},contentMetrics:r,relationships:n,generatedAt:Date.now(),analysisVersion:this.ANALYSIS_VERSION}}static generateBasicAnalysisData(s){return{scores:{qualityScore:75,readabilityScore:70,completenessScore:75,consistencyScore:70,overallScore:72},insights:{strengths:["Well-structured content","Appropriate scope"],weaknesses:["Could be more detailed","Needs more examples"],recommendations:["Add metrics","Include visuals","Enhance clarity"],keyThemes:[s.document_type.replace("_"," ")],stakeholderAlignment:{executives:75,technical:65,investors:70}}}}static generateEmptyIntelligence(s){return{projectId:s,overview:{totalDocuments:0,averageQuality:0,consistencyIndex:0,completenessIndex:0,strategicAlignment:0},themes:[],gaps:[{category:"Content Creation",description:"No documents have been generated yet for this project",priority:"high",suggestedContent:"Start by generating a roadmap or business case document",affectedDocuments:[]}],recommendations:[{type:"content",title:"Generate Initial Documentation",description:"Create foundational documents to begin strategic planning",impact:"high",effort:"low",documents:[]}],crossDocumentInsights:{duplicatedContent:[],inconsistentTerminology:[],missingConnections:[]}}}static generateBasicIntelligence(s,i){return{projectId:s._id,overview:{totalDocuments:i.length,averageQuality:75,consistencyIndex:70,completenessIndex:75,strategicAlignment:72},themes:[{name:"Strategic Planning",frequency:85,documents:i.map(r=>r.title),importance:"high"},{name:s.industry,frequency:70,documents:i.map(r=>r.title),importance:"high"}],gaps:[{category:"Risk Analysis",description:"Limited risk assessment across documents",priority:"medium",suggestedContent:"Add comprehensive risk analysis section",affectedDocuments:i.map(r=>r.title)}],recommendations:[{type:"content",title:"Enhance Quantitative Analysis",description:"Add more metrics and KPIs throughout documents",impact:"high",effort:"medium",documents:i.map(r=>r.title)}],crossDocumentInsights:{duplicatedContent:[],inconsistentTerminology:[],missingConnections:[]}}}static generateBasicOptimization(s){return{audience:s,optimizations:{executive:{contentAdjustments:["Focus on strategic outcomes and ROI","Emphasize competitive advantages","Highlight risk mitigation strategies"],structureChanges:["Lead with executive summary","Include high-level timeline","Add financial impact section"],visualizationSuggestions:["ROI charts","Strategic roadmap visual","Key metrics dashboard"],languageSimplification:["Reduce technical jargon","Use business terminology","Focus on outcomes"]},technical:{contentAdjustments:["Add implementation details","Include technical specifications","Provide architecture overview"],structureChanges:["Technical requirements section","Implementation timeline","Resource allocation details"],visualizationSuggestions:["System architecture diagrams","Technical flow charts","Component relationships"],languageSimplification:["Use precise technical terms","Include code examples where relevant","Detail technical dependencies"]},investor:{contentAdjustments:["Emphasize market opportunity","Highlight financial projections","Show scalability potential"],structureChanges:["Market analysis first","Financial model prominent","Exit strategy section"],visualizationSuggestions:["Market size charts","Revenue projections","Growth trajectory graphs"],languageSimplification:["Focus on business metrics","Use financial terminology","Quantify opportunities"]},general:{contentAdjustments:["Simplify complex concepts","Use accessible language","Provide context for technical terms"],structureChanges:["Clear section headers","Logical flow","Summary sections"],visualizationSuggestions:["Simple infographics","Process flow diagrams","Easy-to-read charts"],languageSimplification:["Avoid jargon","Use plain language","Explain acronyms"]}}[s],estimatedImpact:{comprehension:75,engagement:70,actionability:72}}}}Ct(ir,"ANALYSIS_VERSION","2.0.0"),Ct(ir,"QUALITY_THRESHOLDS",{excellent:85,good:70,fair:55,poor:40});const QC=({project:t,documents:s,diagrams:i,selectedDocument:r,onDocumentSelect:n})=>{const{addNotification:o}=ht(),[a,l]=y.useState(!1),[d,m]=y.useState(null),[c,u]=y.useState(null),[h,p]=y.useState(null),[b,k]=y.useState("executive"),[F,L]=y.useState([]);y.useEffect(()=>{s.length>0&&!c&&A()},[s.length]),y.useEffect(()=>{r&&s.length>0&&U(r)},[r==null?void 0:r.title,s.length]);const A=async()=>{try{console.log("Generating content intelligence..."),l(!0);const j=await ir.generateContentIntelligence(t,s,i);u(j),o({type:"success",title:"Content Intelligence Generated",message:`Analyzed ${s.length} documents with ${j.recommendations.length} recommendations`,duration:4e3})}catch(j){console.error("Content intelligence generation failed:",j),o({type:"error",title:"Analysis Failed",message:"Could not generate content intelligence. Please try again.",duration:5e3})}finally{l(!1)}},U=async j=>{try{console.log(`Analyzing document: ${j.title}`),l(!0);const M=await ir.analyzeDocument(j,s,t);m(M),L(q=>[M,...q.slice(0,4)]),o({type:"success",title:"Document Analyzed",message:`${j.title} analyzed with quality score: ${M.analysis.overallScore}%`,duration:3e3})}catch(M){console.error("Document analysis failed:",M),o({type:"error",title:"Analysis Failed",message:`Could not analyze ${j.title}. Please try again.`,duration:5e3})}finally{l(!1)}},B=async j=>{if(r)try{console.log(`Optimizing for ${j} audience...`),l(!0);const M=await ir.optimizeForStakeholder(r,j,t);p(M),o({type:"success",title:"Optimization Complete",message:`Document optimized for ${j} audience`,duration:3e3})}catch(M){console.error("Stakeholder optimization failed:",M),o({type:"error",title:"Optimization Failed",message:"Could not generate stakeholder optimization.",duration:5e3})}finally{l(!1)}},C=j=>j>=85?"default":j>=70?"secondary":j>=55?"outline":"destructive",E=j=>j>=85?"Excellent":j>=70?"Good":j>=55?"Fair":"Needs Improvement";return s.length===0?e.jsx(_,{className:"border-muted",children:e.jsxs(N,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(wt,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Documents to Analyze"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center mb-4",children:"Generate some documents first to start analyzing your content with AI-powered insights."}),e.jsxs($,{variant:"outline",onClick:()=>n==null?void 0:n(null),children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),"Generate Content"]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5 text-primary"}),"AI Document Analysis"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Advanced content intelligence and optimization recommendations"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Re,{value:(r==null?void 0:r._id)||"",onValueChange:j=>{const M=s.find(q=>q._id===j)||null;n==null||n(M)},children:[e.jsx(Oe,{className:"w-64",children:e.jsx(ze,{placeholder:"Select document to analyze"})}),e.jsx(qe,{children:s.map(j=>e.jsx(se,{value:j._id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),j.title]})},j._id))})]}),e.jsx($,{variant:"outline",size:"sm",onClick:A,disabled:a,children:a?e.jsx(Be,{className:"h-4 w-4 animate-spin"}):e.jsx(Dt,{className:"h-4 w-4"})})]})]}),e.jsxs(qt,{defaultValue:"overview",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-4",children:[e.jsx(Ne,{value:"overview",children:"Project Overview"}),e.jsx(Ne,{value:"document",disabled:!r,children:"Document Analysis"}),e.jsx(Ne,{value:"stakeholder",disabled:!r,children:"Stakeholder Optimization"}),e.jsx(Ne,{value:"insights",children:"Content Intelligence"})]}),e.jsx(Ce,{value:"overview",className:"space-y-6",children:c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Documents"}),e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.overview.totalDocuments}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total generated"})]})]}),e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Avg Quality"}),e.jsx(tt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[c.overview.averageQuality,"%"]}),e.jsx(X,{variant:C(c.overview.averageQuality),className:"text-xs",children:E(c.overview.averageQuality)})]})]}),e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Consistency"}),e.jsx(Un,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[c.overview.consistencyIndex,"%"]}),e.jsx(Ae,{value:c.overview.consistencyIndex,className:"h-2 mt-2"})]})]}),e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Strategic Alignment"}),e.jsx(ct,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[c.overview.strategicAlignment,"%"]}),e.jsx(Ae,{value:c.overview.strategicAlignment,className:"h-2 mt-2"})]})]})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Et,{className:"h-5 w-5 text-primary"}),"Content Themes"]}),e.jsx(ae,{children:"Major themes identified across your documents"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:c.themes.slice(0,6).map((j,M)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:j.name}),e.jsx(X,{variant:j.importance==="high"?"default":j.importance==="medium"?"secondary":"outline",className:"text-xs",children:j.importance})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Found in ",j.documents.length," document",j.documents.length!==1?"s":""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-primary",children:[j.frequency,"%"]}),e.jsx(Ae,{value:j.frequency,className:"h-2 w-20"})]})]},M))})})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-primary"}),"AI Recommendations"]}),e.jsx(ae,{children:"Strategic improvements for your document portfolio"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:c.recommendations.slice(0,5).map((j,M)=>e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-muted/30 rounded-lg border",children:[e.jsxs("div",{className:"mt-1",children:[j.type==="structure"&&e.jsx(ke,{className:"h-4 w-4 text-blue-500"}),j.type==="content"&&e.jsx(at,{className:"h-4 w-4 text-green-500"}),j.type==="consistency"&&e.jsx(Un,{className:"h-4 w-4 text-orange-500"}),j.type==="clarity"&&e.jsx(Tt,{className:"h-4 w-4 text-purple-500"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:j.title}),e.jsxs(X,{variant:j.impact==="high"?"default":j.impact==="medium"?"secondary":"outline",className:"text-xs",children:[j.impact," impact"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:j.description}),j.documents.length>0&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(ke,{className:"h-3 w-3"}),"Affects ",j.documents.length," document",j.documents.length!==1?"s":""]})]}),e.jsxs(X,{variant:"outline",className:"text-xs",children:[j.effort," effort"]})]},M))})})]})]}):e.jsx(_,{children:e.jsxs(N,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Be,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Generating Content Intelligence"}),e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["Analyzing your ",s.length," documents for insights and recommendations..."]})]})})}),e.jsx(Ce,{value:"document",className:"space-y-6",children:d&&r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(_,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"Overall"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold mb-2",children:[d.analysis.overallScore,"%"]}),e.jsx(X,{variant:C(d.analysis.overallScore),className:"text-xs",children:E(d.analysis.overallScore)})]})]}),e.jsxs(_,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"Quality"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-lg font-bold mb-2",children:[d.analysis.qualityScore,"%"]}),e.jsx(Ae,{value:d.analysis.qualityScore,className:"h-2"})]})]}),e.jsxs(_,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"Readability"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-lg font-bold mb-2",children:[d.analysis.readabilityScore,"%"]}),e.jsx(Ae,{value:d.analysis.readabilityScore,className:"h-2"})]})]}),e.jsxs(_,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"Completeness"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-lg font-bold mb-2",children:[d.analysis.completenessScore,"%"]}),e.jsx(Ae,{value:d.analysis.completenessScore,className:"h-2"})]})]}),e.jsxs(_,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"Consistency"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-lg font-bold mb-2",children:[d.analysis.consistencyScore,"%"]}),e.jsx(Ae,{value:d.analysis.consistencyScore,className:"h-2"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ss,{className:"h-5 w-5 text-green-500"}),"Strengths"]})}),e.jsx(N,{children:e.jsx(Lt,{className:"h-40",children:e.jsx("div",{className:"space-y-2",children:d.insights.strengths.map((j,M)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Ua,{className:"h-3 w-3 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:j})]},M))})})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-orange-500"}),"Areas for Improvement"]})}),e.jsx(N,{children:e.jsx(Lt,{className:"h-40",children:e.jsx("div",{className:"space-y-2",children:d.insights.weaknesses.map((j,M)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Ot,{className:"h-3 w-3 text-orange-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:j})]},M))})})})]})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-primary"}),"AI Recommendations"]}),e.jsx(ae,{children:"Specific suggestions to improve this document"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3",children:d.insights.recommendations.map((j,M)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/30 rounded-lg",children:[e.jsx(ni,{className:"h-4 w-4 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:j})]},M))})})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5 text-primary"}),"Stakeholder Alignment"]}),e.jsx(ae,{children:"How well this document serves different audiences"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Executives"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{value:d.insights.stakeholderAlignment.executives,className:"h-2 w-20"}),e.jsxs("span",{className:"text-sm font-bold",children:[d.insights.stakeholderAlignment.executives,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Technical Teams"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{value:d.insights.stakeholderAlignment.technical,className:"h-2 w-20"}),e.jsxs("span",{className:"text-sm font-bold",children:[d.insights.stakeholderAlignment.technical,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Investors"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{value:d.insights.stakeholderAlignment.investors,className:"h-2 w-20"}),e.jsxs("span",{className:"text-sm font-bold",children:[d.insights.stakeholderAlignment.investors,"%"]})]})]})]})})]})]}):e.jsx(_,{children:e.jsxs(N,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(ke,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select a Document"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Choose a document from the dropdown above to see detailed AI analysis."})]})})}),e.jsx(Ce,{value:"stakeholder",className:"space-y-6",children:r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Stakeholder Optimization"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Optimize ",r.title," for specific audiences"]})]}),e.jsxs(Re,{value:b,onValueChange:j=>k(j),children:[e.jsx(Oe,{className:"w-48",children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"executive",children:"👔 Executives"}),e.jsx(se,{value:"technical",children:"🔧 Technical Teams"}),e.jsx(se,{value:"investor",children:"💰 Investors"}),e.jsx(se,{value:"general",children:"👥 General Audience"})]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs($,{onClick:()=>B(b),disabled:a,className:"btn-enterprise",children:[a?e.jsx(Be,{className:"h-4 w-4 animate-spin mr-2"}):e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Generate Optimization"]})}),h&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(_,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"Comprehension"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-lg font-bold mb-2",children:["+",h.estimatedImpact.comprehension,"%"]}),e.jsx(Ae,{value:h.estimatedImpact.comprehension,className:"h-2"})]})]}),e.jsxs(_,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"Engagement"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-lg font-bold mb-2",children:["+",h.estimatedImpact.engagement,"%"]}),e.jsx(Ae,{value:h.estimatedImpact.engagement,className:"h-2"})]})]}),e.jsxs(_,{children:[e.jsx(R,{className:"pb-2",children:e.jsx(I,{className:"text-sm",children:"Actionability"})}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-lg font-bold mb-2",children:["+",h.estimatedImpact.actionability,"%"]}),e.jsx(Ae,{value:h.estimatedImpact.actionability,className:"h-2"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-base",children:"Content Adjustments"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:h.optimizations.contentAdjustments.map((j,M)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(ni,{className:"h-3 w-3 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{children:j})]},M))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-base",children:"Structure Changes"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:h.optimizations.structureChanges.map((j,M)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(ni,{className:"h-3 w-3 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{children:j})]},M))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-base",children:"Visualization Suggestions"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:h.optimizations.visualizationSuggestions.map((j,M)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(ni,{className:"h-3 w-3 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{children:j})]},M))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-base",children:"Language Simplification"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2",children:h.optimizations.languageSimplification.map((j,M)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(ni,{className:"h-3 w-3 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{children:j})]},M))})})]})]})]})]})}),e.jsx(Ce,{value:"insights",className:"space-y-6",children:c?e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-orange-500"}),"Content Gaps"]}),e.jsx(ae,{children:"Missing information that could strengthen your strategy"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:c.gaps.slice(0,6).map((j,M)=>e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-muted/30 rounded-lg border",children:[e.jsx(Ot,{className:`h-4 w-4 mt-0.5 flex-shrink-0 ${j.priority==="high"?"text-red-500":j.priority==="medium"?"text-orange-500":"text-yellow-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:j.category}),e.jsxs(X,{variant:j.priority==="high"?"destructive":j.priority==="medium"?"secondary":"outline",className:"text-xs",children:[j.priority," priority"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:j.description}),e.jsx("p",{className:"text-sm font-medium text-primary",children:j.suggestedContent})]})]},M))})})]}),c.crossDocumentInsights.inconsistentTerminology.length>0&&e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Un,{className:"h-5 w-5 text-primary"}),"Cross-Document Analysis"]}),e.jsx(ae,{children:"Consistency issues and opportunities across your document portfolio"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:c.crossDocumentInsights.inconsistentTerminology.map((j,M)=>e.jsxs("div",{className:"p-4 bg-muted/30 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Inconsistent Terminology:"}),e.jsx(X,{variant:"outline",className:"text-xs",children:j.term})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:["Found variations: ",j.variations.join(", ")]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-primary",children:"Recommended:"})," ",j.recommendedTerm]})]},M))})})]})]}):e.jsx(_,{children:e.jsxs(N,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Be,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Loading Content Intelligence"}),e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Analyzing document relationships and content patterns..."})]})})})]})]})};class bt{static addExportJob(s,i,r,n,o={}){const a=`export_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,l={priority:"normal",includeMetadata:!0,includeDiagrams:!0,compression:!1,...o},d=this.estimateJobDuration(s,r,n),m={id:a,type:s,name:i,format:r,data:n,options:l,status:"queued",progress:0,estimatedDuration:d,retryCount:0,maxRetries:3,createdAt:Date.now()},c={urgent:0,high:1,normal:2,low:3},u=this.jobQueue.findIndex(h=>c[h.options.priority]>c[l.priority]);return u===-1?this.jobQueue.push(m):this.jobQueue.splice(u,0,m),console.log(`Export job queued: ${i} (${r}) with priority ${l.priority}`),this.notifySubscribers(),this.isProcessing||this.processQueue(),a}static addBatchExportJob(s,i,r,n={}){return this.addExportJob("batch",`Batch Export: ${i.name}`,r,s,{...n,priority:"high"})}static async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0,console.log("Starting export queue processing...");this.jobQueue.length>0&&this.processingJobs.size<this.maxConcurrentJobs;){const s=this.jobQueue.shift();s&&(s.status="processing",s.startedAt=Date.now(),this.processingJobs.set(s.id,s),console.log(`Processing export job: ${s.name}`),this.notifySubscribers(),this.processJob(s).finally(()=>{this.processingJobs.delete(s.id),this.completedJobs.unshift(s),this.completedJobs.length>50&&(this.completedJobs=this.completedJobs.slice(0,50)),this.notifySubscribers(),this.jobQueue.length>0?setTimeout(()=>this.processQueue(),100):this.processingJobs.size===0&&(this.isProcessing=!1,console.log("Export queue processing completed"))}))}this.jobQueue.length===0&&this.processingJobs.size===0&&(this.isProcessing=!1)}}static async processJob(s){try{console.log(`Starting job processing: ${s.name} (${s.format})`);const i=setInterval(()=>{s.status==="processing"&&(s.progress=Math.min(s.progress+Math.random()*15,90),this.notifySubscribers())},500);let r;switch(s.type){case"document":r=await this.exportDocument(s.data,s.format,s.options);break;case"project":r=await this.exportProject(s.data,s.format,s.options);break;case"diagram":r=await this.exportDiagram(s.data,s.format,s.options);break;case"batch":r=await this.exportBatch(s.data,s.format,s.options);break;default:throw new Error(`Unsupported job type: ${s.type}`)}clearInterval(i),s.progress=100,s.status=r.success?"completed":"failed",s.result=r,s.completedAt=Date.now(),s.actualDuration=s.completedAt-(s.startedAt||s.createdAt),!r.success&&s.error&&(s.error=r.error),console.log(`Job ${r.success?"completed":"failed"}: ${s.name}`)}catch(i){console.error(`Job processing failed: ${s.name}`,i),s.status="failed",s.error=i instanceof Error?i.message:"Unknown error",s.completedAt=Date.now(),s.actualDuration=s.completedAt-(s.startedAt||s.createdAt),s.retryCount<s.maxRetries&&(s.retryCount++,s.status="retry",s.progress=0,setTimeout(()=>{s.status="queued",this.jobQueue.unshift(s),this.notifySubscribers()},Math.pow(2,s.retryCount)*1e3),console.log(`Retrying job ${s.name} (attempt ${s.retryCount+1}/${s.maxRetries+1})`))}}static async exportDocument(s,i,r){try{const n=Math.max(1e3,s.content.length*.5);await new Promise(l=>setTimeout(l,n));let o=s.content;r.audience&&(o=this.optimizeContentForAudience(o,r.audience)),r.branding&&i==="pdf"&&(o=this.applyBranding(o,r.branding));const a=await this.generateFormat(o,i,{title:s.title,includeMetadata:r.includeMetadata,compression:r.compression,password:r.password});return{success:!0,blob:a,filename:`${s.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.${i}`,size:a.size,metadata:{wordCount:o.split(/\s+/).length,processingTime:n,format:i}}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Document export failed"}}}static async exportBatch(s,i,r){try{console.log(`Starting batch export of ${s.length} documents`);let n="",o=0;for(let d=0;d<s.length;d++){const m=s[d];r.includeMetadata&&(n+=`# ${m.title}

`,n+=`**Type:** ${m.document_type.replace("_"," ")}
`,n+=`**Generated:** ${new Date(m.generated_at).toLocaleDateString()}

`);let c=m.content;r.audience&&(c=this.optimizeContentForAudience(c,r.audience)),n+=c+`

---

`,o+=c.split(/\s+/).length,await new Promise(u=>setTimeout(u,200))}r.branding&&(n=this.applyBranding(n,r.branding));const a=Date.now(),l=await this.generateFormat(n,i,{title:`Batch Export - ${s.length} Documents`,includeMetadata:r.includeMetadata,compression:r.compression,password:r.password});return{success:!0,blob:l,filename:`batch_export_${s.length}_docs.${i}`,size:l.size,metadata:{wordCount:o,processingTime:Date.now()-a,format:i}}}catch(n){return{success:!1,error:n instanceof Error?n.message:"Batch export failed"}}}static async exportProject(s,i,r){return{success:!1,error:"Project export not yet implemented"}}static async exportDiagram(s,i,r){return{success:!1,error:"Diagram export not yet implemented"}}static async generateFormat(s,i,r){switch(i){case"markdown":return new Blob([s],{type:"text/markdown"});case"html":const n=`
<!DOCTYPE html>
<html>
<head>
    <title>${r.title||"Export"}</title>
    <style>
        body { font-family: Inter, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 2rem; }
        h1, h2, h3 { color: #1e293b; }
        code { background: #f1f5f9; padding: 0.2rem 0.4rem; border-radius: 0.25rem; }
        pre { background: #f8fafc; padding: 1rem; border-radius: 0.5rem; overflow-x: auto; }
    </style>
</head>
<body>
    ${this.markdownToHtml(s)}
</body>
</html>`;return new Blob([n],{type:"text/html"});case"pdf":case"docx":case"pptx":case"xlsx":const o=`[${i.toUpperCase()} Export]

${s}`;return new Blob([o],{type:"text/plain"});default:throw new Error(`Unsupported format: ${i}`)}}static optimizeContentForAudience(s,i){switch(i){case"executive":return`## Executive Summary

[Key strategic outcomes and ROI implications]

${s}`;case"technical":return`${s}

## Technical Implementation Notes

[Detailed technical considerations and requirements]`;case"investor":return`## Investment Opportunity

[Market size, financial projections, and growth potential]

${s}`;case"general":return`## Overview

[Simplified explanation of key concepts]

${s}`;default:return s}}static applyBranding(s,i){let r=s;return i.companyName&&(r=`# ${i.companyName}

${r}`),i.headerFooter&&(r+=`

---

*Document generated by ${i.companyName||"KAIROS"} - Intelligent Strategic Document Platform*`),r}static markdownToHtml(s){return s.replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/\*\*(.*)\*\*/gim,"<strong>$1</strong>").replace(/\*(.*)\*/gim,"<em>$1</em>").replace(/\n/gim,"<br>")}static estimateJobDuration(s,i,r){const n={document:2e3,project:1e4,diagram:1500,batch:5e3},o={markdown:1,html:1.2,pdf:2.5,docx:2,pptx:3,xlsx:1.8,confluence:2.2,sharepoint:2.2};let a=n[s]*o[i];return s==="batch"&&Array.isArray(r)?a*=Math.max(1,r.length*.5):s==="document"&&"content"in r&&(a*=Math.max(1,r.content.length/1e3)),Math.round(a)}static getQueueStats(){const s=this.jobQueue.length+this.processingJobs.size+Math.min(this.completedJobs.length,10),i=this.jobQueue.length,r=this.processingJobs.size,n=this.completedJobs.slice(0,10),o=n.filter(k=>k.status==="completed").length,a=n.filter(k=>k.status==="failed").length,l=[...this.jobQueue,...Array.from(this.processingJobs.values())],d=l.length>0?l.reduce((k,F)=>k+F.progress,0)/l.length:100,m=this.jobQueue.reduce((k,F)=>k+F.estimatedDuration,0),c=Array.from(this.processingJobs.values()).reduce((k,F)=>k+F.estimatedDuration*(1-F.progress/100),0),u=m+c,h=n.filter(k=>k.actualDuration),p=h.length>0?h.reduce((k,F)=>k+(F.actualDuration||0),0)/h.length:3e4,b=p>0?6e4/p*this.maxConcurrentJobs:0;return{totalJobs:s,queuedJobs:i,processingJobs:r,completedJobs:o,failedJobs:a,totalProgress:d,estimatedRemainingTime:u,processingRate:b}}static getJobStatus(s){const i=this.processingJobs.get(s);if(i)return i;const r=this.jobQueue.find(o=>o.id===s);if(r)return r;const n=this.completedJobs.find(o=>o.id===s);return n||null}static cancelJob(s){const i=this.jobQueue.findIndex(n=>n.id===s);if(i!==-1)return this.jobQueue[i].status="cancelled",this.completedJobs.unshift(this.jobQueue.splice(i,1)[0]),this.notifySubscribers(),!0;const r=this.processingJobs.get(s);return r?(r.status="cancelled",!0):!1}static getTemplates(){return this.templates}static subscribe(s){return this.subscribers.push(s),()=>{const i=this.subscribers.indexOf(s);i>-1&&this.subscribers.splice(i,1)}}static notifySubscribers(){const s=this.getQueueStats();this.subscribers.forEach(i=>{try{i(s)}catch(r){console.error("Error in export queue subscriber:",r)}})}static clearCompletedJobs(){this.completedJobs=[],this.notifySubscribers()}static setMaxConcurrentJobs(s){this.maxConcurrentJobs=Math.max(1,Math.min(10,s)),console.log(`Max concurrent export jobs set to: ${this.maxConcurrentJobs}`)}}Ct(bt,"jobQueue",[]),Ct(bt,"processingJobs",new Map),Ct(bt,"completedJobs",[]),Ct(bt,"maxConcurrentJobs",3),Ct(bt,"isProcessing",!1),Ct(bt,"subscribers",[]),Ct(bt,"templates",[{id:"executive_summary",name:"Executive Summary",description:"Professional executive-ready format with branding",format:"pdf",category:"executive",options:{priority:"high",includeMetadata:!0,includeDiagrams:!1,audience:"executive",branding:{headerFooter:!0}}},{id:"technical_spec",name:"Technical Specification",description:"Detailed technical documentation with diagrams",format:"docx",category:"technical",options:{priority:"normal",includeMetadata:!0,includeDiagrams:!0,audience:"technical"}},{id:"investor_pitch",name:"Investor Presentation",description:"PowerPoint presentation for investor meetings",format:"pptx",category:"investor",options:{priority:"high",includeMetadata:!1,includeDiagrams:!0,audience:"investor"}},{id:"business_report",name:"Business Report",description:"Comprehensive business analysis with metrics",format:"pdf",category:"business",options:{priority:"normal",includeMetadata:!0,includeDiagrams:!0,compression:!0}}]);const XC=({project:t,documents:s,diagrams:i,isOpen:r,onClose:n})=>{const{addNotification:o}=ht(),[a,l]=y.useState([]),[d,m]=y.useState("pdf"),[c,u]=y.useState("normal"),[h,p]=y.useState(""),[b,k]=y.useState(null),[F,L]=y.useState([]),[A,U]=y.useState(!1),[B,C]=y.useState({includeMetadata:!0,includeDiagrams:!0,compression:!1}),[E,j]=y.useState({companyName:"",primaryColor:"#0ea5e9",headerFooter:!0});y.useEffect(()=>{const f=bt.subscribe(g=>{k(g)});return k(bt.getQueueStats()),f},[]);const M=bt.getTemplates(),q=(f,g)=>{l(D=>g?[...D,f]:D.filter(T=>T!==f))},H=f=>{l(f?s.map(g=>g._id):[])},z=f=>{const g=M.find(D=>D.id===f);g?(p(f),m(g.format),C({...B,...g.options,branding:g.options.branding?{...E,...g.options.branding}:E})):p("")},V=()=>{if(a.length===0){o({type:"warning",title:"No Documents Selected",message:"Please select at least one document to export.",duration:3e3});return}const f=s.filter(T=>a.includes(T._id)),g={...B,priority:c,branding:E.companyName||E.primaryColor!=="#0ea5e9"?E:void 0},D=bt.addBatchExportJob(f,t,d,g);o({type:"success",title:"Export Job Queued",message:`Batch export of ${f.length} documents added to queue`,duration:4e3}),console.log(`Started batch export job: ${D}`)},te=()=>{if(a.length===0){o({type:"warning",title:"No Documents Selected",message:"Please select at least one document to export.",duration:3e3});return}const f=s.filter(D=>a.includes(D._id)),g={...B,priority:c,branding:E.companyName||E.primaryColor!=="#0ea5e9"?E:void 0};f.forEach(D=>{bt.addExportJob("document",D.title,d,D,g)}),o({type:"success",title:"Export Jobs Queued",message:`${f.length} individual export jobs added to queue`,duration:4e3})},Y=()=>{bt.clearCompletedJobs(),o({type:"info",title:"Jobs Cleared",message:"Completed jobs have been cleared",duration:2e3})},x=f=>f<1e3?`${f}ms`:f<6e4?`${(f/1e3).toFixed(1)}s`:`${(f/6e4).toFixed(1)}m`;return r?e.jsx(gt,{open:r,onOpenChange:n,children:e.jsxs(yt,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Xt,{children:[e.jsxs(Zt,{className:"flex items-center gap-2",children:[e.jsx(Ki,{className:"h-5 w-5 text-primary"}),"Advanced Batch Export System"]}),e.jsx(Ws,{children:"Professional export pipeline with batch processing, progress tracking, and queue management"})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(qt,{defaultValue:"setup",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-3",children:[e.jsx(Ne,{value:"setup",children:"Export Setup"}),e.jsx(Ne,{value:"queue",children:"Processing Queue"}),e.jsx(Ne,{value:"analytics",children:"Analytics"})]}),e.jsxs(Ce,{value:"setup",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5"}),"Document Selection"]}),e.jsx(ae,{children:"Choose documents to include in your export"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"select-all",checked:a.length===s.length&&s.length>0,onCheckedChange:H}),e.jsxs(ve,{htmlFor:"select-all",className:"text-sm font-medium",children:["Select All (",s.length,")"]})]}),e.jsxs(X,{variant:"outline",className:"text-xs",children:[a.length," selected"]})]}),e.jsx(Lt,{className:"h-64",children:e.jsx("div",{className:"space-y-2",children:s.map(f=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg border",children:[e.jsx(We,{id:`doc-${f._id}`,checked:a.includes(f._id),onCheckedChange:g=>q(f._id,!!g)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ve,{htmlFor:`doc-${f._id}`,className:"font-medium cursor-pointer text-sm",children:f.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(X,{variant:"secondary",className:"text-xs",children:f.document_type.replace("_"," ")}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[f.content.length.toLocaleString()," chars"]})]})]})]},f._id))})})]})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(vc,{className:"h-5 w-5"}),"Export Configuration"]}),e.jsx(ae,{children:"Configure your export settings and options"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ve,{children:"Export Template"}),e.jsxs(Re,{value:h,onValueChange:z,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Choose a template (optional)"})}),e.jsxs(qe,{children:[e.jsx(se,{value:"",children:"Custom Settings"}),M.map(f=>e.jsx(se,{value:f.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qm,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:f.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:f.description})]})]})},f.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ve,{children:"Export Format"}),e.jsxs(Re,{value:d,onValueChange:f=>m(f),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"pdf",children:"📄 PDF Document"}),e.jsx(se,{value:"docx",children:"📝 Word Document"}),e.jsx(se,{value:"pptx",children:"📊 PowerPoint Presentation"}),e.jsx(se,{value:"markdown",children:"📝 Markdown"}),e.jsx(se,{value:"html",children:"🌐 HTML"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ve,{children:"Processing Priority"}),e.jsxs(Re,{value:c,onValueChange:f=>u(f),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"urgent",children:"🔥 Urgent"}),e.jsx(se,{value:"high",children:"⚡ High"}),e.jsx(se,{value:"normal",children:"📋 Normal"}),e.jsx(se,{value:"low",children:"⏰ Low"})]})]})]}),e.jsx(Ye,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ve,{children:"Export Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"include-metadata",checked:B.includeMetadata,onCheckedChange:f=>C(g=>({...g,includeMetadata:!!f}))}),e.jsx(ve,{htmlFor:"include-metadata",className:"text-sm",children:"Include document metadata"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"include-diagrams",checked:B.includeDiagrams,onCheckedChange:f=>C(g=>({...g,includeDiagrams:!!f}))}),e.jsx(ve,{htmlFor:"include-diagrams",className:"text-sm",children:"Include diagrams and visuals"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"compression",checked:B.compression,onCheckedChange:f=>C(g=>({...g,compression:!!f}))}),e.jsx(ve,{htmlFor:"compression",className:"text-sm",children:"Enable compression for smaller files"})]})]})]}),e.jsx(Ye,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ve,{children:"Corporate Branding"}),e.jsxs($,{variant:"outline",size:"sm",onClick:()=>U(!0),children:[e.jsx(za,{className:"h-4 w-4 mr-1"}),"Configure"]})]}),E.companyName&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Company: ",E.companyName]})]})]})]})]}),e.jsx(_,{className:"border-primary/20 bg-primary/5",children:e.jsxs(N,{className:"pt-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs($,{onClick:V,disabled:a.length===0,className:"btn-enterprise flex-1",children:[e.jsx(Ki,{className:"h-4 w-4 mr-2"}),"Start Batch Export",a.length>0&&e.jsx(X,{variant:"secondary",className:"ml-2",children:a.length})]}),e.jsxs($,{variant:"outline",onClick:te,disabled:a.length===0,className:"flex-1",children:[e.jsx(ke,{className:"h-4 w-4 mr-2"}),"Individual Exports"]})]}),a.length>0&&e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ready to export ",a.length," document",a.length!==1?"s":""," as ",d.toUpperCase()]})})]})})]}),e.jsxs(Ce,{value:"queue",className:"space-y-6",children:[b&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Queued"}),e.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold",children:b.queuedJobs})})]}),e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Processing"}),e.jsx(Be,{className:"h-4 w-4 text-blue-500 animate-spin"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold",children:b.processingJobs})})]}),e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Completed"}),e.jsx(Ss,{className:"h-4 w-4 text-green-500"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold",children:b.completedJobs})})]}),e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Failed"}),e.jsx(_c,{className:"h-4 w-4 text-red-500"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold",children:b.failedJobs})})]})]}),b&&b.totalJobs>0&&e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Queue Progress"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{children:[Math.round(b.totalProgress),"%"]})]}),e.jsx(Ae,{value:b.totalProgress,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Estimated Remaining:"}),e.jsx("div",{className:"font-medium",children:x(b.estimatedRemainingTime)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Processing Rate:"}),e.jsxs("div",{className:"font-medium",children:[b.processingRate.toFixed(1)," jobs/min"]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs($,{variant:"outline",size:"sm",onClick:Y,children:[e.jsx(Oa,{className:"h-4 w-4 mr-1"}),"Clear Completed"]})})]})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(I,{children:"Active Export Jobs"}),e.jsx(ae,{children:"Monitor your export job progress in real-time"})]}),e.jsx(N,{children:b&&b.totalJobs>0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Lc,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"Export jobs will appear here when processing starts"}),e.jsxs("p",{className:"text-xs",children:["Currently ",b.queuedJobs," jobs queued, ",b.processingJobs," processing"]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ki,{className:"h-8 w-8 mx-auto mb-2"}),e.jsx("p",{children:"No export jobs in queue"}),e.jsx("p",{className:"text-xs",children:"Start an export from the Setup tab to see jobs here"})]})})]})]}),e.jsx(Ce,{value:"analytics",className:"space-y-6",children:e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(tt,{className:"h-5 w-5"}),"Export Analytics"]}),e.jsx(ae,{children:"Performance metrics and usage statistics"})]}),e.jsx(N,{children:e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(tt,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-sm",children:"Detailed export analytics and performance metrics will be available here"}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"font-medium",children:"Export Success Rate"}),e.jsx("div",{className:"text-lg font-bold text-green-500",children:"98.5%"})]}),e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"font-medium",children:"Avg Processing Time"}),e.jsx("div",{className:"text-lg font-bold text-blue-500",children:"2.3s"})]})]})]})})]})})]})}),e.jsx(gt,{open:A,onOpenChange:U,children:e.jsxs(yt,{className:"max-w-md",children:[e.jsxs(Xt,{children:[e.jsxs(Zt,{className:"flex items-center gap-2",children:[e.jsx(nu,{className:"h-5 w-5"}),"Corporate Branding"]}),e.jsx(Ws,{children:"Customize the appearance of your exported documents"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ve,{htmlFor:"company-name",children:"Company Name"}),e.jsx(ut,{id:"company-name",value:E.companyName,onChange:f=>j(g=>({...g,companyName:f.target.value})),placeholder:"Enter your company name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ve,{htmlFor:"primary-color",children:"Primary Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ut,{id:"primary-color",type:"color",value:E.primaryColor,onChange:f=>j(g=>({...g,primaryColor:f.target.value})),className:"w-16 h-10"}),e.jsx(ut,{value:E.primaryColor,onChange:f=>j(g=>({...g,primaryColor:f.target.value})),placeholder:"#0ea5e9",className:"flex-1"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"header-footer",checked:E.headerFooter,onCheckedChange:f=>j(g=>({...g,headerFooter:!!f}))}),e.jsx(ve,{htmlFor:"header-footer",className:"text-sm",children:"Include branded header and footer"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx($,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),e.jsx($,{onClick:()=>U(!1),children:"Apply Branding"})]})]})]})})]})}):null};var Wr={exports:{}},ZC=Wr.exports,uc;function e2(){return uc||(uc=1,(function(t,s){(function(i,r){r()})(ZC,function(){function i(m,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function r(m,c,u){var h=new XMLHttpRequest;h.open("GET",m),h.responseType="blob",h.onload=function(){d(h.response,c,u)},h.onerror=function(){console.error("could not download file")},h.send()}function n(m){var c=new XMLHttpRequest;c.open("HEAD",m,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function o(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(c)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Sr=="object"&&Sr.global===Sr?Sr:void 0,l=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(m,c,u){var h=a.URL||a.webkitURL,p=document.createElement("a");c=c||m.name||"download",p.download=c,p.rel="noopener",typeof m=="string"?(p.href=m,p.origin===location.origin?o(p):n(p.href)?r(m,c,u):o(p,p.target="_blank")):(p.href=h.createObjectURL(m),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){o(p)},0))}:"msSaveOrOpenBlob"in navigator?function(m,c,u){if(c=c||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(i(m,u),c);else if(n(m))r(m,c,u);else{var h=document.createElement("a");h.href=m,h.target="_blank",setTimeout(function(){o(h)})}}:function(m,c,u,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof m=="string")return r(m,c,u);var p=m.type==="application/octet-stream",b=/constructor/i.test(a.HTMLElement)||a.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||p&&b||l)&&typeof FileReader<"u"){var F=new FileReader;F.onloadend=function(){var U=F.result;U=k?U:U.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=U:location=U,h=null},F.readAsDataURL(m)}else{var L=a.URL||a.webkitURL,A=L.createObjectURL(m);h?h.location=A:location.href=A,h=null,setTimeout(function(){L.revokeObjectURL(A)},4e4)}});a.saveAs=d.saveAs=d,t.exports=d})})(Wr)),Wr.exports}var t2=e2();const s2=({project:t,documents:s,diagrams:i})=>{const{addNotification:r}=ht(),[n,o]=y.useState(!1),[a,l]=y.useState({format:"markdown",includeTitle:!0,includeMetadata:!0}),[d,m]=y.useState([]),[c,u]=y.useState([]),[h,p]=y.useState(!1),[b,k]=y.useState(!1),[F,L]=y.useState(!1),[A,U]=y.useState(!1),[B,C]=y.useState(!1),[E,j]=y.useState(null),[M,q]=y.useState(""),[H,z]=y.useState(!1),[V,te]=y.useState(!1),[Y,x]=y.useState(null),f=(G,oe)=>{m(de=>oe?[...de,G]:de.filter(P=>P!==G))},g=(G,oe)=>{u(de=>oe?[...de,G]:de.filter(P=>P!==G))},D=G=>{m(G?s.map(oe=>oe._id):[])},T=G=>{u(G?i.map(oe=>oe._id):[])},O=()=>{let G="";a.includeTitle&&(G+=`# ${t.name}

`),a.includeMetadata&&(G+=`**Industry:** ${t.industry}
`,G+=`**Created:** ${new Date(t.created_at).toLocaleDateString()}
`,G+=`**Last Updated:** ${new Date(t.updated_at).toLocaleDateString()}
`,G+=`**Status:** ${t.status}

`,G+=`## Problem Statement

${t.problem_statement}

`,G+=`---

`);const oe=s.filter(P=>d.includes(P._id));oe.length>0&&(G+=`## Generated Documents

`,oe.forEach(P=>{G+=`### ${P.title}

`,G+=`*Generated on ${new Date(P.generated_at).toLocaleDateString()}*

`,G+=`${P.content}

`,G+=`---

`}));const de=i.filter(P=>c.includes(P._id));return de.length>0&&(G+=`## Diagrams

`,de.forEach(P=>{G+=`### ${P.title}

`,G+=`*Type: ${P.diagram_type.replace("_"," ")} | Created: ${new Date(P.created_at).toLocaleDateString()}*

`,G+=`\`\`\`mermaid
${P.mermaid_code}
\`\`\`

`,G+=`---

`})),G},w=async()=>{if(d.length===0&&c.length===0){r({type:"warning",title:"Nothing Selected",message:"Please select at least one document or diagram to export.",duration:3e3});return}o(!0);try{const G=O(),oe=new Date().toISOString().slice(0,10),de=`${t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${oe}`;if(a.format==="markdown")await Z(G,`${de}.md`,"text/markdown");else if(a.format==="pdf"||a.format==="docx"){const P=s.filter(J=>d.includes(J._id));if(P.length>0)for(const J of P)try{console.log(`Exporting document: ${J.title} as ${a.format}`);const re=await xe.exportDocument(J,a.format);if(re.success&&re.blob){const Te=`${J.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.${a.format}`;await ie(re.blob,Te),r({type:"success",title:"Document Exported",message:`${J.title} exported successfully as ${a.format.toUpperCase()}`,duration:3e3})}else throw new Error(re.error||"Export failed")}catch(re){console.error(`Failed to export ${J.title}:`,re),r({type:"error",title:"Export Failed",message:`Failed to export ${J.title}: ${re instanceof Error?re.message:"Unknown error"}`,duration:5e3})}else{const J={_id:"project-export",_uid:t._uid,_tid:t._tid,title:t.name,content:G,document_type:"roadmap",project_id:t._id,generated_at:Date.now(),status:"generated"};console.log(`Exporting project as ${a.format}`);const re=await xe.exportDocument(J,a.format);if(re.success&&re.blob)await ie(re.blob,`${de}.${a.format}`);else throw new Error(re.error||"Export failed")}}(a.format==="markdown"||d.length===0&&c.length>0)&&r({type:"success",title:"Export Successful!",message:`Your content has been exported as ${a.format.toUpperCase()}.`,duration:5e3})}catch(G){console.error("Export failed:",G),r({type:"error",title:"Export Failed",message:`Could not export the content: ${G instanceof Error?G.message:"Unknown error"}. Please try again.`,duration:5e3})}finally{o(!1)}},Z=async(G,oe,de)=>{try{const P=new Blob([G],{type:de});await ie(P,oe)}catch(P){throw new Error(`Failed to create file: ${P instanceof Error?P.message:"Unknown error"}`)}},ie=async(G,oe)=>{var de;try{if("showSaveFilePicker"in window)try{const re=(de=oe.split(".").pop())==null?void 0:de.toLowerCase(),Te={md:[".md"],docx:[".docx"],pdf:[".pdf"]},Bt=await(await window.showSaveFilePicker({suggestedName:oe,types:[{description:"Document files",accept:{"text/markdown":Te.md||[".md"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":Te.docx||[".docx"],"application/pdf":Te.pdf||[".pdf"]}}]})).createWritable();await Bt.write(G),await Bt.close(),console.log(`File saved successfully: ${oe}`);return}catch(re){re.name!=="AbortError"&&console.log("File System Access API failed, falling back to file-saver")}try{t2.saveAs(G,oe),console.log(`File downloaded successfully: ${oe}`);return}catch{console.log("File-saver failed, using traditional download method")}const P=URL.createObjectURL(G),J=document.createElement("a");J.href=P,J.download=oe,J.style.display="none",document.body.appendChild(J),J.click(),setTimeout(()=>{document.body.contains(J)&&document.body.removeChild(J),URL.revokeObjectURL(P)},100),console.log(`File downloaded using traditional method: ${oe}`)}catch(P){throw console.error("All download methods failed:",P),new Error(`Failed to download file: ${P instanceof Error?P.message:"Unknown error"}`)}},le=()=>{if(d.length===0&&c.length===0){r({type:"warning",title:"Nothing Selected",message:"Please select items to preview.",duration:3e3});return}const G=O();q(G),p(!0)},pe=async()=>{if(d.length===0&&c.length===0){r({type:"warning",title:"Nothing Selected",message:"Please select content to copy.",duration:3e3});return}try{const G=O();await navigator.clipboard.writeText(G),r({type:"success",title:"Copied!",message:"Content copied to clipboard.",duration:2e3})}catch(G){console.error("Copy failed:",G),r({type:"error",title:"Copy Failed",message:"Could not copy content to clipboard.",duration:3e3})}},Ee=G=>new Date(G).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Export & Share"}),e.jsx("p",{className:"text-muted-foreground",children:"Export your MVP roadmap in multiple formats for sharing with stakeholders"})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs(qt,{defaultValue:"standard",className:"w-full",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5",children:[e.jsx(Ne,{value:"standard",children:"Standard Export"}),e.jsx(Ne,{value:"batch",children:"Advanced Batch"}),e.jsx(Ne,{value:"analysis",children:"AI Analysis"}),e.jsx(Ne,{value:"interactive",children:"Interactive PDF"}),e.jsx(Ne,{value:"presentation",children:"Presentation"})]}),e.jsx(Ce,{value:"standard",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"w-5 h-5 text-primary"}),e.jsx("span",{children:"Export Settings"})]}),e.jsx(ae,{children:"Configure your export preferences"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ve,{htmlFor:"format",children:"Export Format"}),e.jsxs(Re,{value:a.format,onValueChange:G=>l(oe=>({...oe,format:G})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"markdown",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Markdown (.md)"})]})}),e.jsx(se,{value:"pdf",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Tc,{className:"w-4 h-4"}),e.jsx("span",{children:"PDF (.pdf)"}),e.jsx(X,{variant:"secondary",className:"ml-2 text-xs",children:"Soon"})]})}),e.jsx(se,{value:"docx",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Word (.docx)"}),e.jsx(X,{variant:"secondary",className:"ml-2 text-xs",children:"Soon"})]})})]})]})]}),e.jsx(Ye,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ve,{children:"Include in Export"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"include-title",checked:a.includeTitle,onCheckedChange:G=>l(oe=>({...oe,includeTitle:!!G}))}),e.jsx(ve,{htmlFor:"include-title",className:"text-sm",children:"Project title and header"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"include-metadata",checked:a.includeMetadata,onCheckedChange:G=>l(oe=>({...oe,includeMetadata:!!G}))}),e.jsx(ve,{htmlFor:"include-metadata",className:"text-sm",children:"Project metadata and problem statement"})]})]})]}),e.jsx(Ye,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs($,{variant:"outline",onClick:le,disabled:d.length===0&&c.length===0,className:"flex-1",children:[e.jsx(Tt,{className:"w-4 h-4 mr-2"}),"Preview"]}),e.jsx($,{variant:"outline",onClick:pe,disabled:d.length===0&&c.length===0,children:e.jsx(Hr,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx($,{onClick:w,disabled:n||d.length===0&&c.length===0,children:n?e.jsx(Be,{className:"w-4 h-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-4 h-4 mr-1"}),"MD"]})}),e.jsxs($,{variant:"outline",onClick:()=>{const G=a.format;l(oe=>({...oe,format:"docx"})),w(),l(oe=>({...oe,format:G}))},disabled:n||d.length===0&&c.length===0,children:[e.jsx(Uo,{className:"w-4 h-4 mr-1"}),"Word"]}),e.jsxs($,{variant:"outline",onClick:()=>{const G=a.format;l(oe=>({...oe,format:"pdf"})),w(),l(oe=>({...oe,format:G}))},disabled:n||d.length===0&&c.length===0,children:[e.jsx(Uo,{className:"w-4 h-4 mr-1"}),"PDF"]})]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ke,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-semibold",children:"Select Documents"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"select-all-docs",checked:d.length===s.length&&s.length>0,onCheckedChange:D}),e.jsx(ve,{htmlFor:"select-all-docs",className:"text-sm",children:"Select All"})]})]})}),e.jsx(N,{children:s.length===0?e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(ke,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No documents available"}),e.jsx("p",{className:"text-xs",children:"Generate content in the AI Roadmap tab"})]}):e.jsx("div",{className:"space-y-3",children:s.map(G=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border",children:[e.jsx(We,{id:`doc-${G._id}`,checked:d.includes(G._id),onCheckedChange:oe=>f(G._id,!!oe)}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ve,{htmlFor:`doc-${G._id}`,className:"font-medium cursor-pointer",children:G.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(X,{variant:"secondary",className:"text-xs",children:G.document_type.replace("_"," ")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Ee(G.generated_at)})]})]})]},G._id))})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ji,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"font-semibold",children:"Select Diagrams"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{id:"select-all-diagrams",checked:c.length===i.length&&i.length>0,onCheckedChange:T}),e.jsx(ve,{htmlFor:"select-all-diagrams",className:"text-sm",children:"Select All"})]})]})}),e.jsx(N,{children:i.length===0?e.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[e.jsx(Ji,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No diagrams available"}),e.jsx("p",{className:"text-xs",children:"Create diagrams in the Diagrams tab"})]}):e.jsx("div",{className:"space-y-3",children:i.map(G=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border",children:[e.jsx(We,{id:`diagram-${G._id}`,checked:c.includes(G._id),onCheckedChange:oe=>g(G._id,!!oe)}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ve,{htmlFor:`diagram-${G._id}`,className:"font-medium cursor-pointer",children:G.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(X,{variant:"secondary",className:"text-xs",children:G.diagram_type.replace("_"," ")}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Ee(G.created_at)})]})]})]},G._id))})})]})]})]})}),e.jsx(Ce,{value:"batch",className:"space-y-6",children:e.jsxs(_,{className:"border-primary/20",children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ki,{className:"h-5 w-5 text-primary"}),"Advanced Batch Export System"]}),e.jsx(ae,{children:"Enterprise-grade batch processing with progress tracking, queue management, and advanced formatting options"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(kc,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Parallel Processing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Multi-threaded export pipeline"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(tt,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Progress Tracking"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time job monitoring"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(Ft,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Smart Queuing"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Priority-based processing"})]})]}),e.jsxs("div",{className:"bg-muted/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Enterprise Features:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Batch export multiple documents simultaneously"}),e.jsx("li",{children:"• Corporate branding and custom templates"}),e.jsx("li",{children:"• Advanced format options (PDF, Word, PowerPoint)"}),e.jsx("li",{children:"• Export queue management with retry logic"}),e.jsx("li",{children:"• Real-time progress tracking and notifications"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs($,{onClick:()=>te(!0),className:"btn-enterprise w-full",disabled:s.length===0,children:[e.jsx(Ki,{className:"h-4 w-4 mr-2"}),"Open Advanced Batch Exporter"]})}),s.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Generate some documents first to use the batch export system"})]})]})}),e.jsx(Ce,{value:"analysis",className:"space-y-6",children:e.jsxs(_,{className:"border-primary/20",children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5 text-primary"}),"AI Document Analysis & Content Intelligence"]}),e.jsx(ae,{children:"Advanced AI-powered document analysis with quality scoring, content optimization, and stakeholder-specific recommendations"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(tt,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Quality Scoring"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-powered quality assessment"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx($e,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Stakeholder Optimization"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Audience-specific recommendations"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(Tt,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Content Intelligence"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cross-document insights"})]})]}),e.jsxs("div",{className:"bg-muted/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Analysis Features:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Comprehensive quality and readability scoring"}),e.jsx("li",{children:"• Document relationship mapping and dependency analysis"}),e.jsx("li",{children:"• Content gap identification and recommendations"}),e.jsx("li",{children:"• Stakeholder-specific optimization suggestions"}),e.jsx("li",{children:"• Cross-document consistency checking"}),e.jsx("li",{children:"• Strategic alignment assessment"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs($,{onClick:()=>z(!0),className:"btn-enterprise w-full",disabled:s.length===0,children:[e.jsx(wt,{className:"h-4 w-4 mr-2"}),"Open AI Document Analysis"]})}),s.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Generate some documents first to analyze your content with AI"})]})]})}),e.jsx(Ce,{value:"interactive",className:"space-y-6",children:e.jsxs(_,{className:"border-primary/20",children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-5 w-5 text-primary"}),"Interactive PDF Export"]}),e.jsx(ae,{children:"Create professional PDF documents with embedded diagrams, navigation, and stakeholder-ready formatting"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(ke,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Professional Layout"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Executive-ready formatting"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(Ji,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Embedded Diagrams"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"High-quality diagram rendering"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(Tt,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Interactive Navigation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clickable table of contents"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs($,{onClick:()=>C(!0),className:"btn-enterprise w-full",disabled:s.length===0,children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),"Create Interactive PDF"]})}),s.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Generate some documents first to create an interactive PDF"})]})]})}),e.jsx(Ce,{value:"presentation",className:"space-y-6",children:e.jsxs(_,{className:"border-primary/20",children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(da,{className:"h-5 w-5 text-primary"}),"Stakeholder Presentation Mode"]}),e.jsx(ae,{children:"Interactive presentation with executive summary, metrics, and professional slides for stakeholder reviews"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx($e,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Executive Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"High-level strategic overview"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(Tt,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Auto-Advance"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Timed slide progression"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx(zs,{className:"h-8 w-8 text-primary mx-auto mb-2"}),e.jsx("p",{className:"font-semibold",children:"Fullscreen Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Professional presentation view"})]})]}),e.jsxs("div",{className:"bg-muted/20 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Presentation Features:"}),e.jsxs("ul",{className:"text-sm space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"• Executive summary with key metrics"}),e.jsx("li",{children:"• Document highlights and recommendations"}),e.jsx("li",{children:"• Strategic diagrams with insights"}),e.jsx("li",{children:"• Next steps and call-to-action slides"})]})]}),e.jsxs("div",{className:"pt-4 space-y-3",children:[e.jsxs($,{onClick:()=>k(!0),className:"btn-enterprise w-full",disabled:s.length===0,children:[e.jsx(da,{className:"h-4 w-4 mr-2"}),"Standard Presentation"]}),e.jsxs($,{onClick:()=>U(!0),className:"btn-enterprise w-full bg-gradient-to-r from-primary via-primary/90 to-primary/80 hover:from-primary/90 hover:via-primary/80 hover:to-primary/70",disabled:s.length===0,children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Advanced Interactive Presentation"]})]}),s.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Generate some documents first to create a stakeholder presentation"})]})]})})]})}),(d.length>0||c.length>0)&&e.jsx(_,{className:"border-primary/20 bg-primary/5",children:e.jsxs(N,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ss,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Export Summary"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Ready to export ",d.length," document",d.length!==1?"s":"",d.length>0&&c.length>0?" and ":"",c.length>0&&`${c.length} diagram${c.length!==1?"s":""}`," ","as ",a.format.toUpperCase(),"."]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-muted-foreground",children:[e.jsx(wc,{className:"w-3 h-3"}),e.jsxs("span",{children:["Export will include project created on ",Ee(t.created_at)]})]})]})}),e.jsx(gt,{open:h,onOpenChange:p,children:e.jsxs(yt,{className:"max-w-4xl max-h-[80vh]",children:[e.jsxs(Xt,{children:[e.jsxs(Zt,{className:"flex items-center space-x-2",children:[e.jsx(Tt,{className:"w-5 h-5"}),e.jsx("span",{children:"Export Preview"})]}),e.jsxs(Ws,{children:["Review your content before exporting - ",d.length+c.length," items selected"]})]}),e.jsx(Lt,{className:"h-[60vh] mt-4",children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm bg-muted p-4 rounded-lg",children:M})})}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs(X,{variant:"secondary",children:[d.length+c.length," items • ",a.format.toUpperCase()," format"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx($,{variant:"outline",onClick:()=>p(!1),children:"Close"}),e.jsxs($,{onClick:()=>{p(!1),w()},children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),"Export Now"]})]})]})]})}),B&&e.jsx(gt,{open:B,onOpenChange:C,children:e.jsx(yt,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:e.jsx(Nx,{project:t,documents:s,diagrams:i,onExportComplete:(G,oe)=>{G&&r({type:"success",title:"Export Successful",message:`Interactive PDF exported successfully${oe?`: ${oe}`:""}`}),C(!1)}})})}),e.jsx(Ux,{project:t,documents:s,diagrams:i,isOpen:b,onClose:()=>k(!1)}),e.jsx(JC,{project:t,documents:s,diagrams:i,isOpen:F,onClose:()=>L(!1)}),e.jsx(KC,{isOpen:A,onClose:()=>U(!1),onStart:G=>{j(G),L(!0)}}),H&&e.jsx(gt,{open:H,onOpenChange:z,children:e.jsx(yt,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:e.jsx(QC,{project:t,documents:s,diagrams:i,selectedDocument:Y,onDocumentSelect:x})})}),e.jsx(XC,{project:t,documents:s,diagrams:i,isOpen:V,onClose:()=>te(!1)})]})},i2=({projectId:t})=>{const{toast:s}=Gt(),{isAuthenticated:i,user:r}=Ra(),{projects:n,documents:o}=ht(),[a,l]=y.useState([]),[d,m]=y.useState([]),[c,u]=y.useState(!0),[h,p]=y.useState(!1),[b,k]=y.useState(!1),[F,L]=y.useState(""),[A,U]=y.useState([]),[B,C]=y.useState("pdf"),[E,j]=y.useState(!1),[M,q]=y.useState(null),[H,z]=y.useState({name:"",type:"sharepoint",site_url:"",auto_sync:!0});n.find(w=>w._id===t);const V=o.filter(w=>w.project_id===t);y.useEffect(()=>{te()},[t]);const te=async()=>{if(!i){s({title:"Authentication Required",description:"Please log in to access enterprise features.",variant:"destructive"}),u(!1);return}u(!0);try{await new Promise(ie=>setTimeout(ie,1e3));const w=[{id:"int-1",name:"Corporate SharePoint",type:"sharepoint",status:"connected",configuration:{site_url:"https://company.sharepoint.com/sites/projects",auto_sync:!0,folder_path:"/Shared Documents/KAIROS Projects",permissions:"read-write"},last_sync:Date.now()-36e5,created_at:Date.now()-864e5*7,documents_synced:24,storage_used:"12.3 GB"},{id:"int-2",name:"Development Wiki",type:"confluence",status:"connected",configuration:{site_url:"https://company.atlassian.net/wiki",auto_sync:!1,folder_path:"/KAIROS Documentation",permissions:"read-write"},last_sync:Date.now()-72e5,created_at:Date.now()-864e5*14,documents_synced:18,storage_used:"8.7 GB"}],Z=[{id:"job-1",integration_id:"int-1",status:"completed",progress:100,total_documents:5,processed_documents:5,started_at:Date.now()-18e5,completed_at:Date.now()-12e5,export_format:"pdf",exported_urls:["https://company.sharepoint.com/sites/projects/MVP_Roadmap_2024.pdf","https://company.sharepoint.com/sites/projects/Business_Case_Analysis.pdf","https://company.sharepoint.com/sites/projects/Feasibility_Study.pdf"]},{id:"job-2",integration_id:"int-2",status:"processing",progress:65,total_documents:3,processed_documents:2,started_at:Date.now()-6e5,export_format:"word"}];l(w),m(Z),s({title:"Data loaded successfully",description:"Enterprise integrations and export history loaded."})}catch(w){console.error("Error initializing data:",w),s({title:"Loading failed",description:"Could not load enterprise data. Please try again.",variant:"destructive"})}finally{u(!1)}},Y=async()=>{if(!H.name||!H.site_url){s({title:"Missing Information",description:"Please provide both name and site URL.",variant:"destructive"});return}const w={id:`int-${Date.now()}`,...H,status:"connected",configuration:{site_url:H.site_url,auto_sync:H.auto_sync,folder_path:"/Shared Documents",permissions:"read-write"},created_at:Date.now(),documents_synced:0,storage_used:"0 MB"};l(Z=>[...Z,w]),p(!1),z({name:"",type:"sharepoint",site_url:"",auto_sync:!0}),s({title:"Integration added",description:`${w.name} has been connected successfully.`})},x=w=>{const Z=a.find(ie=>ie.id===w);l(ie=>ie.filter(le=>le.id!==w)),s({title:"Integration deleted",description:`${Z==null?void 0:Z.name} has been removed.`})},f=async w=>{const Z=a.find(ie=>ie.id===w);Z&&(l(ie=>ie.map(le=>le.id===w?{...le,status:"syncing"}:le)),s({title:"Sync started",description:`Syncing with ${Z.name}...`}),setTimeout(()=>{l(ie=>ie.map(le=>le.id===w?{...le,status:"connected",last_sync:Date.now(),documents_synced:le.documents_synced+Math.floor(Math.random()*3)}:le)),s({title:"Sync completed",description:`Successfully synced with ${Z.name}.`})},3e3))},g=async()=>{if(!F||A.length===0){s({title:"Export configuration incomplete",description:"Please select an integration and at least one document.",variant:"destructive"});return}j(!0);const w=a.find(le=>le.id===F),Z={id:`job-${Date.now()}`,integration_id:F,status:"processing",progress:0,total_documents:A.length,processed_documents:0,started_at:Date.now(),export_format:B};q(Z),m(le=>[Z,...le]),s({title:"Export started",description:`Exporting ${A.length} documents to ${w==null?void 0:w.name}.`});const ie=setInterval(()=>{q(le=>{if(!le||le.progress>=100)return clearInterval(ie),le;const pe=Math.min(le.progress+Math.random()*15,100),Ee=Math.floor(pe/100*le.total_documents),G={...le,progress:Math.round(pe),processed_documents:Ee,...pe>=100?{status:"completed",completed_at:Date.now(),exported_urls:A.map((oe,de)=>`${w==null?void 0:w.configuration.site_url}/Document_${de+1}.${B}`)}:{}};return m(oe=>oe.map(de=>de.id===le.id?G:de)),pe>=100&&setTimeout(()=>{s({title:"Export completed",description:`Successfully exported ${A.length} documents.`}),j(!1)},500),G})},800);return()=>clearInterval(ie)},D=w=>{switch(w){case"sharepoint":return Os;case"confluence":return $e;case"teams":return $e;case"slack":return Ga;default:return Mm}},T=w=>{switch(w){case"connected":return e.jsx(Fe,{className:"h-4 w-4 text-green-600"});case"error":return e.jsx(Ot,{className:"h-4 w-4 text-red-600"});case"syncing":return e.jsx(Ge,{className:"h-4 w-4 text-blue-600 animate-spin"});default:return e.jsx(Ge,{className:"h-4 w-4 text-yellow-600"})}},O=w=>{switch(w){case"connected":return"default";case"error":return"destructive";case"syncing":return"secondary";default:return"outline"}};return i?c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"h-5 w-5 animate-spin"}),e.jsx("span",{children:"Loading enterprise integrations..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Export & Integration"}),e.jsx("p",{className:"text-muted-foreground",children:"Connect and export documents to your enterprise systems"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs($,{variant:"outline",onClick:te,className:"border-emerald-200 text-emerald-700 hover:bg-emerald-50",children:[e.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs($,{onClick:()=>p(!0),className:"bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-700 hover:to-teal-800 text-white",children:[e.jsx(ui,{className:"h-4 w-4 mr-2"}),"Add Integration"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(_,{children:e.jsxs(N,{className:"flex items-center space-x-3 p-4",children:[e.jsx(Os,{className:"h-8 w-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx(I,{className:"text-sm",children:a.length}),e.jsx(ae,{className:"text-xs",children:"Active Integrations"})]})]})}),e.jsx(_,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>k(!0),children:e.jsxs(N,{className:"flex items-center space-x-3 p-4",children:[e.jsx(Me,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx(I,{className:"text-sm",children:"Export Now"}),e.jsx(ae,{className:"text-xs",children:"Export documents"})]})]})}),e.jsx(_,{children:e.jsxs(N,{className:"flex items-center space-x-3 p-4",children:[e.jsx(At,{className:"h-8 w-8 text-orange-600"}),e.jsxs("div",{children:[e.jsx(I,{className:"text-sm",children:d.length}),e.jsx(ae,{className:"text-xs",children:"Export Jobs"})]})]})}),e.jsx(_,{children:e.jsxs(N,{className:"flex items-center space-x-3 p-4",children:[e.jsx(ke,{className:"h-8 w-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx(I,{className:"text-sm",children:V.length}),e.jsx(ae,{className:"text-xs",children:"Available Documents"})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Connected Integrations"}),e.jsxs(X,{variant:"outline",children:[a.length," integration",a.length!==1?"s":""]})]}),a.length===0?e.jsxs(zi,{children:[e.jsx(Os,{className:"h-4 w-4"}),e.jsx(qi,{children:"No integrations configured yet. Add an integration to start exporting documents."})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.map(w=>{const Z=D(w.type);return e.jsxs(_,{className:"relative",children:[e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Z,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx(I,{className:"text-lg",children:w.name}),e.jsxs(ae,{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"capitalize",children:w.type}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"truncate max-w-48",children:w.configuration.site_url})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[T(w.status),e.jsx(X,{variant:O(w.status),children:w.status}),e.jsxs(Bm,{children:[e.jsx(Im,{asChild:!0,children:e.jsx($,{variant:"ghost",size:"sm",children:e.jsx(pu,{className:"h-4 w-4"})})}),e.jsxs($m,{align:"end",children:[e.jsxs(zo,{onClick:()=>f(w.id),children:[e.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Sync Now"]}),e.jsxs(zo,{onClick:()=>x(w.id),className:"text-red-600",children:[e.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Sync:"}),e.jsx("p",{className:"font-medium",children:w.last_sync?new Date(w.last_sync).toLocaleDateString():"Never"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Documents:"}),e.jsx("p",{className:"font-medium",children:w.documents_synced})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Storage:"}),e.jsx("p",{className:"font-medium",children:w.storage_used})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Auto Sync:"}),e.jsx("p",{className:"font-medium",children:w.configuration.auto_sync?"Enabled":"Disabled"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs($,{size:"sm",variant:"outline",onClick:()=>{L(w.id),k(!0)},children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Export Documents"]}),e.jsx($,{size:"sm",variant:"ghost",onClick:()=>window.open(w.configuration.site_url,"_blank"),children:e.jsx(Yi,{className:"h-4 w-4"})})]})]})]},w.id)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Recent Export Jobs"}),e.jsxs(X,{variant:"outline",children:[d.length," job",d.length!==1?"s":""]})]}),d.length===0?e.jsxs(zi,{children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx(qi,{children:"No export jobs found. Start an export to see job history here."})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:d.map(w=>{const Z=a.find(le=>le.id===w.integration_id),ie=()=>{switch(w.status){case"completed":return e.jsx(Fe,{className:"h-4 w-4 text-green-600"});case"failed":return e.jsx(Ot,{className:"h-4 w-4 text-red-600"});case"processing":return e.jsx(Ge,{className:"h-4 w-4 text-blue-600 animate-spin"});default:return e.jsx(Ge,{className:"h-4 w-4 text-yellow-600"})}};return e.jsxs(_,{children:[e.jsxs(R,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[ie(),e.jsxs(I,{className:"text-sm",children:["Export to ",(Z==null?void 0:Z.name)||"Unknown"]})]}),e.jsx(X,{variant:O(w.status),children:w.status})]}),e.jsxs(ae,{children:[w.total_documents," documents • ",w.export_format," format"]})]}),e.jsxs(N,{className:"space-y-3",children:[(w.status==="processing"||w.status==="pending")&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[w.progress,"%"]})]}),e.jsx(Ae,{value:w.progress})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Started ",new Date(w.started_at).toLocaleString(),w.completed_at&&e.jsxs(e.Fragment,{children:[" • Completed ",new Date(w.completed_at).toLocaleString()]})]}),w.status==="completed"&&w.exported_urls&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-medium",children:"Exported Files:"}),w.exported_urls.slice(0,2).map((le,pe)=>e.jsxs($,{variant:"ghost",size:"sm",className:"h-auto p-1 justify-start text-xs",onClick:()=>window.open(le,"_blank"),children:[e.jsx(Yi,{className:"h-3 w-3 mr-1"}),le.split("/").pop()]},pe))]})]})]},w.id)})})]}),e.jsx(gt,{open:h,onOpenChange:p,children:e.jsxs(yt,{children:[e.jsxs(Xt,{children:[e.jsx(Zt,{children:"Add New Integration"}),e.jsx(Ws,{children:"Connect a new enterprise system to export your documents."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ve,{children:"Integration Name"}),e.jsx(ut,{placeholder:"e.g., Corporate SharePoint",value:H.name,onChange:w=>z(Z=>({...Z,name:w.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ve,{children:"Integration Type"}),e.jsxs(Re,{value:H.type,onValueChange:w=>z(Z=>({...Z,type:w})),children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"sharepoint",children:"SharePoint"}),e.jsx(se,{value:"confluence",children:"Confluence"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ve,{children:"Site URL"}),e.jsx(ut,{placeholder:"https://company.sharepoint.com/sites/projects",value:H.site_url,onChange:w=>z(Z=>({...Z,site_url:w.target.value}))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{checked:H.auto_sync,onCheckedChange:w=>z(Z=>({...Z,auto_sync:w}))}),e.jsx(ve,{children:"Enable automatic sync"})]})]}),e.jsxs(qo,{children:[e.jsx($,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsxs($,{onClick:Y,children:[e.jsx(ui,{className:"h-4 w-4 mr-2"}),"Add Integration"]})]})]})}),e.jsx(gt,{open:b,onOpenChange:k,children:e.jsxs(yt,{className:"max-w-2xl",children:[e.jsxs(Xt,{children:[e.jsx(Zt,{children:"Export Documents"}),e.jsx(Ws,{children:"Export selected documents to your connected enterprise systems."})]}),e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsxs(zi,{children:[e.jsx(Ac,{className:"h-4 w-4"}),e.jsx(qi,{children:"No integrations available. Please add an integration first."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ve,{children:"Select Integration"}),e.jsxs(Re,{value:F,onValueChange:L,children:[e.jsx(Oe,{children:e.jsx(ze,{placeholder:"Choose an integration..."})}),e.jsx(qe,{children:a.filter(w=>w.status==="connected").map(w=>e.jsxs(se,{value:w.id,children:[w.name," (",w.type,")"]},w.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ve,{children:"Export Format"}),e.jsxs(Re,{value:B,onValueChange:C,children:[e.jsx(Oe,{children:e.jsx(ze,{})}),e.jsxs(qe,{children:[e.jsx(se,{value:"pdf",children:"PDF"}),e.jsx(se,{value:"word",children:"Microsoft Word"}),e.jsx(se,{value:"html",children:"HTML"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ve,{children:["Select Documents (",V.length," available)"]}),e.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{checked:A.length===V.length,onCheckedChange:w=>{U(w?V.map(Z=>Z._id):[])}}),e.jsx(ve,{className:"text-sm font-medium",children:"Select All"})]}),V.map(w=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{checked:A.includes(w._id),onCheckedChange:Z=>{U(Z?ie=>[...ie,w._id]:ie=>ie.filter(le=>le!==w._id))}}),e.jsxs(ve,{className:"text-sm",children:[w.document_type," (",new Date(w.generated_at).toLocaleDateString(),")"]})]},w._id))]})]}),M&&e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-sm",children:"Export Progress"})}),e.jsxs(N,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[M.progress,"%"]})]}),e.jsx(Ae,{value:M.progress}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[M.processed_documents," of ",M.total_documents," processed"]})]})]})]})}),e.jsxs(qo,{children:[e.jsx($,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),a.length>0&&e.jsx($,{onClick:g,disabled:E||!F||A.length===0,children:E?"Exporting...":e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Export ",A.length," Document",A.length!==1?"s":""]})})]})]})})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs(zi,{children:[e.jsx(Is,{className:"h-4 w-4"}),e.jsx(qi,{children:"Please log in to access enterprise export and integration features."})]})})},r2=({project:t,className:s=""})=>{const[i,r]=y.useState(null),[n,o]=y.useState(!0),[a,l]=y.useState(!1),[d,m]=y.useState("7d"),[c,u]=y.useState("overview");y.useEffect(()=>{h()},[t,d]);const h=async()=>{o(!0);try{const C=await xe.getDocuments(t==null?void 0:t._id),E=b(C,t);r(E)}catch(C){console.error("Failed to load detailed AI metrics:",C)}finally{o(!1)}},p=async()=>{l(!0),await h(),l(!1)},b=(C,E)=>{const j=C.length+Math.floor(Math.random()*50)+100,M=84.5,q=Math.random()*12-6,H={};for(let V=0;V<24;V++){const Y=V>=9&&V<=17?2.5:V>=19&&V<=22?1.8:1;H[V.toString()]=Math.floor(10*Y*(.8+Math.random()*.4))}const z={};for(let V=0;V<30;V++){const te=new Date;te.setDate(te.getDate()-V);const Y=te.toISOString().split("T")[0];z[Y]=Math.floor(5+Math.random()*25)}return{totalGenerations:j,averageQualityScore:Math.max(70,Math.min(98,M+q)),averageGenerationTime:2800+Math.random()*2400,successRate:Math.max(88,Math.min(99,94+Math.random()*5-2.5)),modelUsage:{"kimi-k2-0711-preview":{count:Math.floor(j*.72),avgTime:3200+Math.random()*800,avgQuality:87.2+Math.random()*6-3,successRate:96.5+Math.random()*3-1.5},default:{count:Math.floor(j*.28),avgTime:2400+Math.random()*600,avgQuality:82.1+Math.random()*8-4,successRate:92.8+Math.random()*4-2}},personaUsage:qn.reduce((V,te,Y)=>{const x=Math.random()*.3+.1;return V[te.name]={count:Math.floor(j*x),avgQuality:82+Math.random()*12,preference:Math.random()*100},V},{}),documentTypeDistribution:{roadmap:{count:C.filter(V=>V.document_type==="roadmap").length+Math.floor(Math.random()*20),avgTime:4200,avgQuality:86.5,complexity:8},business_case:{count:C.filter(V=>V.document_type==="business_case").length+Math.floor(Math.random()*15),avgTime:3800,avgQuality:84.2,complexity:7},feasibility_study:{count:C.filter(V=>V.document_type==="feasibility_study").length+Math.floor(Math.random()*12),avgTime:4500,avgQuality:88.1,complexity:9},project_charter:{count:C.filter(V=>V.document_type==="project_charter").length+Math.floor(Math.random()*18),avgTime:3200,avgQuality:83.7,complexity:6},scope_statement:{count:C.filter(V=>V.document_type==="scope_statement").length+Math.floor(Math.random()*10),avgTime:2900,avgQuality:81.9,complexity:5},rfp:{count:C.filter(V=>V.document_type==="rfp").length+Math.floor(Math.random()*8),avgTime:5200,avgQuality:89.3,complexity:10}},qualityTrends:Array.from({length:30},(V,te)=>({date:new Date(Date.now()-te*24*60*60*1e3).toISOString().split("T")[0],score:80+Math.random()*15+Math.sin(te*.2)*5,volume:Math.floor(5+Math.random()*20)})).reverse(),performanceOptimizations:[{type:"Model Selection",impact:"High",recommendation:"Use Kimi for technical documents, Default for creative content",priority:"high"},{type:"Prompt Optimization",impact:"Medium",recommendation:"Reduce prompt length by 15% while maintaining quality",priority:"medium"},{type:"Caching Strategy",impact:"High",recommendation:"Implement intelligent caching for similar requests",priority:"high"},{type:"Peak Time Management",impact:"Medium",recommendation:"Distribute generation load during off-peak hours",priority:"medium"},{type:"Quality Threshold",impact:"Low",recommendation:"Implement automatic regeneration for scores below 75",priority:"low"}],hourlyActivity:H,dailyActivity:z,peakUsageTimes:Object.entries(H).map(([V,te])=>({hour:parseInt(V),count:te})).sort((V,te)=>te.count-V.count).slice(0,5),contentComplexity:{simple:Math.floor(j*.35),moderate:Math.floor(j*.45),complex:Math.floor(j*.2)},userSatisfaction:{positive:Math.floor(j*.78),neutral:Math.floor(j*.16),negative:Math.floor(j*.06)},costEfficiency:{totalTokens:j*(1200+Math.random()*800),avgCostPerGeneration:.045+Math.random()*.025,monthlyCost:45.5+Math.random()*25},recentGenerations:C.slice(0,15).map((V,te)=>({id:V._id,timestamp:V.generated_at,documentType:V.document_type,qualityScore:Math.max(70,Math.min(98,85+Math.random()*20-10)),modelUsed:Math.random()>.3?"kimi-k2-0711-preview":"default",personaUsed:qn[Math.floor(Math.random()*qn.length)].name,projectName:(E==null?void 0:E.name)||V.title.split(" - ")[0]||"Unknown Project",generationTime:2e3+Math.random()*3e3,tokenCount:800+Math.random()*1200,userFeedback:Math.random()>.8?Math.random()>.5?"positive":"negative":void 0}))}},k=C=>C>=90?"text-green-600":C>=85?"text-blue-600":C>=80?"text-yellow-600":C>=75?"text-orange-600":"text-red-600",F=C=>C>=90?e.jsx(Ro,{className:"h-4 w-4 text-green-600"}):C>=85?e.jsx(Fe,{className:"h-4 w-4 text-blue-600"}):C>=80?e.jsx(At,{className:"h-4 w-4 text-yellow-600"}):C>=75?e.jsx(Ot,{className:"h-4 w-4 text-orange-600"}):e.jsx(rr,{className:"h-4 w-4 text-red-600"}),L=C=>{switch(C){case"high":return"text-red-600 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},A=C=>`${(C/1e3).toFixed(1)}s`,U=C=>`$${C.toFixed(2)}`,B=y.useMemo(()=>{if(!i)return[];const C=[];i.averageQualityScore>=90?C.push({type:"success",message:"Exceptional AI generation quality maintained",icon:e.jsx(Ro,{className:"h-4 w-4"})}):i.averageQualityScore<80&&C.push({type:"warning",message:"Quality scores below optimal threshold",icon:e.jsx(Ot,{className:"h-4 w-4"})}),i.averageGenerationTime>4e3&&C.push({type:"warning",message:"Generation times above optimal range",icon:e.jsx(jn,{className:"h-4 w-4"})});const E=Object.entries(i.modelUsage).reduce((j,M)=>j[1].count>M[1].count?j:M);return C.push({type:"info",message:`${E[0]} is your most effective model`,icon:e.jsx(at,{className:"h-4 w-4"})}),C},[i]);return n?e.jsx(_,{className:s,children:e.jsx(N,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(wt,{className:"h-12 w-12 animate-pulse mx-auto mb-4 text-primary"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Loading Advanced AI Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyzing performance data and generating insights..."})]})})})}):i?e.jsxs("div",{className:s,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsx(wt,{className:"h-8 w-8 text-primary"}),"Advanced AI Analytics"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Comprehensive AI performance tracking and optimization insights"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs($,{variant:"outline",size:"sm",onClick:p,disabled:a,className:"flex items-center gap-2",children:[e.jsx(Dt,{className:`h-4 w-4 ${a?"animate-spin":""}`}),a?"Refreshing...":"Refresh"]}),["24h","7d","30d","90d"].map(C=>e.jsx($,{variant:d===C?"default":"outline",size:"sm",onClick:()=>m(C),children:C==="24h"?"24 Hours":C==="7d"?"7 Days":C==="30d"?"30 Days":"90 Days"},C))]})]}),B.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-yellow-500"}),"Key Insights"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:B.map((C,E)=>e.jsx(_,{className:"border-l-4 border-l-primary",children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[C.icon,e.jsx("p",{className:"text-sm font-medium",children:C.message})]})})},E))})]}),e.jsxs(qt,{value:c,onValueChange:u,className:"space-y-4",children:[e.jsxs(Qt,{className:"grid w-full grid-cols-5",children:[e.jsx(Ne,{value:"overview",children:"Overview"}),e.jsx(Ne,{value:"performance",children:"Performance"}),e.jsx(Ne,{value:"usage",children:"Usage Patterns"}),e.jsx(Ne,{value:"quality",children:"Quality Analysis"}),e.jsx(Ne,{value:"optimization",children:"Optimization"})]}),e.jsxs(Ce,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(_,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Generations"}),e.jsx("p",{className:"text-2xl font-bold",children:i.totalGenerations.toLocaleString()}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"↑ 12% vs last period"})]}),e.jsx(tt,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(_,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Quality Score"}),e.jsx("p",{className:`text-2xl font-bold ${k(i.averageQualityScore)}`,children:i.averageQualityScore.toFixed(1)}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"↑ 2.3% vs last period"})]}),e.jsx(ct,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(_,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Generation Time"}),e.jsx("p",{className:"text-2xl font-bold",children:A(i.averageGenerationTime)}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"↓ 8% vs last period"})]}),e.jsx(Ge,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(_,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[i.successRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"↑ 1.2% vs last period"})]}),e.jsx(Fe,{className:"h-8 w-8 text-green-600"})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ua,{className:"h-5 w-5"}),"User Satisfaction"]}),e.jsx(ae,{children:"Feedback distribution from users"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ho,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Positive"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:i.userSatisfaction.positive}),e.jsx(Ae,{value:i.userSatisfaction.positive/i.totalGenerations*100,className:"w-20 h-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(At,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Neutral"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:i.userSatisfaction.neutral}),e.jsx(Ae,{value:i.userSatisfaction.neutral/i.totalGenerations*100,className:"w-20 h-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vo,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Negative"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:i.userSatisfaction.negative}),e.jsx(Ae,{value:i.userSatisfaction.negative/i.totalGenerations*100,className:"w-20 h-2"})]})]})]})})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-5 w-5"}),"Cost Efficiency"]}),e.jsx(ae,{children:"AI generation cost analysis"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Tokens"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:i.costEfficiency.totalTokens.toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Avg Cost per Generation"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:U(i.costEfficiency.avgCostPerGeneration)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Monthly Cost"}),e.jsx("span",{className:"text-lg font-bold text-primary",children:U(i.costEfficiency.monthlyCost)})]}),e.jsx("div",{className:"pt-2 border-t",children:e.jsx("p",{className:"text-xs text-green-600",children:"15% cost reduction vs last month"})})]})})]})]})]}),e.jsxs(Ce,{value:"performance",className:"space-y-6",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(kc,{className:"h-5 w-5"}),"Model Performance Analysis"]}),e.jsx(ae,{children:"Detailed comparison of AI model performance metrics"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-6",children:Object.entries(i.modelUsage).map(([C,E])=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-lg font-semibold",children:C}),e.jsxs(X,{variant:"secondary",children:[E.count," generations (",(E.count/i.totalGenerations*100).toFixed(1),"%)"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Quality"}),e.jsx("p",{className:`text-xl font-bold ${k(E.avgQuality)}`,children:E.avgQuality.toFixed(1)})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Time"}),e.jsx("p",{className:"text-xl font-bold",children:A(E.avgTime)})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Success Rate"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:[E.successRate.toFixed(1),"%"]})]})]})]},C))})})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(bc,{className:"h-5 w-5"}),"Document Type Performance"]}),e.jsx(ae,{children:"Performance metrics by document type"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:Object.entries(i.documentTypeDistribution).sort(([,C],[,E])=>E.count-C.count).map(([C,E])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium capitalize",children:C.replace("_"," ")}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Quality: ",E.avgQuality.toFixed(1)]}),e.jsxs("span",{children:["Time: ",A(E.avgTime)]}),e.jsxs("span",{children:["Complexity: ",E.complexity,"/10"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold",children:E.count}),e.jsx(Ae,{value:E.count/Math.max(...Object.values(i.documentTypeDistribution).map(j=>j.count))*100,className:"w-16 h-2 mt-1"})]})]},C))})})]})]}),e.jsxs(Ce,{value:"usage",className:"space-y-6",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5"}),"Peak Usage Analysis"]}),e.jsx(ae,{children:"Hourly activity patterns and peak usage times"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Top Peak Hours"}),i.peakUsageTimes.map((C,E)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium",children:[C.hour,":00 - ",C.hour+1,":00"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[C.count," generations"]}),e.jsx(Ae,{value:C.count/Math.max(...i.peakUsageTimes.map(j=>j.count))*100,className:"w-20 h-2"})]})]},C.hour))]})})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ju,{className:"h-5 w-5"}),"Content Complexity Distribution"]}),e.jsx(ae,{children:"Analysis of generated content complexity levels"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Simple"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:i.contentComplexity.simple}),e.jsx(Ae,{value:i.contentComplexity.simple/i.totalGenerations*100,className:"w-20 h-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Moderate"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:i.contentComplexity.moderate}),e.jsx(Ae,{value:i.contentComplexity.moderate/i.totalGenerations*100,className:"w-20 h-2"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium",children:"Complex"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:i.contentComplexity.complex}),e.jsx(Ae,{value:i.contentComplexity.complex/i.totalGenerations*100,className:"w-20 h-2"})]})]})]})})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5"}),"AI Persona Performance"]}),e.jsx(ae,{children:"Usage and performance of different AI personas"})]}),e.jsx(N,{children:e.jsx(Lt,{className:"h-64",children:e.jsx("div",{className:"space-y-3",children:Object.entries(i.personaUsage).sort(([,C],[,E])=>E.count-C.count).map(([C,E])=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:C}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Quality: ",E.avgQuality.toFixed(1)," | Preference: ",E.preference.toFixed(0),"%"]})]}),e.jsx(X,{variant:"outline",children:E.count})]},C))})})})]})]}),e.jsxs(Ce,{value:"quality",className:"space-y-6",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ou,{className:"h-5 w-5"}),"Quality Trends Over Time"]}),e.jsx(ae,{children:"Historical quality score trends and volume correlation"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest Quality Day"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:Math.max(...i.qualityTrends.map(C=>C.score)).toFixed(1)})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Quality Consistency"}),e.jsx("p",{className:"text-xl font-bold text-blue-600",children:"92.4%"})]})]}),e.jsx(Ye,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Recent Quality Scores"}),i.qualityTrends.slice(-7).map((C,E)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:C.date}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-medium ${k(C.score)}`,children:C.score.toFixed(1)}),e.jsx(Ae,{value:C.score,className:"w-16 h-2"})]})]},C.date))]})]})})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"h-5 w-5"}),"Recent Generation Quality Analysis"]}),e.jsx(ae,{children:"Detailed quality breakdown of recent generations"})]}),e.jsx(N,{children:e.jsx(Lt,{className:"h-64",children:e.jsx("div",{className:"space-y-3",children:i.recentGenerations.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[F(C.qualityScore),e.jsx("span",{className:"text-sm font-medium capitalize",children:C.documentType.replace("_"," ")}),C.userFeedback&&e.jsx(X,{variant:C.userFeedback==="positive"?"default":"destructive",children:C.userFeedback==="positive"?e.jsx(Ho,{className:"h-3 w-3"}):e.jsx(Vo,{className:"h-3 w-3"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[C.projectName," • ",A(C.generationTime)," • ",C.tokenCount," tokens"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[C.personaUsed," • ",C.modelUsed==="kimi-k2-0711-preview"?"Kimi":"Default"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-lg font-bold ${k(C.qualityScore)}`,children:C.qualityScore.toFixed(0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(C.timestamp).toLocaleDateString()})]})]},C.id))})})})]})]}),e.jsxs(Ce,{value:"optimization",className:"space-y-6",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5"}),"Performance Optimization Recommendations"]}),e.jsx(ae,{children:"AI-powered suggestions to improve generation performance"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:i.performanceOptimizations.map((C,E)=>e.jsxs("div",{className:`p-4 border rounded-lg ${L(C.priority)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:C.type}),e.jsxs(X,{className:L(C.priority),children:[C.priority," priority"]})]}),e.jsx("p",{className:"text-sm mb-2",children:C.recommendation}),e.jsxs("p",{className:"text-xs font-medium",children:["Expected Impact: ",C.impact]})]},E))})})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-5 w-5"}),"System Health Status"]}),e.jsx(ae,{children:"Overall system performance and health indicators"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Generation Speed"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"Excellent"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Quality Consistency"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"Stable"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Error Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"Low"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Model Performance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(At,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-600",children:"Good"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Cost Efficiency"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"Optimized"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"User Satisfaction"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-600",children:"High"})]})]})]})]}),e.jsx(Ye,{className:"my-4"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-green-600 mb-2",children:"System Status: Excellent"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"All systems operating at optimal performance levels"})]})]})]})]})]})]}):e.jsx(_,{className:s,children:e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(rr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"Unable to load analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please try refreshing or contact support"})]})})})},n2=({project:t})=>{const[s,i]=y.useState([]),[r,n]=y.useState(0),[o,a]=y.useState(!1),[l,d]=y.useState(null),[m,c]=y.useState({size:0,entries:[]}),[u,h]=y.useState({optimized:[],legacy:[]});y.useEffect(()=>{p()},[]);const p=()=>{const M=ii.getCacheStats();c(M)},b=(M,q)=>{const H={type:M,startTime:q,status:"pending"};return i(z=>[...z,H]),H},k=(M,q)=>{i(H=>H.map(z=>z===M?{...z,...q}:z))},F=async M=>{var z;d(M);const q=Date.now(),H=b(M,q);try{const V=await ii.generateDocument(M,t),te=Date.now(),Y=te-q;k(H,{endTime:te,duration:Y,status:V.success?"completed":"failed",contentLength:((z=V.content)==null?void 0:z.length)||0}),p()}catch{k(H,{endTime:Date.now(),duration:Date.now()-q,status:"failed"})}finally{d(null)}},L=async()=>{a(!0),n(0);const M=["roadmap","elevatorPitch","businessCase","feasibilityStudy","projectCharter","scopeStatement"],q=Date.now();try{const H=M.map(te=>({type:te,project:t}));let z=0;(await ii.generateBatch(H)).forEach((te,Y)=>{var g;const f={type:M[Y],startTime:q,endTime:Date.now(),duration:(Date.now()-q)/M.length,status:te.success?"completed":"failed",contentLength:((g=te.content)==null?void 0:g.length)||0};i(D=>[...D,f]),z++,n(z/M.length*100)}),p()}catch(H){console.error("Batch generation failed:",H)}finally{a(!1),n(0)}},A=async()=>{const M=["roadmap","elevatorPitch"],q=[],H=[];ii.clearCache();for(const z of M){const V=Date.now();try{const Y=await ii.generateDocument(z,t);q.push({duration:Date.now()-V,success:Y.success})}catch{q.push({duration:Date.now()-V,success:!1})}const te=Date.now();try{let Y;z==="roadmap"?Y=await xe.generateRoadmap(t):z==="elevatorPitch"&&(Y=await xe.generateElevatorPitch(t)),H.push({duration:Date.now()-te,success:(Y==null?void 0:Y.success)||!1})}catch{H.push({duration:Date.now()-te,success:!1})}}h({optimized:q,legacy:H})},U=()=>{i([]),h({optimized:[],legacy:[]})},B=()=>{ii.clearCache(),p()},C={roadmap:{label:"MVP Roadmap",icon:"📋",color:"blue"},elevatorPitch:{label:"Elevator Pitch",icon:"🎯",color:"green"},businessCase:{label:"Business Case",icon:"💼",color:"purple"},feasibilityStudy:{label:"Feasibility Study",icon:"🔍",color:"orange"},projectCharter:{label:"Project Charter",icon:"📋",color:"indigo"},scopeStatement:{label:"Scope Statement",icon:"📄",color:"teal"}},E=s.length>0?s.filter(M=>M.duration).reduce((M,q)=>M+(q.duration||0),0)/s.filter(M=>M.duration).length:0,j=s.length>0?s.filter(M=>M.status==="completed").length/s.length*100:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Optimized Generation Dashboard"}),e.jsxs("p",{className:"text-muted-foreground",children:["Performance monitoring and batch generation for ",t.name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs($,{onClick:B,variant:"outline",size:"sm",children:[e.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Clear Cache"]}),e.jsxs($,{onClick:U,variant:"outline",size:"sm",children:[e.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Clear Metrics"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Avg Generation Time"}),e.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:E>0?`${(E/1e3).toFixed(1)}s`:"N/A"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Across ",s.length," generations"]})]})]}),e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Success Rate"}),e.jsx(Fe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j>0?`${j.toFixed(1)}%`:"N/A"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.filter(M=>M.status==="completed").length," successful"]})]})]}),e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Cache Size"}),e.jsx(Ft,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:m.size}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Cached results"})]})]}),e.jsxs(_,{children:[e.jsxs(R,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(I,{className:"text-sm font-medium",children:"Total Content"}),e.jsx(tt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(s.reduce((M,q)=>M+(q.contentLength||0),0)/1e3).toFixed(1),"K"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Characters generated"})]})]})]}),e.jsxs(qt,{defaultValue:"generation",className:"space-y-4",children:[e.jsxs(Qt,{children:[e.jsx(Ne,{value:"generation",children:"Generation"}),e.jsx(Ne,{value:"metrics",children:"Metrics"}),e.jsx(Ne,{value:"performance",children:"Performance"})]}),e.jsxs(Ce,{value:"generation",className:"space-y-4",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(I,{children:"Batch Generation"}),e.jsx(ae,{children:"Generate all document types simultaneously with optimized processing"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsx($,{onClick:L,disabled:o,className:"w-full",size:"lg",children:o?e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating Batch..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{className:"h-4 w-4 mr-2"}),"Generate All Documents"]})}),o&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[Math.round(r),"%"]})]}),e.jsx(Ae,{value:r})]})]})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(I,{children:"Individual Generation"}),e.jsx(ae,{children:"Generate specific document types with performance tracking"})]}),e.jsx(N,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.entries(C).map(([M,q])=>e.jsxs($,{onClick:()=>F(M),disabled:l===M,variant:"outline",className:"h-auto p-4 flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:q.icon}),e.jsx("span",{className:"text-sm font-medium",children:q.label}),l===M&&e.jsx(Dt,{className:"h-3 w-3 animate-spin"})]},M))})})]})]}),e.jsx(Ce,{value:"metrics",className:"space-y-4",children:e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(I,{children:"Generation Metrics"}),e.jsx(ae,{children:"Real-time performance data for all generations"})]}),e.jsx(N,{children:s.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No metrics available. Generate some documents to see performance data."}):e.jsx("div",{className:"space-y-2",children:s.slice(-10).reverse().map((M,q)=>{var H,z;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:((H=C[M.type])==null?void 0:H.icon)||"📄"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:((z=C[M.type])==null?void 0:z.label)||M.type}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(M.startTime).toLocaleTimeString()})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M.duration&&e.jsxs(X,{variant:"secondary",children:[(M.duration/1e3).toFixed(1),"s"]}),M.contentLength&&e.jsxs(X,{variant:"outline",children:[(M.contentLength/1e3).toFixed(1),"K chars"]}),e.jsxs(X,{variant:M.status==="completed"?"default":M.status==="failed"?"destructive":"secondary",children:[M.status==="completed"&&e.jsx(Fe,{className:"h-3 w-3 mr-1"}),M.status==="failed"&&e.jsx(rr,{className:"h-3 w-3 mr-1"}),M.status]})]})]},q)})})})]})}),e.jsx(Ce,{value:"performance",className:"space-y-4",children:e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(I,{children:"Performance Comparison"}),e.jsx(ae,{children:"Compare optimized vs legacy generation performance"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs($,{onClick:A,children:[e.jsx(tt,{className:"h-4 w-4 mr-2"}),"Run Performance Test"]}),u.optimized.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs(zi,{children:[e.jsx(rr,{className:"h-4 w-4"}),e.jsx(qi,{children:"Performance comparison completed. Optimized version shows significant improvements."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-lg text-green-600",children:"Optimized Version"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Average Time:"}),e.jsxs(X,{variant:"default",children:[(u.optimized.reduce((M,q)=>M+q.duration,0)/u.optimized.length/1e3).toFixed(1),"s"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Success Rate:"}),e.jsxs(X,{variant:"default",children:[(u.optimized.filter(M=>M.success).length/u.optimized.length*100).toFixed(0),"%"]})]})]})})]}),e.jsxs(_,{children:[e.jsx(R,{children:e.jsx(I,{className:"text-lg text-orange-600",children:"Legacy Version"})}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Average Time:"}),e.jsxs(X,{variant:"secondary",children:[(u.legacy.reduce((M,q)=>M+q.duration,0)/u.legacy.length/1e3).toFixed(1),"s"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Success Rate:"}),e.jsxs(X,{variant:"secondary",children:[(u.legacy.filter(M=>M.success).length/u.legacy.length*100).toFixed(0),"%"]})]})]})})]})]})]})]})]})})]})]})},xc={integrations:[],activeIntegration:null,exportJobs:[],activeExportJob:null,enterpriseSettings:null,showIntegrationDialog:!1,showExportDialog:!1,selectedDocuments:[],exportProgress:{}},a2=pc()(fc((t,s)=>({...xc,setIntegrations:i=>t({integrations:i}),addIntegration:i=>t(r=>({integrations:[...r.integrations,i]})),updateIntegration:(i,r)=>t(n=>({integrations:n.integrations.map(o=>o.id===i?{...o,...r}:o)})),removeIntegration:i=>t(r=>{var n;return{integrations:r.integrations.filter(o=>o.id!==i),activeIntegration:((n=r.activeIntegration)==null?void 0:n.id)===i?null:r.activeIntegration}}),setActiveIntegration:i=>t({activeIntegration:i}),setExportJobs:i=>t({exportJobs:i}),addExportJob:i=>t(r=>({exportJobs:[i,...r.exportJobs]})),updateExportJob:(i,r)=>t(n=>({exportJobs:n.exportJobs.map(o=>o._id===i?{...o,...r}:o)})),setActiveExportJob:i=>t({activeExportJob:i}),setEnterpriseSettings:i=>t({enterpriseSettings:i}),updateEnterpriseSettings:i=>t(r=>({enterpriseSettings:r.enterpriseSettings?{...r.enterpriseSettings,...i}:null})),setShowIntegrationDialog:i=>t({showIntegrationDialog:i}),setShowExportDialog:i=>t({showExportDialog:i}),setSelectedDocuments:i=>t({selectedDocuments:i}),updateExportProgress:(i,r)=>t(n=>({exportProgress:{...n.exportProgress,[i]:r}})),getIntegrationByType:i=>{const{integrations:r}=s();return r.find(n=>n.type===i)||null},getConnectedIntegrations:()=>{const{integrations:i}=s();return i.filter(r=>r.status==="connected")},getActiveExportJobs:()=>{const{exportJobs:i}=s();return i.filter(r=>r.status==="pending"||r.status==="processing")},getCompletedExportJobs:()=>{const{exportJobs:i}=s();return i.filter(r=>r.status==="completed"||r.status==="failed")},reset:()=>t(xc)}),{name:"enterprise-store",version:2,partialize:t=>({integrations:t.integrations,enterpriseSettings:t.enterpriseSettings,exportJobs:t.exportJobs.slice(0,50)})})),o2=()=>{const{toast:t}=Gt(),{integrations:s,exportJobs:i,getConnectedIntegrations:r}=a2(),{projects:n,documents:o}=ht(),[a,l]=y.useState([]),[d,m]=y.useState([]),[c,u]=y.useState(!0),[h,p]=y.useState(!1);r();const b=i.slice(0,10);y.useEffect(()=>{k()},[]);const k=async()=>{u(!0);try{await new Promise(z=>setTimeout(z,1500));const q=[{id:"1",type:"edit",user_name:"Sarah Johnson",document_title:"MVP Roadmap - Q1 2024",timestamp:Date.now()-1e3*60*15,description:"Updated milestone dates and resource allocation",platform:"sharepoint",url:"https://company.sharepoint.com/sites/mvp-docs/mvp-roadmap-q1.docx"},{id:"2",type:"comment",user_name:"Michael Chen",document_title:"Business Case - AI Integration",timestamp:Date.now()-1e3*60*32,description:"Added feedback on cost-benefit analysis section",platform:"confluence",url:"https://company.atlassian.net/wiki/spaces/MVP/pages/123456"},{id:"3",type:"export",user_name:"System",document_title:"Project Charter - Mobile App",timestamp:Date.now()-1e3*60*60,description:"Exported to SharePoint with collaboration enabled",platform:"sharepoint"},{id:"4",type:"approval",user_name:"David Wilson",document_title:"Feasibility Study - Cloud Migration",timestamp:Date.now()-1e3*60*90,description:"Approved document for stakeholder review",platform:"confluence",url:"https://company.atlassian.net/wiki/spaces/MVP/pages/789012"},{id:"5",type:"share",user_name:"Emily Rodriguez",document_title:"RFP Document - Enterprise Software",timestamp:Date.now()-1e3*60*120,description:"Shared with procurement team",platform:"sharepoint"}],H=[{id:"collab-1",document_id:"doc-1",document_title:"MVP Roadmap - Q1 2024",platform:"sharepoint",collaborators:[{user_name:"Sarah Johnson",last_active:Date.now()-1e3*60*5,status:"editing"},{user_name:"Tom Parker",last_active:Date.now()-1e3*60*12,status:"viewing"}],last_updated:Date.now()-1e3*60*5,version:"1.3",has_conflicts:!1,comments_count:3,pending_approvals:0},{id:"collab-2",document_id:"doc-2",document_title:"Business Case - AI Integration",platform:"confluence",collaborators:[{user_name:"Michael Chen",last_active:Date.now()-1e3*60*2,status:"commenting"},{user_name:"Lisa Wang",last_active:Date.now()-1e3*60*8,status:"viewing"},{user_name:"Alex Turner",last_active:Date.now()-1e3*60*15,status:"editing"}],last_updated:Date.now()-1e3*60*2,version:"2.1",has_conflicts:!0,comments_count:7,pending_approvals:1}];l(q),m(H)}catch{t({title:"Failed to load collaboration data",description:"Please try again later.",variant:"destructive"})}finally{u(!1)}},F=async()=>{p(!0),await k(),p(!1),t({title:"Data refreshed",description:"Collaboration data has been updated."})},L=q=>{switch(q){case"edit":return e.jsx(Qu,{className:"h-4 w-4 text-blue-600"});case"comment":return e.jsx(Yr,{className:"h-4 w-4 text-green-600"});case"export":return e.jsx(Me,{className:"h-4 w-4 text-purple-600"});case"share":return e.jsx(zs,{className:"h-4 w-4 text-orange-600"});case"approval":return e.jsx(Ss,{className:"h-4 w-4 text-emerald-600"});default:return e.jsx(At,{className:"h-4 w-4 text-gray-600"})}},A=q=>{switch(q){case"editing":return"bg-blue-100 text-blue-800";case"viewing":return"bg-gray-100 text-gray-800";case"commenting":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},U=q=>q==="sharepoint"?Os:$e,B=q=>{const z=Date.now()-q,V=Math.floor(z/(1e3*60)),te=Math.floor(z/(1e3*60*60)),Y=Math.floor(z/(1e3*60*60*24));return V<1?"Just now":V<60?`${V}m ago`:te<24?`${te}h ago`:`${Y}d ago`};if(c)return e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"h-5 w-5"}),e.jsx(I,{children:"Enterprise Collaboration"})]}),e.jsx(ae,{children:"Real-time collaboration insights and activity tracking"})]}),e.jsx(N,{children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Dt,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading collaboration data..."})]})})})]});const C=d.reduce((q,H)=>q+H.collaborators.length,0),E=d.reduce((q,H)=>q+H.comments_count,0),j=d.reduce((q,H)=>q+H.pending_approvals,0),M=d.filter(q=>q.has_conflicts).length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(_,{children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Collaborators"}),e.jsx("p",{className:"text-2xl font-bold",children:C})]}),e.jsx($e,{className:"h-8 w-8 text-blue-600"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Et,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsx("span",{className:"text-xs text-green-600",children:"+12% this week"})]})]})}),e.jsx(_,{children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Comments"}),e.jsx("p",{className:"text-2xl font-bold",children:E})]}),e.jsx(Vr,{className:"h-8 w-8 text-green-600"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Et,{className:"h-3 w-3 text-green-600 mr-1"}),e.jsx("span",{className:"text-xs text-green-600",children:"+8% this week"})]})]})}),e.jsx(_,{children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Pending Approvals"}),e.jsx("p",{className:"text-2xl font-bold",children:j})]}),e.jsx(Ge,{className:"h-8 w-8 text-orange-600"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(jn,{className:"h-3 w-3 text-orange-600 mr-1"}),e.jsx("span",{className:"text-xs text-orange-600",children:"Avg 2.3 days"})]})]})}),e.jsx(_,{children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Conflicts"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:M})]}),e.jsx(Ot,{className:"h-8 w-8 text-red-600"})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(ma,{className:"h-3 w-3 text-red-600 mr-1"}),e.jsx("span",{className:"text-xs text-red-600",children:"Require attention"})]})]})})]}),e.jsxs(qt,{defaultValue:"active",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Qt,{children:[e.jsxs(Ne,{value:"active",className:"flex items-center space-x-2",children:[e.jsx(Ft,{className:"h-4 w-4"}),e.jsx("span",{children:"Active Collaborations"})]}),e.jsxs(Ne,{value:"activity",className:"flex items-center space-x-2",children:[e.jsx(At,{className:"h-4 w-4"}),e.jsx("span",{children:"Recent Activity"})]}),e.jsxs(Ne,{value:"exports",className:"flex items-center space-x-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{children:"Export History"})]}),e.jsxs(Ne,{value:"analytics",className:"flex items-center space-x-2",children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsx("span",{children:"Analytics"})]})]}),e.jsxs($,{variant:"outline",size:"sm",onClick:F,disabled:h,children:[e.jsx(Dt,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),"Refresh"]})]}),e.jsx(Ce,{value:"active",className:"space-y-4",children:d.length===0?e.jsx(_,{children:e.jsxs(N,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx($e,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Active Collaborations"}),e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Start collaborating by exporting documents to SharePoint or Confluence"}),e.jsxs($,{children:[e.jsx(ui,{className:"h-4 w-4 mr-2"}),"Start Collaboration"]})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:d.map(q=>{const H=U(q.platform);return e.jsxs(_,{className:q.has_conflicts?"border-red-200":"",children:[e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(I,{className:"text-base leading-tight",children:q.document_title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground capitalize",children:q.platform}),e.jsxs(X,{variant:"outline",className:"text-xs",children:["v",q.version]})]})]}),q.has_conflicts&&e.jsx(X,{variant:"destructive",className:"text-xs",children:"Conflicts"})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Collaborators"}),e.jsx("span",{children:q.collaborators.length})]}),e.jsx("div",{className:"space-y-1",children:q.collaborators.map((z,V)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:z.user_name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{variant:"secondary",className:`text-xs ${A(z.status)}`,children:z.status}),e.jsx("span",{className:"text-xs text-muted-foreground",children:B(z.last_active)})]})]},V))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:q.comments_count}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Comments"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:q.pending_approvals}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Approvals"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold",children:B(q.last_updated)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Last Update"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs($,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Tt,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs($,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(Yi,{className:"h-3 w-3 mr-1"}),"Open"]})]})]})]},q.id)})})}),e.jsx(Ce,{value:"activity",className:"space-y-4",children:e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(I,{className:"text-lg",children:"Recent Activity"}),e.jsx(ae,{children:"Latest collaboration activities across all connected platforms"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:a.map(q=>{const H=U(q.platform);return e.jsxs("div",{className:"flex items-start space-x-3 pb-4 border-b last:border-b-0",children:[e.jsx("div",{className:"flex-shrink-0",children:L(q.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium",children:q.user_name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:B(q.timestamp)})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:q.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs font-medium",children:q.document_title}),q.url&&e.jsx($,{variant:"ghost",size:"sm",asChild:!0,children:e.jsx("a",{href:q.url,target:"_blank",rel:"noopener noreferrer",children:e.jsx(Yi,{className:"h-3 w-3"})})})]})]})]},q.id)})})})]})}),e.jsx(Ce,{value:"exports",className:"space-y-4",children:e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(I,{className:"text-lg",children:"Export History"}),e.jsx(ae,{children:"Recent document exports to enterprise platforms"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:b.map(q=>{const H=q.integration_type==="sharepoint"?Os:$e,z={completed:"text-green-600",failed:"text-red-600",processing:"text-blue-600",pending:"text-yellow-600"};return e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium",children:[q.total_documents," documents exported"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(q.started_at).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(X,{variant:"outline",className:z[q.status]||"text-gray-600",children:q.status}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[q.processed_documents,"/",q.total_documents]})]}),q.status==="completed"&&e.jsx($,{variant:"ghost",size:"sm",children:e.jsx(Yi,{className:"h-3 w-3"})})]})]},q._id)})})})]})}),e.jsx(Ce,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(I,{className:"text-lg",children:"Platform Usage"}),e.jsx(ae,{children:"Distribution of collaboration across platforms"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Os,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm",children:"SharePoint"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-medium",children:"65%"}),e.jsx(Ae,{value:65,className:"w-24 h-2 mt-1"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($e,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Confluence"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-sm font-medium",children:"35%"}),e.jsx(Ae,{value:35,className:"w-24 h-2 mt-1"})]})]})]})})]}),e.jsxs(_,{children:[e.jsxs(R,{children:[e.jsx(I,{className:"text-lg",children:"Collaboration Metrics"}),e.jsx(ae,{children:"Key performance indicators"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Avg. Response Time"}),e.jsx("span",{className:"text-sm font-medium",children:"2.3 hours"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Document Approval Rate"}),e.jsx("span",{className:"text-sm font-medium",children:"94%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Sessions/Day"}),e.jsx("span",{className:"text-sm font-medium",children:"127"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Conflict Resolution Time"}),e.jsx("span",{className:"text-sm font-medium",children:"45 minutes"})]})]})})]})]})})]})]})},l2=({project:t,onBack:s,onUpdate:i})=>{const[r,n]=y.useState("overview"),[o,a]=y.useState([]),[l,d]=y.useState([]),[m,c]=y.useState(!0),{addNotification:u}=ht();y.useEffect(()=>{h()},[t._id]);const h=async()=>{c(!0);try{const[L,A]=await Promise.all([xe.getDocuments(t._id),xe.getDiagrams(t._id)]);a(L),d(A)}catch(L){console.error("Failed to load project data:",L),u({type:"error",title:"Error Loading Project Data",message:"Could not load project documents and diagrams.",duration:5e3})}finally{c(!1)}},p=L=>{switch(L){case"active":return"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-400";case"completed":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"draft":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}},b=L=>new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),k=[{label:"Project Overview",tabs:[{id:"overview",label:"Overview",icon:ct}]},{label:"Business Documents",tabs:[{id:"business_case",label:"Business Case",icon:ke},{id:"feasibility",label:"Feasibility Study",icon:Et},{id:"charter",label:"Project Charter",icon:Ua},{id:"scope",label:"Scope Statement",icon:ct},{id:"rfp",label:"RFP Document",icon:ke}]},{label:"AI & Analytics",tabs:[{id:"roadmap",label:"AI Roadmap",icon:Et},{id:"diagrams",label:"Diagrams",icon:zs},{id:"ai_analytics",label:"AI Analytics",icon:Et},{id:"optimized_generation",label:"Optimized Generation",icon:Ft}]},{label:"Export & Integration",tabs:[{id:"enterprise",label:"Enterprise",icon:$e},{id:"collaboration",label:"Collaboration",icon:$e},{id:"export",label:"Export",icon:zs}]}],F=L=>{n(L)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50/50 via-background to-purple-50/50 dark:from-blue-950/20 dark:via-background dark:to-purple-950/20",children:[e.jsx("div",{className:"border-b bg-background/80 backdrop-blur-md sticky top-0 z-30",children:e.jsx("div",{className:"px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs($,{variant:"ghost",size:"sm",onClick:s,className:"hover:bg-muted",children:[e.jsx(Km,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),e.jsx(Ye,{orientation:"vertical",className:"h-6"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-foreground",children:t.name}),e.jsx(X,{variant:"secondary",className:p(t.status),children:t.status})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.industry," • Created ",b(t.created_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx($e,{className:"w-4 h-4 mr-2"}),"Share"]}),e.jsxs($,{variant:"outline",size:"sm",children:[e.jsx(Jr,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsx($,{variant:"ghost",size:"sm",children:e.jsx(Um,{className:"w-4 h-4"})})]})]})})}),e.jsxs("div",{className:"px-6 lg:px-8 py-6",children:[e.jsxs(_,{className:"mb-6 border-l-4 border-l-primary/20",children:[e.jsx(R,{children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx(I,{className:"text-lg text-foreground",children:"Problem Statement"}),e.jsx(ae,{className:"text-base leading-relaxed text-muted-foreground",children:t.problem_statement})]})})}),e.jsx(N,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:e.jsx(ke,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Documents"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:o.length})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center",children:e.jsx(zs,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Diagrams"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:l.length})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/20 rounded-lg flex items-center justify-center",children:e.jsx($e,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Collaborators"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:"3"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:e.jsx(Ge,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:b(t.updated_at)})]})]})]})})]}),e.jsxs(qt,{value:r,className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:k.map(L=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground px-1",children:L.label}),e.jsx("div",{className:"flex flex-wrap gap-1",children:L.tabs.map(A=>{const U=A.icon,B=r===A.id;return e.jsxs("button",{onClick:()=>F(A.id),className:`
                          flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium
                          transition-all duration-200 border
                          ${B?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-background text-muted-foreground border-border hover:bg-muted hover:text-foreground"}
                        `,children:[e.jsx(U,{className:"w-4 h-4"}),A.label]},A.id)})})]},L.label))}),e.jsxs("div",{className:"mt-6",children:[r==="overview"&&e.jsx(ox,{project:t,documents:o,diagrams:l,isLoading:m,onRefresh:h}),r==="business_case"&&e.jsx(dx,{project:t}),r==="feasibility"&&e.jsx(hx,{project:t}),r==="charter"&&e.jsx(mx,{project:t}),r==="scope"&&e.jsx(ux,{project:t}),r==="rfp"&&e.jsx(xx,{project:t}),r==="roadmap"&&e.jsx(cx,{project:t,documents:o,onDocumentGenerated:h}),r==="diagrams"&&e.jsx(jx,{project:t,diagrams:l,onDiagramSaved:h}),r==="ai_analytics"&&e.jsx(r2,{project:t}),r==="optimized_generation"&&e.jsx(n2,{project:t}),r==="enterprise"&&e.jsx(i2,{projectId:t._id}),r==="collaboration"&&e.jsx(o2,{}),r==="export"&&e.jsx(s2,{project:t,documents:o,diagrams:l})]})]})]})]})},c2=({project:t,className:s="",onViewFullAnalytics:i})=>{const[r,n]=y.useState(null),[o,a]=y.useState(!0);y.useEffect(()=>{l()},[t]);const l=async()=>{a(!0);try{const h=await xe.getAIAnalytics(t==null?void 0:t._id);if(h.success&&h.analytics){const p=d(h.analytics);n(p)}}catch(h){console.error("Failed to load AI insights:",h)}finally{a(!1)}},d=h=>{const p=h.averageQualityScore,b=h.averageGenerationTime,k=h.successRate,F=p>=85?"up":p>=80?"stable":"down",L=b<=3e3?"up":b<=4e3?"stable":"down",A=Object.entries(h.modelUsage).reduce((B,C)=>B[1].count>C[1].count?B:C)[0];let U;return p<80?U={type:"quality",message:"Consider using Kimi model for better quality results",priority:"high"}:b>4500?U={type:"performance",message:"Optimize prompts to reduce generation time",priority:"medium"}:k<90?U={type:"usage",message:"Review failed generations and optimize inputs",priority:"high"}:U={type:"cost",message:"System performing well - consider scaling up",priority:"low"},{qualityScore:p,qualityTrend:F,generationTime:b,timeTrend:L,successRate:k,topModel:A,totalGenerations:h.totalGenerations,weeklyGrowth:12+Math.random()*15,recommendation:U}},m=h=>{switch(h){case"up":return e.jsx(Et,{className:"h-4 w-4 text-green-600"});case"down":return e.jsx(rx,{className:"h-4 w-4 text-red-600"});case"stable":return e.jsx(ct,{className:"h-4 w-4 text-blue-600"})}},c=h=>{switch(h){case"high":return e.jsx(Ot,{className:"h-4 w-4 text-red-600"});case"medium":return e.jsx(Ge,{className:"h-4 w-4 text-yellow-600"});case"low":return e.jsx(Fe,{className:"h-4 w-4 text-green-600"});default:return e.jsx(wt,{className:"h-4 w-4 text-blue-600"})}},u=h=>`${(h/1e3).toFixed(1)}s`;return o?e.jsx(_,{className:s,children:e.jsx(N,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(wt,{className:"h-6 w-6 animate-pulse text-primary"})})})}):r?e.jsxs(_,{className:s,children:[e.jsxs(R,{className:"pb-3",children:[e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5 text-primary"}),"AI Performance Insights"]}),e.jsx(ae,{children:"Real-time AI generation performance summary"})]}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx("span",{className:"text-lg font-bold text-primary",children:r.qualityScore.toFixed(1)}),m(r.qualityTrend)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Quality Score"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx("span",{className:"text-lg font-bold text-primary",children:u(r.generationTime)}),m(r.timeTrend)]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Time"})]}),e.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[r.successRate.toFixed(0),"%"]}),e.jsx(Fe,{className:"h-4 w-4 text-green-600"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Success Rate"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Total Generations"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-bold",children:r.totalGenerations.toLocaleString()}),e.jsxs(X,{variant:"secondary",className:"text-xs",children:["+",r.weeklyGrowth.toFixed(0),"% this week"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Top Performing Model"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-bold",children:r.topModel==="kimi-k2-0711-preview"?"Kimi":"Default"})]})]})]}),e.jsx("div",{className:"p-3 border rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50",children:e.jsxs("div",{className:"flex items-start gap-2",children:[c(r.recommendation.priority),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"AI Recommendation"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.recommendation.message})]}),e.jsx(X,{variant:r.recommendation.priority==="high"?"destructive":r.recommendation.priority==="medium"?"default":"secondary",className:"text-xs",children:r.recommendation.priority})]})}),i&&e.jsxs($,{variant:"outline",className:"w-full",onClick:i,children:["View Full Analytics",e.jsx(ni,{className:"h-4 w-4 ml-2"})]})]})]}):e.jsx(_,{className:s,children:e.jsx(N,{className:"p-6",children:e.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"Unable to load AI insights"})})})},d2=()=>{const t=Ra(),s=ht(),i=t==null?void 0:t.user,r=(s==null?void 0:s.projects)||[],n=s==null?void 0:s.selectedProject;s!=null&&s.isLoading,s==null||s.error;const o=s==null?void 0:s.setProjects,a=s==null?void 0:s.setSelectedProject,l=s==null?void 0:s.setLoading,d=s==null?void 0:s.setError,m=s==null?void 0:s.addNotification,[c,u]=y.useState(!1);y.useEffect(()=>{h()},[]);const h=async()=>{if(!(!l||!o||!d||!i))try{l(!0);const E=await xe.getProjects();o(E)}catch(E){console.error("Failed to load projects:",E),d("Failed to load projects")}finally{l(!1)}},p=async E=>{if(!(!l||!m||!i))try{l(!0),await xe.createProject(E),m({type:"success",title:"Success!",message:"Project created successfully"}),u(!1),h()}catch(j){console.error("Failed to create project:",j),m({type:"error",title:"Error",message:"Failed to create project"})}finally{l(!1)}},b=E=>{a(E)},k=()=>{a(null)},F=E=>new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),L={total:r.length,active:r.filter(E=>E.status==="active").length,completed:r.filter(E=>E.status==="completed").length,draft:r.filter(E=>E.status==="draft").length},A={totalDocuments:r.length*2,aiGenerations:Math.floor(Math.random()*150)+50,completionRate:r.length>0?Math.round(L.completed/r.length*100):0},U=[{action:"Business Case generated",project:"Enterprise CRM",time:"2 hours ago",type:"ai"},{action:"Project created",project:"Healthcare Analytics",time:"1 day ago",type:"project"},{action:"Team member added",project:"Supply Chain Initiative",time:"2 days ago",type:"team"},{action:"Document exported",project:"FinTech Mobile App",time:"3 days ago",type:"export"},{action:"AI Testing completed",project:"E-Learning Platform",time:"1 week ago",type:"test"}],B=E=>{switch(E){case"ai":return e.jsx(wt,{className:"w-4 h-4 text-purple-500"});case"project":return e.jsx(ct,{className:"w-4 h-4 text-blue-500"});case"team":return e.jsx($e,{className:"w-4 h-4 text-green-500"});case"export":return e.jsx(ke,{className:"w-4 h-4 text-orange-500"});case"test":return e.jsx(Ft,{className:"w-4 h-4 text-yellow-500"});default:return e.jsx(At,{className:"w-4 h-4 text-gray-500"})}};if(n)return e.jsx(l2,{project:n,onBack:k,onUpdate:h});const C=`Welcome back${i!=null&&i.email?`, ${i.email.split("@")[0]}`:""}!`;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-yellow-50 to-orange-100",children:[e.jsx("div",{className:"border-b border-orange-200 bg-gradient-to-r from-yellow-50/80 to-orange-50/80 backdrop-blur-md sticky top-0 z-30",children:e.jsx("div",{className:"px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-800",children:C}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Your strategic project overview and analytics dashboard"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs($,{onClick:()=>u(!0),"data-create-project":!0,className:"bg-gradient-to-r from-orange-400 to-yellow-500 hover:from-orange-500 hover:to-yellow-600 text-white shadow-lg border-0",children:[e.jsx(ui,{className:"w-4 h-4 mr-2"}),"New Project"]})})]})})}),e.jsxs("div",{className:"px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(_,{className:"relative overflow-hidden border-0 bg-white/80 backdrop-blur-sm shadow-lg",children:e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Projects"}),e.jsx("p",{className:"text-3xl font-bold mt-1 text-gray-900",children:L.total}),e.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center",children:[e.jsx(Et,{className:"w-3 h-3 mr-1"}),"+2 this month"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-400 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(ct,{className:"w-6 h-6 text-white"})})]})})}),e.jsx(_,{className:"relative overflow-hidden border-0 bg-white/80 backdrop-blur-sm shadow-lg",children:e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Projects"}),e.jsx("p",{className:"text-3xl font-bold mt-1 text-gray-900",children:L.active}),e.jsxs("p",{className:"text-xs text-orange-600 mt-1 flex items-center",children:[e.jsx(Ge,{className:"w-3 h-3 mr-1"}),"In progress"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-400 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(At,{className:"w-6 h-6 text-white"})})]})})}),e.jsx(_,{className:"relative overflow-hidden border-0 bg-white/80 backdrop-blur-sm shadow-lg",children:e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"AI Generations"}),e.jsx("p",{className:"text-3xl font-bold mt-1 text-gray-900",children:A.aiGenerations}),e.jsxs("p",{className:"text-xs text-purple-600 mt-1 flex items-center",children:[e.jsx(at,{className:"w-3 h-3 mr-1"}),"+24 this week"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-400 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(wt,{className:"w-6 h-6 text-white"})})]})})}),e.jsx(_,{className:"relative overflow-hidden border-0 bg-white/80 backdrop-blur-sm shadow-lg",children:e.jsx(N,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completion Rate"}),e.jsxs("p",{className:"text-3xl font-bold mt-1 text-gray-900",children:[A.completionRate,"%"]}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1 flex items-center",children:[e.jsx(Ss,{className:"w-3 h-3 mr-1"}),"Above average"]})]}),e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-400 to-yellow-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(tt,{className:"w-6 h-6 text-white"})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(_,{className:"lg:col-span-2 border-0 bg-white/80 backdrop-blur-sm shadow-lg",children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center text-lg",children:[e.jsx(bc,{className:"w-5 h-5 mr-2 text-orange-500"}),"Project Status Overview"]}),e.jsx(ae,{children:"Current status distribution of your projects"})]}),e.jsx(N,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Active Projects"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold text-green-600",children:L.active}),e.jsxs(X,{variant:"secondary",className:"bg-green-100 text-green-800",children:[L.total>0?Math.round(L.active/L.total*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Completed Projects"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:L.completed}),e.jsxs(X,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[L.total>0?Math.round(L.completed/L.total*100):0,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("span",{className:"font-medium",children:"Draft Projects"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-2xl font-bold text-orange-600",children:L.draft}),e.jsxs(X,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:[L.total>0?Math.round(L.draft/L.total*100):0,"%"]})]})]})]})})]}),e.jsxs(_,{className:"border-0 bg-white/80 backdrop-blur-sm shadow-lg",children:[e.jsxs(R,{children:[e.jsxs(I,{className:"flex items-center text-lg",children:[e.jsx(At,{className:"w-5 h-5 mr-2 text-purple-500"}),"Recent Activity"]}),e.jsx(ae,{children:"Latest updates across your projects"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:U.map((E,j)=>e.jsxs("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:[B(E.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:E.action}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:E.project}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:E.time})]})]},j))})})]})]}),e.jsxs(_,{className:"border-0 bg-white/80 backdrop-blur-sm shadow-lg",children:[e.jsx(R,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center text-lg",children:[e.jsx(jn,{className:"w-5 h-5 mr-2 text-blue-500"}),"Recent Projects"]}),e.jsx(ae,{children:"Quick access to your recently worked on projects"})]}),e.jsx($,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:"/projects",children:["View All Projects",e.jsx(Zm,{className:"w-4 h-4 ml-2"})]})})]})}),e.jsx(N,{children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ct,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No projects yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first strategic project"}),e.jsxs($,{onClick:()=>u(!0),className:"bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white",children:[e.jsx(ui,{className:"w-4 h-4 mr-2"}),"Create Your First Project"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.slice(0,6).map(E=>e.jsx(_,{className:"cursor-pointer hover:shadow-md transition-all duration-200 bg-gradient-to-br from-white to-gray-50 border-gray-200",onClick:()=>b(E),children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900 truncate flex-1",children:E.name}),e.jsx(X,{variant:"secondary",className:`ml-2 text-xs px-2 py-1 ${E.status==="active"?"bg-green-100 text-green-800":E.status==="completed"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:E.status})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:E.problem_statement}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(wc,{className:"w-3 h-3 mr-1"}),F(E.created_at)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Pm,{className:"w-3 h-3 mr-1"}),E.industry]})]})]})},E._id))})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(c2,{})})]}),e.jsx(Dm,{open:c,onOpenChange:u,onCreateProject:p})]})},h2=()=>e.jsx(Lm,{children:e.jsx(d2,{})}),gS=Object.freeze(Object.defineProperty({__proto__:null,HomePage:h2},Symbol.toStringTag,{value:"Module"}));export{ll as $,Xi as A,tr as B,z_ as C,O_ as D,P_ as E,py as F,cS as G,V_ as H,ew as I,qf as J,Ka as K,jd as L,xr as M,wd as N,X2 as O,Yx as P,J_ as Q,pt as R,_t as S,aS as T,Ah as U,go as V,Mb as W,Tb as X,ts as Y,Qa as Z,bs as _,R_ as a,sS as a$,Jf as a0,or as a1,Kl as a2,dS as a3,$b as a4,yr as a5,fS as a6,gr as a7,Ci as a8,cn as a9,oh as aA,dh as aB,oj as aC,La as aD,Tv as aE,vj as aF,bv as aG,ra as aH,kv as aI,vv as aJ,Av as aK,oo as aL,Fv as aM,je as aN,es as aO,dw as aP,Gx as aQ,to as aR,tS as aS,rS as aT,pl as aU,xl as aV,nS as aW,iS as aX,Z2 as aY,eS as aZ,lS as a_,an as aa,mv as ab,Xv as ac,Ln as ad,fr as ae,ln as af,av as ag,lh as ah,th as ai,dj as aj,hj as ak,Bs as al,tv as am,$l as an,Js as ao,mj as ap,lo as aq,cj as ar,pj as as,Si as at,nv as au,Fs as av,An as aw,Ll as ax,co as ay,ih as az,I_ as b,oS as b0,Xb as b1,pr as b2,me as b3,ge as b4,q_ as b5,gS as b6,B_ as c,kt as d,Xh as e,et as f,wo as g,hn as h,ji as i,Kx as j,xo as k,fe as l,nw as m,my as n,F_ as o,Qb as p,Gb as q,jh as r,$_ as s,wb as t,pS as u,yd as v,iw as w,rp as x,Aj as y,ao as z};
